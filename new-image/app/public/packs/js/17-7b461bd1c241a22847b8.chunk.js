(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1563:function(t,e,a){"use strict";a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return c})),a.d(e,"b",(function(){return l}));a(14),a(9),a(20),a(23),a(59),a(75),a(24),a(10),a(21),a(29),a(30);function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){i(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function i(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var o=function(t){return t.attribute_key?t.filter_operator?"is_present"!==t.filter_operator&&"is_not_present"!==t.filter_operator&&(!t.values||Array.isArray(t.values)&&0===t.values.length)?"VALUE_REQUIRED":"days_before"===t.filter_operator&&(parseInt(t.values,10)<=0||parseInt(t.values,10)>=999)?"VALUE_MUST_BE_BETWEEN_1_AND_998":null:"FILTER_OPERATOR_REQUIRED":"ATTRIBUTE_KEY_REQUIRED"},s=function(t){var e={};return t.forEach((function(t,a){var n=o(t);n&&(e["filter_".concat(a)]=n)})),e},c=function(t){return t&&0!==t.length?t.reduce((function(t,e,a){var n=function(t){return["mute_conversation","snooze_conversation","resolve_conversation","remove_assigned_team"].includes(t.action_name)||t.action_params&&0!==t.action_params.length?null:"ACTION_PARAMETERS_REQUIRED"}(e);return n&&(t["action_".concat(a)]=n),t}),{}):{actions:"ATLEAST_ONE_ACTION_REQUIRED"}},l=function(t){var e,a,n=function(t){var e={};return["name","description","event_name"].forEach((function(a){t[a]||(e[a]="".concat(a.charAt(0).toUpperCase()+a.slice(1)," is required"))})),e}(t),i=(e=t.conditions,a={},e&&0!==e.length?(e.forEach((function(t,e){var n=o(t);n&&(a["condition_".concat(e)]=n)})),a):(a.conditions="ATLEAST_ONE_CONDITION_REQUIRED",a)),s=c(t.actions);return r(r(r({},n),i),s)}},1747:function(t,e,a){"use strict";a(140),a(24),a(10),a(21),a(29),a(23),a(30),a(81);var n={props:["teams","value"],data:function(){return{selectedTeams:[],message:""}},mounted:function(){var t=this.value.team_ids;this.selectedTeams=t,this.message=this.value.message},methods:{updateValue:function(){this.$emit("input",{team_ids:this.selectedTeams.map((function(t){return t.id})),message:this.message})}}},r=(a(1938),a(8)),i=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"multiselect-wrap--small"},[e("multiselect",{attrs:{"track-by":"id",label:"name",placeholder:t.$t("AUTOMATION.ACTION.TEAM_DROPDOWN_PLACEHOLDER"),multiple:"","selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:t.teams,"allow-empty":!1},on:{input:t.updateValue},model:{value:t.selectedTeams,callback:function(e){t.selectedTeams=e},expression:"selectedTeams"}}),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{rows:"4",placeholder:t.$t("AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER")},domProps:{value:t.message},on:{input:[function(e){e.target.composing||(t.message=e.target.value)},t.updateValue]}})],1)])}),[],!1,null,"286ddf03",null).exports,o=(a(9),a(22),a(33),a(64));function s(t,e,a,n,r,i,o){try{var s=t[i](o),c=s.value}catch(l){return void a(l)}s.done?e(c):Promise.resolve(c).then(n,r)}var c={components:{Spinner:a(198).a},props:{initialFileName:{type:String,default:""}},data:function(){return{uploadState:"idle",label:this.$t("AUTOMATION.ATTACHMENT.LABEL_IDLE")}},mounted:function(){this.initialFileName&&(this.label=this.initialFileName,this.uploadState="uploaded")},methods:{onChangeFile:function(t){var e,a=this;return(e=regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.uploadState="processing",a.label=a.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOADING"),e.prev=2,n=t.target.files[0],e.next=6,a.$store.dispatch("automations/uploadAttachment",n);case 6:r=e.sent,a.$emit("input",[r]),a.uploadState="uploaded",a.label=a.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOADED"),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(2),a.uploadState="failed",a.label=a.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOAD_FAILED"),Object(o.a)(a.$t("AUTOMATION.ATTACHMENT.UPLOAD_ERROR"));case 17:case"end":return e.stop()}}),e,null,[[2,12]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var i=e.apply(t,a);function o(t){s(i,n,r,o,c,"next",t)}function c(t){s(i,n,r,o,c,"throw",t)}o(void 0)}))})()}}},l=c;a(1939);function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){m(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function m(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var f={components:{AutomationActionTeamMessageInput:i,AutomationActionFileInput:Object(r.a)(l,(function(){var t=this,e=t._self._c;return e("label",{staticClass:"input-wrapper",class:t.uploadState},["processing"!==t.uploadState?e("input",{class:"processing"===t.uploadState?"disabled":"",attrs:{type:"file",name:"attachment"},on:{change:t.onChangeFile}}):t._e(),t._v(" "),"processing"===t.uploadState?e("Spinner"):t._e(),t._v(" "),"idle"===t.uploadState?e("fluent-icon",{attrs:{icon:"file-upload"}}):t._e(),t._v(" "),"uploaded"===t.uploadState?e("fluent-icon",{staticClass:"success-icon",attrs:{icon:"checkmark-circle",type:"outline"}}):t._e(),t._v(" "),"failed"===t.uploadState?e("fluent-icon",{staticClass:"error-icon",attrs:{icon:"dismiss-circle",type:"outline"}}):t._e(),t._v(" "),e("p",{staticClass:"file-button"},[t._v(t._s(t.label))])],1)}),[],!1,null,"40dc9872",null).exports,WootMessageEditor:a(864).a},props:{value:{type:Object,default:function(){return null}},actionTypes:{type:Array,default:function(){return[]}},dropdownValues:{type:Array,default:function(){return[]}},errorMessage:{type:String,default:""},showActionInput:{type:Boolean,default:!0},initialFileName:{type:String,default:""},isMacro:{type:Boolean,default:!1}},computed:{action_name:{get:function(){return this.value?this.value.action_name:null},set:function(t){var e=this.value||{};this.$emit("input",p(p({},e),{},{action_name:t}))}},action_params:{get:function(){return this.value?this.value.action_params:null},set:function(t){var e=this.value||{};this.$emit("input",p(p({},e),{},{action_params:t}))}},inputType:function(){var t=this;return this.actionTypes.find((function(e){return e.key===t.action_name})).inputType},actionInputStyles:function(){return{"has-error":this.errorMessage,"is-a-macro":this.isMacro}},castMessageVmodel:{get:function(){return Array.isArray(this.action_params)?this.action_params[0]:this.action_params},set:function(t){this.action_params=t}}},methods:{removeAction:function(){this.$emit("removeAction")},resetAction:function(){this.$emit("resetAction")}}},_=(a(1940),Object(r.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"filter",class:t.actionInputStyles},[e("div",{staticClass:"filter-inputs"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.action_name,expression:"action_name"}],staticClass:"action__question",class:{"full-width":!t.showActionInput},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.action_name=e.target.multiple?a:a[0]},function(e){return t.resetAction()}]}},t._l(t.actionTypes,(function(a){return e("option",{key:a.key,domProps:{value:a.key}},[t._v("\n        "+t._s(a.label)+"\n      ")])})),0),t._v(" "),t.showActionInput?e("div",{staticClass:"filter__answer--wrap"},[t.inputType?e("div",{staticClass:"w-full"},["search_select"===t.inputType?e("div",{staticClass:"multiselect-wrap--small"},[e("multiselect",{attrs:{"track-by":"id",label:"name",placeholder:t.$t("FORMS.MULTISELECT.SELECT"),"selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:t.dropdownValues,"allow-empty":!1,"option-height":104},model:{value:t.action_params,callback:function(e){t.action_params=e},expression:"action_params"}})],1):"multi_select"===t.inputType?e("div",{staticClass:"multiselect-wrap--small"},[e("multiselect",{attrs:{"track-by":"id",label:"name",placeholder:t.$t("FORMS.MULTISELECT.SELECT"),multiple:"","selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:t.dropdownValues,"allow-empty":!1,"option-height":104},model:{value:t.action_params,callback:function(e){t.action_params=e},expression:"action_params"}})],1):"email"===t.inputType?e("input",{directives:[{name:"model",rawName:"v-model",value:t.action_params,expression:"action_params"}],staticClass:"answer--text-input",attrs:{type:"email",placeholder:t.$t("AUTOMATION.ACTION.EMAIL_INPUT_PLACEHOLDER")},domProps:{value:t.action_params},on:{input:function(e){e.target.composing||(t.action_params=e.target.value)}}}):"url"===t.inputType?e("input",{directives:[{name:"model",rawName:"v-model",value:t.action_params,expression:"action_params"}],staticClass:"answer--text-input",attrs:{type:"url",placeholder:t.$t("AUTOMATION.ACTION.URL_INPUT_PLACEHOLDER")},domProps:{value:t.action_params},on:{input:function(e){e.target.composing||(t.action_params=e.target.value)}}}):t._e(),t._v(" "),"attachment"===t.inputType?e("AutomationActionFileInput",{attrs:{"initial-file-name":t.initialFileName},model:{value:t.action_params,callback:function(e){t.action_params=e},expression:"action_params"}}):t._e()],1):t._e()]):t._e(),t._v(" "),t.isMacro?t._e():e("woot-button",{attrs:{icon:"dismiss",variant:"clear","color-scheme":"secondary"},on:{click:t.removeAction}})],1),t._v(" "),"team_message"===t.inputType?e("AutomationActionTeamMessageInput",{attrs:{teams:t.dropdownValues},model:{value:t.action_params,callback:function(e){t.action_params=e},expression:"action_params"}}):t._e(),t._v(" "),"textarea"===t.inputType?e("WootMessageEditor",{staticClass:"action-message",attrs:{rows:"4","enable-variables":"",placeholder:t.$t("AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER")},model:{value:t.castMessageVmodel,callback:function(e){t.castMessageVmodel=e},expression:"castMessageVmodel"}}):t._e(),t._v(" "),t.errorMessage?e("p",{staticClass:"filter-error"},[t._v("\n    "+t._s(t.errorMessage)+"\n  ")]):t._e()],1)}),[],!1,null,"0c2c8ba6",null));e.a=_.exports},1772:function(t,e,a){},1773:function(t,e,a){},1774:function(t,e,a){},1775:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"b",(function(){return r})),a.d(e,"d",(function(){return i})),a.d(e,"a",(function(){return o})),a.d(e,"e",(function(){return s})),a.d(e,"f",(function(){return c}));var n=[{attribute_key:"message_type",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],r=[{attribute_key:"browser_language",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],i=[{attribute_key:"status",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],o=[{action_name:"assign_agent",action_params:[]}],s=[{id:"incoming",name:"Incoming Message"},{id:"outgoing",name:"Outgoing Message"}],c=[{id:"nil",name:"None"},{id:"low",name:"Low"},{id:"medium",name:"Medium"},{id:"high",name:"High"},{id:"urgent",name:"Urgent"}]},1776:function(t,e,a){"use strict";a(81),a(10),a(32),a(9),a(34),a(14),a(17),a(20),a(65),a(59),a(44);function n(t){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return i(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}e.a=function(t){return JSON.parse(JSON.stringify(t)).map((function(t){var e;return Array.isArray(t.action_params)?t.action_params=e=(e=t.action_params).length<=0?[]:e.every((function(t){return"string"===typeof t}))||e.every((function(t){return"number"===typeof t}))?r(e):e.map((function(t){return t.id})):"object"===n(t.action_params)?t.action_params=function(t){return t.action_params.id?t.action_params=[t.action_params.id]:t.action_params=[t.action_params],t.action_params}(t):t.action_params?t.action_params=[t.action_params]:t.action_params=[],t}))}},1938:function(t,e,a){"use strict";a(1772)},1939:function(t,e,a){"use strict";a(1773)},1940:function(t,e,a){"use strict";a(1774)}}]);
//# sourceMappingURL=17-7b461bd1c241a22847b8.chunk.js.map