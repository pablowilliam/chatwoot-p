{"version":3,"sources":["webpack:///./app/javascript/dashboard/routes/dashboard/settings/billing/Index.vue?ffea","webpack:///./app/javascript/dashboard/routes/dashboard/settings/billing/Index.vue?1f55","webpack:///./app/javascript/dashboard/routes/dashboard/settings/billing/components/BillingItem.vue?cf40","webpack:///app/javascript/dashboard/routes/dashboard/settings/billing/components/BillingItem.vue","webpack:///app/javascript/dashboard/routes/dashboard/settings/billing/Index.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/billing/components/BillingItem.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/billing/components/BillingItem.vue?ddbe","webpack:///./app/javascript/dashboard/routes/dashboard/settings/billing/Index.vue?71b6","webpack:///./app/javascript/dashboard/routes/dashboard/settings/billing/Index.vue","webpack:///./app/javascript/shared/helpers/markdownIt/link.js","webpack:///./app/javascript/shared/helpers/MessageFormatter.js","webpack:///./app/javascript/shared/composables/useMessageFormatter.js","webpack:///./node_modules/markdown-it-link-attributes/index.js"],"names":["_vm","this","_c","_self","staticClass","_v","_s","title","description","attrs","buttonIcon","on","$event","$emit","buttonLabel","uiFlags","hasABillingPlan","$t","directives","name","rawName","value","formatMessage","plan","planName","quantity","subscribedQuantity","expression","onClickBillingPortal","onToggleChatWindow","USER_MENTIONS_REGEX","processInlineToken","blockToken","children","forEach","inlineToken","type","imgSrc","attrGet","height","URL","searchParams","get","attrSet","setImageHeight","md","require","html","xhtmlOut","breaks","langPrefix","linkify","typographer","quotes","maxNesting","use","renderer","rules","mention","tokens","idx","content","inline","ruler","before","state","silent","label","labelEnd","labelStart","pos","res","token","href","max","posMax","src","charCodeAt","helpers","parseLinkLabel","slice","parseLinkDestination","ok","normalizeLink","str","validateLink","match","RegExp","push","core","after","mila","class","rel","target","TWITTER_USERNAME_REGEX","TWITTER_HASH_REGEX","MessageFormatter","message","isATweet","isAPrivateNote","updatedMessage","replace","render","DOMParser","parseFromString","formattedMessage","body","textContent","useMessageFormatter","getPlainText","plainText","truncateMessage","length","highlightContent","searchTerm","highlightClass","plainTextContent","escapedSearchTerm","markdownitLinkAttributes","configs","Array","isArray","Object","freeze","defaultRender","link_open","options","env","self","config","link","i","attrIndex","matcher","findFirstMatchingConfig","attributes","keys","attr","attrPush","applyAttributes","renderToken","module","exports"],"mappings":"mHAAA,S,8FCAA,I,0BCAyO,ECCzO,CACA,OACA,OACA,YACA,YAEA,aACA,YACA,YAEA,aACA,YACA,YAGA,YACA,YACA,kB,uzBCXA,OACA,wBCDgB,YACd,GCRW,WAAkB,IAAIA,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,uBAAuB,CAACF,EAAG,MAAM,CAACA,EAAG,KAAK,CAACF,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,UAAUP,EAAIK,GAAG,KAAKH,EAAG,IAAI,CAACE,YAAY,oCAAoC,CAACJ,EAAIK,GAAG,WAAWL,EAAIM,GAAGN,EAAIQ,aAAa,cAAcR,EAAIK,GAAG,KAAKH,EAAG,MAAM,CAACA,EAAG,cAAc,CAACO,MAAM,CAAC,QAAU,SAAS,KAAOT,EAAIU,YAAYC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOZ,EAAIa,MAAM,YAAY,CAACb,EAAIK,GAAG,WAAWL,EAAIM,GAAGN,EAAIc,aAAa,aAAa,OAEld,IDSpB,EACA,KACA,KACA,M,SDLF,MAFA,WAKA,OACA,UAHA,wBAIA,cAHA,8BAMA,gBACA,sBACA,iCACA,iCAHA,IAKA,eALA,WAMA,4CAEA,iBARA,WASA,kDAEA,gBAXA,WAYA,uBAEA,SAdA,WAeA,4CAEA,mBAjBA,WAkBA,uDAGA,QA/BA,WAgCA,4BAEA,SACA,oBADA,WACA,I,EAAA,c,EAAA,sHACA,mBACA,2CAFA,0C,kLAKA,qBANA,WAOA,2CAEA,mBATA,WAUA,kBACA,6BGpD6N,ICQzN,G,QAAY,YACd,GPTW,WAAkB,IAAId,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,8CAA8C,CAAEJ,EAAIe,QAAsB,eAAEb,EAAG,sBAAwBF,EAAIgB,gBAAkGd,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACF,EAAG,KAAK,CAACF,EAAIK,GAAGL,EAAIM,GAAGN,EAAIiB,GAAG,2CAA2CjB,EAAIK,GAAG,KAAKH,EAAG,MAAM,CAACgB,WAAW,CAAC,CAACC,KAAK,iBAAiBC,QAAQ,mBAAmBC,MAC1gBrB,EAAIsB,cACFtB,EAAIiB,GAAG,0CAA2C,CAChDM,KAAMvB,EAAIwB,SACVC,SAAUzB,EAAI0B,sBAGlBC,WAAW,mNAAmN3B,EAAIK,GAAG,KAAKH,EAAG,cAAc,CAACO,MAAM,CAAC,MAAQT,EAAIiB,GAAG,8CAA8C,YAAcjB,EAAIiB,GAAG,oDAAoD,eAAejB,EAAIiB,GAAG,oDAAoDN,GAAG,CAAC,MAAQX,EAAI4B,wBAAwB5B,EAAIK,GAAG,KAAKH,EAAG,cAAc,CAACO,MAAM,CAAC,MAAQT,EAAIiB,GAAG,uCAAuC,YAAcjB,EAAIiB,GAAG,6CAA6C,eAAejB,EAAIiB,GAAG,4CAA4C,cAAc,iBAAiBN,GAAG,CAAC,MAAQX,EAAI6B,uBAAuB,GAPrlB3B,EAAG,MAAM,CAACA,EAAG,IAAI,CAACF,EAAIK,GAAGL,EAAIM,GAAGN,EAAIiB,GAAG,2CAOkjB,KAExxB,IOGpB,EACA,KACA,KACA,OAIa,Y,sKClBTa,G,OAAsB,0C,oQCE5B,IASMC,EAAqB,SAAAC,GACzBA,EAAWC,SAASC,SAAQ,SAAAC,GACD,UAArBA,EAAYC,MAXG,SAAAD,GACrB,IAAME,EAASF,EAAYG,QAAQ,OACnC,GAAKD,EAAL,CACA,IACME,EADM,IAAIC,IAAIH,GACDI,aAAaC,IAAI,mBAC/BH,GACLJ,EAAYQ,QAAQ,QAApB,kBAAwCJ,EAAxC,OAMIK,CAAeT,OAiBfU,EAAKC,EAAQ,IAARA,CAAuB,CAChCC,MAAM,EACNC,UAAU,EACVC,QAAQ,EACRC,WAAY,YACZC,SAAS,EACTC,aAAa,EACbC,OAAQ,2BACRC,WAAY,KAEXC,KDuBY,SAAuBV,GACpCA,EAAGW,SAASC,MAAMC,QALS,SAACC,EAAQC,GACpC,MAAM,0CAAN,OAAiDD,EAAOC,GAAKC,QAA7D,YAKAhB,EAAGiB,OAAOC,MAAMC,OAAO,OAAQ,WAhEA,SAACC,EAAOC,GACvC,IAAIC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAAO,GACPC,EAAMT,EAAMU,OAEhB,OAAwC,KAApCV,EAAMW,IAAIC,WAAWZ,EAAMK,OAI/BD,EAAaJ,EAAMK,IAAM,KACzBF,EAAWH,EAAMpB,GAAGiC,QAAQC,eAAed,EAAOA,EAAMK,KAAK,IAG9C,KAIfH,EAAQF,EAAMW,IAAII,MAAMX,EAAYD,IACpCE,EAAMF,EAAW,GAEPM,GAAqC,KAA9BT,EAAMW,IAAIC,WAAWP,KACpCA,GAAO,GACPC,EAAMN,EAAMpB,GAAGiC,QAAQG,qBAAqBhB,EAAMW,IAAKN,EAAKL,EAAMU,SAC1DO,KACNT,EAAOR,EAAMpB,GAAGsC,cAAcZ,EAAIa,KAC9BnB,EAAMpB,GAAGwC,aAAaZ,GACxBH,EAAMC,EAAID,IAEVG,EAAO,IAGXH,GAAO,KAGJG,EAAKa,MAAM,IAAIC,OAAOzD,MAItBoC,IACHD,EAAMK,IAAMD,EACZJ,EAAMU,OAASP,GAEfI,EAAQP,EAAMuB,KAAK,UAAW,KACxBf,KAAOA,EACbD,EAAMX,QAAUM,GAGlBF,EAAMK,IAAMA,EACZL,EAAMU,OAASD,GAER,WCfNnB,KAvBsB,SAAAV,GAGvBA,EAAG4C,KAAK1B,MAAM2B,MAAM,SAAU,oBAAoB,SAAAzB,GAChDA,EAAMN,OAAOzB,SAAQ,SAAAF,GACK,WAApBA,EAAWI,MACbL,EAAmBC,YAkBxBuB,IAAIoC,IAAM,CACTlF,MAAO,CACLmF,MAAO,OACPC,IAAK,+BACLC,OAAQ,YAIRC,EAAyB,2BAEzBC,EAAqB,gBAGrBC,E,WACJ,WAAYC,GAAoD,IAA3CC,EAA0C,wDAAxBC,EAAwB,kEAC7DnG,KAAKiG,QAAUA,GAAW,GAC1BjG,KAAKmG,eAAiBA,EACtBnG,KAAKkG,SAAWA,E,oDAGlB,WACE,IAAIE,EAAiBpG,KAAKiG,QAW1B,OAVIjG,KAAKkG,WAAalG,KAAKmG,iBAKzBC,GAJAA,EAAiBA,EAAeC,QAC9BP,EAf6B,mCAkBCO,QAC9BN,EAjByB,4CAqBtBnD,EAAG0D,OAAOF,K,4BAGnB,WACE,OAAOpG,KAAKqB,kB,qBAGd,WAKE,OAJwB,IAAIkF,WAAYC,gBACtCxG,KAAKyG,iBACL,aAEqBC,KAAKC,aAAe,Q,gCAIhCX,ICrFFY,EAAsB,WASjC,IAgBMC,EAAe,SAACZ,EAASC,GAE7B,OADyB,IAAIF,EAAiBC,EAASC,GAC/BY,WAyC1B,MAAO,CACLzF,cA5DoB,SAAC4E,EAASC,EAAUC,GAMxC,OALyB,IAAIH,EAC3BC,EACAC,EACAC,GAEsBM,kBAuDxBI,eACAE,gBAnCsB,WAAuB,IAAtBxG,EAAqB,uDAAP,GACrC,OAAIA,EAAYyG,OAAS,IAChBzG,EAGH,GAAN,OAAUA,EAAYwE,MAAM,EAAG,IAA/B,QA+BAkC,iBApBuB,WAInB,IAHJrD,EAGG,uDAHO,GACVsD,EAEG,uDAFU,GACbC,EACG,uDADc,GAEXC,EAAmBP,EAAajD,GAGhCyD,EAAoBH,EAAWb,QAAQ,sBAAuB,QAEpE,OAAOe,EAAiBf,QACtB,IAAIf,OAAJ,WAAe+B,EAAf,KAAqC,MADhC,uBAEWF,EAFX,oB,iCCrBX,SAASG,EAAyB1E,EAAI2E,GAIlCA,EAHGA,EAGOC,MAAMC,QAAQF,GAAWA,EAAU,CAACA,GAFpC,GAKZG,OAAOC,OAAOJ,GACd,IAAIK,EAAgBhF,EAAGW,SAASC,MAAMqE,WAAa7H,KAAK4H,cAExDhF,EAAGW,SAASC,MAAMqE,UAAY,SAAUnE,EAAQC,EAAKmE,EAASC,EAAKC,GACjE,IAAIC,EAzDR,SAAiCC,EAAMX,GACrC,IAAIY,EAAGF,EACHzD,EAAO0D,EAAK1H,MAAM0H,EAAKE,UAAU,SAAS,GAE9C,IAAKD,EAAI,EAAGA,EAAIZ,EAAQP,SAAUmB,EAAG,CAMnC,GAA8B,oBAL9BF,EAASV,EAAQY,IAKCE,QAQlB,OAAOJ,EAPL,GAAIA,EAAOI,QAAQ7D,EAAMyD,GACvB,OAAOA,GA6CEK,CAAwB5E,EAAOC,GAAM4D,GAC9CgB,EAAaN,GAAUA,EAAOzH,MAOlC,OALI+H,GAtCR,SAAyB5E,EAAKD,EAAQ6E,GACpCb,OAAOc,KAAKD,GAAYtG,SAAQ,SAAUwG,GACxC,IAAIL,EACAhH,EAAQmH,EAAWE,GAEV,cAATA,IAIFA,EAAO,UAGTL,EAAY1E,EAAOC,GAAKyE,UAAUK,IAElB,EAEd/E,EAAOC,GAAK+E,SAAS,CAACD,EAAMrH,IAG5BsC,EAAOC,GAAKnD,MAAM4H,GAAW,GAAKhH,KAoBlCuH,CAAgBhF,EAAKD,EAAQ6E,GAIxBX,EAAclE,EAAQC,EAAKmE,EAASC,EAAKC,IAIpDV,EAAyBM,cAAgB,SAAUlE,EAAQC,EAAKmE,EAASC,EAAKC,GAC5E,OAAOA,EAAKY,YAAYlF,EAAQC,EAAKmE,IAGvCe,EAAOC,QAAUxB","file":"js/74-c0264a78a92e15bea008.chunk.js","sourcesContent":["export * from \"-!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&id=0cf154e8&prod&lang=scss&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"flex-1 p-6 overflow-auto dark:bg-slate-900\"},[(_vm.uiFlags.isFetchingItem)?_c('woot-loading-state'):(!_vm.hasABillingPlan)?_c('div',[_c('p',[_vm._v(_vm._s(_vm.$t('BILLING_SETTINGS.NO_BILLING_USER')))])]):_c('div',{staticClass:\"w-full\"},[_c('div',{staticClass:\"current-plan--details\"},[_c('h6',[_vm._v(_vm._s(_vm.$t('BILLING_SETTINGS.CURRENT_PLAN.TITLE')))]),_vm._v(\" \"),_c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(\n          _vm.formatMessage(\n            _vm.$t('BILLING_SETTINGS.CURRENT_PLAN.PLAN_NOTE', {\n              plan: _vm.planName,\n              quantity: _vm.subscribedQuantity,\n            })\n          )\n        ),expression:\"\\n          formatMessage(\\n            $t('BILLING_SETTINGS.CURRENT_PLAN.PLAN_NOTE', {\\n              plan: planName,\\n              quantity: subscribedQuantity,\\n            })\\n          )\\n        \"}]})]),_vm._v(\" \"),_c('BillingItem',{attrs:{\"title\":_vm.$t('BILLING_SETTINGS.MANAGE_SUBSCRIPTION.TITLE'),\"description\":_vm.$t('BILLING_SETTINGS.MANAGE_SUBSCRIPTION.DESCRIPTION'),\"button-label\":_vm.$t('BILLING_SETTINGS.MANAGE_SUBSCRIPTION.BUTTON_TXT')},on:{\"click\":_vm.onClickBillingPortal}}),_vm._v(\" \"),_c('BillingItem',{attrs:{\"title\":_vm.$t('BILLING_SETTINGS.CHAT_WITH_US.TITLE'),\"description\":_vm.$t('BILLING_SETTINGS.CHAT_WITH_US.DESCRIPTION'),\"button-label\":_vm.$t('BILLING_SETTINGS.CHAT_WITH_US.BUTTON_TXT'),\"button-icon\":\"chat-multiple\"},on:{\"click\":_vm.onToggleChatWindow}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BillingItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BillingItem.vue?vue&type=script&lang=js&\"","<script>\nexport default {\n  props: {\n    title: {\n      type: String,\n      default: '',\n    },\n    description: {\n      type: String,\n      default: '',\n    },\n    buttonLabel: {\n      type: String,\n      default: '',\n    },\n\n    buttonIcon: {\n      type: String,\n      default: 'edit',\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"manage-subscription\">\n    <div>\n      <h6>{{ title }}</h6>\n      <p class=\"manage-subscription--description\">\n        {{ description }}\n      </p>\n    </div>\n    <div>\n      <woot-button variant=\"smooth\" :icon=\"buttonIcon\" @click=\"$emit('click')\">\n        {{ buttonLabel }}\n      </woot-button>\n    </div>\n  </div>\n</template>\n","<script>\nimport { useMessageFormatter } from 'shared/composables/useMessageFormatter';\n\nimport { mapGetters } from 'vuex';\nimport { useAccount } from 'dashboard/composables/useAccount';\nimport BillingItem from './components/BillingItem.vue';\n\nexport default {\n  components: { BillingItem },\n  setup() {\n    const { accountId } = useAccount();\n    const { formatMessage } = useMessageFormatter();\n    return {\n      accountId,\n      formatMessage,\n    };\n  },\n  computed: {\n    ...mapGetters({\n      getAccount: 'accounts/getAccount',\n      uiFlags: 'accounts/getUIFlags',\n    }),\n    currentAccount() {\n      return this.getAccount(this.accountId) || {};\n    },\n    customAttributes() {\n      return this.currentAccount.custom_attributes || {};\n    },\n    hasABillingPlan() {\n      return !!this.planName;\n    },\n    planName() {\n      return this.customAttributes.plan_name || '';\n    },\n    subscribedQuantity() {\n      return this.customAttributes.subscribed_quantity || 0;\n    },\n  },\n  mounted() {\n    this.fetchAccountDetails();\n  },\n  methods: {\n    async fetchAccountDetails() {\n      if (!this.hasABillingPlan) {\n        this.$store.dispatch('accounts/subscription');\n      }\n    },\n    onClickBillingPortal() {\n      this.$store.dispatch('accounts/checkout');\n    },\n    onToggleChatWindow() {\n      if (window.$chatwoot) {\n        window.$chatwoot.toggle();\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"flex-1 p-6 overflow-auto dark:bg-slate-900\">\n    <woot-loading-state v-if=\"uiFlags.isFetchingItem\" />\n    <div v-else-if=\"!hasABillingPlan\">\n      <p>{{ $t('BILLING_SETTINGS.NO_BILLING_USER') }}</p>\n    </div>\n    <div v-else class=\"w-full\">\n      <div class=\"current-plan--details\">\n        <h6>{{ $t('BILLING_SETTINGS.CURRENT_PLAN.TITLE') }}</h6>\n        <div\n          v-dompurify-html=\"\n            formatMessage(\n              $t('BILLING_SETTINGS.CURRENT_PLAN.PLAN_NOTE', {\n                plan: planName,\n                quantity: subscribedQuantity,\n              })\n            )\n          \"\n        />\n      </div>\n      <BillingItem\n        :title=\"$t('BILLING_SETTINGS.MANAGE_SUBSCRIPTION.TITLE')\"\n        :description=\"$t('BILLING_SETTINGS.MANAGE_SUBSCRIPTION.DESCRIPTION')\"\n        :button-label=\"$t('BILLING_SETTINGS.MANAGE_SUBSCRIPTION.BUTTON_TXT')\"\n        @click=\"onClickBillingPortal\"\n      />\n      <BillingItem\n        :title=\"$t('BILLING_SETTINGS.CHAT_WITH_US.TITLE')\"\n        :description=\"$t('BILLING_SETTINGS.CHAT_WITH_US.DESCRIPTION')\"\n        :button-label=\"$t('BILLING_SETTINGS.CHAT_WITH_US.BUTTON_TXT')\"\n        button-icon=\"chat-multiple\"\n        @click=\"onToggleChatWindow\"\n      />\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\">\n.manage-subscription {\n  @apply bg-white dark:bg-slate-800 flex justify-between mb-2 py-6 px-4 items-center rounded-md border border-solid border-slate-75 dark:border-slate-700;\n}\n\n.current-plan--details {\n  @apply border-b border-solid border-slate-75 dark:border-slate-800 mb-4 pb-4;\n\n  h6 {\n    @apply text-slate-800 dark:text-slate-100;\n  }\n\n  p {\n    @apply text-slate-600 dark:text-slate-200;\n  }\n}\n\n.manage-subscription {\n  .manage-subscription--description {\n    @apply mb-0 text-slate-600 dark:text-slate-200;\n  }\n\n  h6 {\n    @apply text-slate-800 dark:text-slate-100;\n  }\n}\n</style>\n","import { render, staticRenderFns } from \"./BillingItem.vue?vue&type=template&id=d52b096e&\"\nimport script from \"./BillingItem.vue?vue&type=script&lang=js&\"\nexport * from \"./BillingItem.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"manage-subscription\"},[_c('div',[_c('h6',[_vm._v(_vm._s(_vm.title))]),_vm._v(\" \"),_c('p',{staticClass:\"manage-subscription--description\"},[_vm._v(\"\\n      \"+_vm._s(_vm.description)+\"\\n    \")])]),_vm._v(\" \"),_c('div',[_c('woot-button',{attrs:{\"variant\":\"smooth\",\"icon\":_vm.buttonIcon},on:{\"click\":function($event){return _vm.$emit('click')}}},[_vm._v(\"\\n      \"+_vm._s(_vm.buttonLabel)+\"\\n    \")])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=0cf154e8&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=0cf154e8&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Process [@mention](mention://user/1/Pranav)\nconst USER_MENTIONS_REGEX = /mention:\\/\\/(user|team)\\/(\\d+)\\/(.+)/gm;\n\nconst buildMentionTokens = () => (state, silent) => {\n  var label;\n  var labelEnd;\n  var labelStart;\n  var pos;\n  var res;\n  var token;\n  var href = '';\n  var max = state.posMax;\n\n  if (state.src.charCodeAt(state.pos) !== 0x5b /* [ */) {\n    return false;\n  }\n\n  labelStart = state.pos + 1;\n  labelEnd = state.md.helpers.parseLinkLabel(state, state.pos, true);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) {\n    return false;\n  }\n\n  label = state.src.slice(labelStart, labelEnd);\n  pos = labelEnd + 1;\n\n  if (pos < max && state.src.charCodeAt(pos) === 0x28 /* ( */) {\n    pos += 1;\n    res = state.md.helpers.parseLinkDestination(state.src, pos, state.posMax);\n    if (res.ok) {\n      href = state.md.normalizeLink(res.str);\n      if (state.md.validateLink(href)) {\n        pos = res.pos;\n      } else {\n        href = '';\n      }\n    }\n    pos += 1;\n  }\n\n  if (!href.match(new RegExp(USER_MENTIONS_REGEX))) {\n    return false;\n  }\n\n  if (!silent) {\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    token = state.push('mention', '');\n    token.href = href;\n    token.content = label;\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n\n  return true;\n};\n\nconst renderMentions = () => (tokens, idx) => {\n  return `<span class=\"prosemirror-mention-node\">${tokens[idx].content}</span>`;\n};\n\nexport default function mentionPlugin(md) {\n  md.renderer.rules.mention = renderMentions(md);\n  md.inline.ruler.before('link', 'mention', buildMentionTokens(md));\n}\n","import mila from 'markdown-it-link-attributes';\nimport mentionPlugin from './markdownIt/link';\n\nconst setImageHeight = inlineToken => {\n  const imgSrc = inlineToken.attrGet('src');\n  if (!imgSrc) return;\n  const url = new URL(imgSrc);\n  const height = url.searchParams.get('cw_image_height');\n  if (!height) return;\n  inlineToken.attrSet('style', `height: ${height};`);\n};\n\nconst processInlineToken = blockToken => {\n  blockToken.children.forEach(inlineToken => {\n    if (inlineToken.type === 'image') {\n      setImageHeight(inlineToken);\n    }\n  });\n};\n\nconst imgResizeManager = md => {\n  // Custom rule for image resize in markdown\n  // If the image url has a query param cw_image_height, then add a style attribute to the image\n  md.core.ruler.after('inline', 'add-image-height', state => {\n    state.tokens.forEach(blockToken => {\n      if (blockToken.type === 'inline') {\n        processInlineToken(blockToken);\n      }\n    });\n  });\n};\n\nconst md = require('markdown-it')({\n  html: false,\n  xhtmlOut: true,\n  breaks: true,\n  langPrefix: 'language-',\n  linkify: true,\n  typographer: true,\n  quotes: '\\u201c\\u201d\\u2018\\u2019',\n  maxNesting: 20,\n})\n  .use(mentionPlugin)\n  .use(imgResizeManager)\n  .use(mila, {\n    attrs: {\n      class: 'link',\n      rel: 'noreferrer noopener nofollow',\n      target: '_blank',\n    },\n  });\n\nconst TWITTER_USERNAME_REGEX = /(^|[^@\\w])@(\\w{1,15})\\b/g;\nconst TWITTER_USERNAME_REPLACEMENT = '$1[@$2](http://twitter.com/$2)';\nconst TWITTER_HASH_REGEX = /(^|\\s)#(\\w+)/g;\nconst TWITTER_HASH_REPLACEMENT = '$1[#$2](https://twitter.com/hashtag/$2)';\n\nclass MessageFormatter {\n  constructor(message, isATweet = false, isAPrivateNote = false) {\n    this.message = message || '';\n    this.isAPrivateNote = isAPrivateNote;\n    this.isATweet = isATweet;\n  }\n\n  formatMessage() {\n    let updatedMessage = this.message;\n    if (this.isATweet && !this.isAPrivateNote) {\n      updatedMessage = updatedMessage.replace(\n        TWITTER_USERNAME_REGEX,\n        TWITTER_USERNAME_REPLACEMENT\n      );\n      updatedMessage = updatedMessage.replace(\n        TWITTER_HASH_REGEX,\n        TWITTER_HASH_REPLACEMENT\n      );\n    }\n    return md.render(updatedMessage);\n  }\n\n  get formattedMessage() {\n    return this.formatMessage();\n  }\n\n  get plainText() {\n    const strippedOutHtml = new DOMParser().parseFromString(\n      this.formattedMessage,\n      'text/html'\n    );\n    return strippedOutHtml.body.textContent || '';\n  }\n}\n\nexport default MessageFormatter;\n","import MessageFormatter from '../helpers/MessageFormatter';\n\n/**\n * A composable providing utility functions for message formatting.\n *\n * @returns {Object} A set of functions for message formatting.\n */\nexport const useMessageFormatter = () => {\n  /**\n   * Formats a message based on specified conditions.\n   *\n   * @param {string} message - The message to be formatted.\n   * @param {boolean} isATweet - Whether the message is a tweet.\n   * @param {boolean} isAPrivateNote - Whether the message is a private note.\n   * @returns {string} - The formatted message.\n   */\n  const formatMessage = (message, isATweet, isAPrivateNote) => {\n    const messageFormatter = new MessageFormatter(\n      message,\n      isATweet,\n      isAPrivateNote\n    );\n    return messageFormatter.formattedMessage;\n  };\n\n  /**\n   * Converts a message to plain text.\n   *\n   * @param {string} message - The message to be converted.\n   * @param {boolean} isATweet - Whether the message is a tweet.\n   * @returns {string} - The plain text message.\n   */\n  const getPlainText = (message, isATweet) => {\n    const messageFormatter = new MessageFormatter(message, isATweet);\n    return messageFormatter.plainText;\n  };\n\n  /**\n   * Truncates a description to a maximum length of 100 characters.\n   *\n   * @param {string} [description=''] - The description to be truncated.\n   * @returns {string} - The truncated description.\n   */\n  const truncateMessage = (description = '') => {\n    if (description.length < 100) {\n      return description;\n    }\n\n    return `${description.slice(0, 97)}...`;\n  };\n\n  /**\n   * Highlights occurrences of a search term within given content.\n   *\n   * @param {string} [content=''] - The content in which to search.\n   * @param {string} [searchTerm=''] - The term to search for.\n   * @param {string} [highlightClass=''] - The CSS class to apply to the highlighted term.\n   * @returns {string} - The content with highlighted terms.\n   */\n  const highlightContent = (\n    content = '',\n    searchTerm = '',\n    highlightClass = ''\n  ) => {\n    const plainTextContent = getPlainText(content);\n\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#escaping\n    const escapedSearchTerm = searchTerm.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n\n    return plainTextContent.replace(\n      new RegExp(`(${escapedSearchTerm})`, 'ig'),\n      `<span class=\"${highlightClass}\">$1</span>`\n    );\n  };\n\n  return {\n    formatMessage,\n    getPlainText,\n    truncateMessage,\n    highlightContent,\n  };\n};\n","\"use strict\"; // Adapted from https://github.com/markdown-it/markdown-it/blob/fbc6b0fed563ba7c00557ab638fd19752f8e759d/docs/architecture.md\n\nfunction findFirstMatchingConfig(link, configs) {\n  var i, config;\n  var href = link.attrs[link.attrIndex(\"href\")][1];\n\n  for (i = 0; i < configs.length; ++i) {\n    config = configs[i]; // If there is a matcher function defined then call it\n    // Matcher Function should return a boolean indicating\n    // whether or not it matched. If it matched, use that\n    // configuration, otherwise, try the next one.\n\n    if (typeof config.matcher === \"function\") {\n      if (config.matcher(href, config)) {\n        return config;\n      } else {\n        continue;\n      }\n    }\n\n    return config;\n  }\n}\n\nfunction applyAttributes(idx, tokens, attributes) {\n  Object.keys(attributes).forEach(function (attr) {\n    var attrIndex;\n    var value = attributes[attr];\n\n    if (attr === \"className\") {\n      // when dealing with applying classes\n      // programatically, some programmers\n      // may prefer to use the className syntax\n      attr = \"class\";\n    }\n\n    attrIndex = tokens[idx].attrIndex(attr);\n\n    if (attrIndex < 0) {\n      // attr doesn't exist, add new attribute\n      tokens[idx].attrPush([attr, value]);\n    } else {\n      // attr already exists, overwrite it\n      tokens[idx].attrs[attrIndex][1] = value; // replace value of existing attr\n    }\n  });\n}\n\nfunction markdownitLinkAttributes(md, configs) {\n  if (!configs) {\n    configs = [];\n  } else {\n    configs = Array.isArray(configs) ? configs : [configs];\n  }\n\n  Object.freeze(configs);\n  var defaultRender = md.renderer.rules.link_open || this.defaultRender;\n\n  md.renderer.rules.link_open = function (tokens, idx, options, env, self) {\n    var config = findFirstMatchingConfig(tokens[idx], configs);\n    var attributes = config && config.attrs;\n\n    if (attributes) {\n      applyAttributes(idx, tokens, attributes);\n    } // pass token to default renderer.\n\n\n    return defaultRender(tokens, idx, options, env, self);\n  };\n}\n\nmarkdownitLinkAttributes.defaultRender = function (tokens, idx, options, env, self) {\n  return self.renderToken(tokens, idx, options);\n};\n\nmodule.exports = markdownitLinkAttributes;"],"sourceRoot":""}