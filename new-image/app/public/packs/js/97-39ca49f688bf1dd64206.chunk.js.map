{"version":3,"sources":["webpack:///./app/javascript/superadmin_pages/views/playground/Index.vue?2960","webpack:///./app/javascript/superadmin_pages/components/playground/Header.vue?6265","webpack:///./app/javascript/superadmin_pages/components/playground/Header.vue","webpack:///./app/javascript/superadmin_pages/components/playground/Header.vue?eafc","webpack:///./app/javascript/superadmin_pages/components/playground/UserMessage.vue?cdd0","webpack:///./app/javascript/superadmin_pages/components/playground/UserMessage.vue","webpack:///./app/javascript/superadmin_pages/components/playground/UserMessage.vue?8dec","webpack:///./app/javascript/superadmin_pages/components/playground/BotMessage.vue?8cbb","webpack:///./app/javascript/superadmin_pages/components/playground/BotMessage.vue","webpack:///./app/javascript/superadmin_pages/components/playground/BotMessage.vue?cc36","webpack:///./app/javascript/superadmin_pages/components/playground/TypingIndicator.vue?b0d5","webpack:///app/javascript/superadmin_pages/views/playground/Index.vue","webpack:///./app/javascript/superadmin_pages/components/playground/TypingIndicator.vue","webpack:///./app/javascript/superadmin_pages/components/playground/TypingIndicator.vue?6432","webpack:///./app/javascript/superadmin_pages/views/playground/Index.vue?18c9","webpack:///./app/javascript/superadmin_pages/views/playground/Index.vue","webpack:///./app/javascript/superadmin_pages/components/playground/assets/typing.gif","webpack:///./app/javascript/shared/helpers/markdownIt/link.js","webpack:///./app/javascript/shared/helpers/MessageFormatter.js","webpack:///./app/javascript/shared/composables/useMessageFormatter.js"],"names":["_vm","this","_c","_self","_setupProxy","staticClass","attrs","responseSourcePath","_v","_s","responseSourceName","directives","name","rawName","value","expression","TypingIndicator","componentData","_l","message","key","id","type","formatMessage","content","_e","ref","domProps","on","$event","indexOf","_k","keyCode","metaKey","onMessageSend","apply","arguments","ctrlKey","target","composing","messageContent","module","exports","USER_MENTIONS_REGEX","processInlineToken","blockToken","children","forEach","inlineToken","imgSrc","attrGet","height","URL","searchParams","get","attrSet","setImageHeight","md","require","html","xhtmlOut","breaks","langPrefix","linkify","typographer","quotes","maxNesting","use","renderer","rules","mention","tokens","idx","inline","ruler","before","state","silent","label","labelEnd","labelStart","pos","res","token","href","max","posMax","src","charCodeAt","helpers","parseLinkLabel","slice","parseLinkDestination","ok","normalizeLink","str","validateLink","match","RegExp","push","core","after","mila","class","rel","TWITTER_USERNAME_REGEX","TWITTER_HASH_REGEX","MessageFormatter","isATweet","isAPrivateNote","updatedMessage","replace","render","DOMParser","parseFromString","formattedMessage","body","textContent","useMessageFormatter","getPlainText","plainText","truncateMessage","description","length","highlightContent","searchTerm","highlightClass","plainTextContent","escapedSearchTerm"],"mappings":"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","file":"js/97-39ca49f688bf1dd64206.chunk.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"flex flex-col w-full h-full bg-slate-25\"},[_c('PlaygroundHeader',{attrs:{\"response-source-name\":_vm.componentData.responseSourceName,\"response-source-path\":_vm.componentData.responseSourcePath}}),_vm._v(\" \"),_c('div',{staticClass:\"flex-1 px-8 py-4 overflow-auto\"},[_vm._l((_vm.messages),function(message){return _c('div',{key:message.id,attrs:{\"id\":`message-${message.id}`}},[(message.type === 'User')?_c('UserMessage',{attrs:{\"message\":_vm.formatMessage(message.content)}}):_c('BotMessage',{attrs:{\"message\":_vm.formatMessage(message.content)}})],1)}),_vm._v(\" \"),(_vm.isWaiting)?_c('TypingIndicator'):_vm._e()],2),_vm._v(\" \"),_c('div',{staticClass:\"w-full px-8 py-6\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.messageContent),expression:\"messageContent\"}],ref:\"messageInput\",staticClass:\"resize-none block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border !outline-2 border-slate-100 focus:ring-woot-500 focus:border-woot-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-woot-500 dark:focus:border-woot-500\",attrs:{\"rows\":4,\"placeholder\":\"Type a message... [CMD/CTRL + Enter to send]\",\"autofocus\":\"\",\"autocomplete\":\"off\"},domProps:{\"value\":(_vm.messageContent)},on:{\"keydown\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;if(!$event.metaKey)return null;return _vm.onMessageSend.apply(null, arguments)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;if(!$event.ctrlKey)return null;return _vm.onMessageSend.apply(null, arguments)}],\"input\":function($event){if($event.target.composing)return;_vm.messageContent=$event.target.value}}})])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./Header.vue?vue&type=template&id=5dd6d384&\"\nimport script from \"./Header.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./Header.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('header',{staticClass:\"flex items-center px-8 py-4 bg-white border-b border-slate-100\",attrs:{\"role\":\"banner\"}},[_c('a',{staticClass:\"text-woot-500 hover:underline mr-4\",attrs:{\"href\":_vm.responseSourcePath}},[_vm._v(\"\\n    \"+_vm._s('Back')+\"\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"border border-solid border-slate-100 text-slate-700 mr-4 p-2 rounded-full\"},[_c('svg',{attrs:{\"width\":\"24\",\"height\":\"24\"}},[_c('use',{attrs:{\"xlink:href\":\"#icon-mist-fill\"}})])]),_vm._v(\" \"),_c('div',{staticClass:\"flex flex-col h-14 justify-center\"},[_c('h1',{staticClass:\"text-base font-medium text-slate-900\",attrs:{\"id\":\"page-title\"}},[_vm._v(\"\\n      \"+_vm._s('Robin AI playground')+\"\\n    \")]),_vm._v(\" \"),_c('p',{staticClass:\"text-sm text-slate-600\"},[_vm._v(\"\\n      \"+_vm._s('Chat with the source')+\"\\n      \"),_c('span',{staticClass:\"font-medium\"},[_vm._v(\"\\n        \"+_vm._s(_vm.responseSourceName)+\"\\n      \")]),_vm._v(\"\\n      \"+_vm._s('and evaluate it’s efficiency.')+\"\\n    \")])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMessage.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMessage.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./UserMessage.vue?vue&type=template&id=8cd00670&\"\nimport script from \"./UserMessage.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./UserMessage.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"w-full mb-4 flex items-center justify-end\"},[_c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.message),expression:\"message\"}],staticClass:\"px-4 py-3 bg-woot-400 text-white text-sm rounded-md inline-block\"})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BotMessage.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BotMessage.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./BotMessage.vue?vue&type=template&id=92255130&\"\nimport script from \"./BotMessage.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./BotMessage.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"w-full mb-4 flex items-center justify-start\"},[_c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.message),expression:\"message\"}],staticClass:\"px-4 py-3 bg-white max-w-4xl text-slate-700 leading-6 text-sm rounded-md inline-block border border-slate-100\"})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypingIndicator.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypingIndicator.vue?vue&type=script&setup=true&lang=js&\"","<script>\nimport { useMessageFormatter } from 'shared/composables/useMessageFormatter';\nimport PlaygroundHeader from '../../components/playground/Header.vue';\nimport UserMessage from '../../components/playground/UserMessage.vue';\nimport BotMessage from '../../components/playground/BotMessage.vue';\nimport TypingIndicator from '../../components/playground/TypingIndicator.vue';\n\nexport default {\n  components: {\n    PlaygroundHeader,\n    UserMessage,\n    BotMessage,\n    TypingIndicator,\n  },\n  props: {\n    componentData: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n  setup() {\n    const { formatMessage } = useMessageFormatter();\n    return {\n      formatMessage,\n    };\n  },\n  data() {\n    return { messages: [], messageContent: '', isWaiting: false };\n  },\n  computed: {\n    previousMessages() {\n      return this.messages.map(message => ({\n        type: message.type,\n        message: message.content,\n      }));\n    },\n  },\n  mounted() {\n    this.focusInput();\n  },\n  methods: {\n    focusInput() {\n      this.$refs.messageInput.focus();\n    },\n    onMessageSend() {\n      this.addMessageToData('User', this.messageContent);\n      this.sendMessageToServer(this.messageContent);\n    },\n    scrollToLastMessage() {\n      this.$nextTick(() => {\n        const messageId = this.messages[this.messages.length - 1].id;\n        const messageElement = document.getElementById(`message-${messageId}`);\n        messageElement.scrollIntoView({ behavior: 'smooth' });\n      });\n    },\n    addMessageToData(type, content) {\n      this.messages.push({ id: this.messages.length, type, content });\n      this.scrollToLastMessage();\n    },\n    async sendMessageToServer(messageContent) {\n      this.messageContent = '';\n      this.isWaiting = true;\n      const csrfToken = document\n        .querySelector('meta[name=\"csrf-token\"]')\n        .getAttribute('content');\n\n      try {\n        const response = await fetch(window.location.href, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'X-CSRF-Token': csrfToken,\n          },\n          body: JSON.stringify({\n            message: messageContent,\n            previous_messages: this.previousMessages,\n          }),\n          credentials: 'include',\n        });\n\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const { message } = await response.json();\n        this.addMessageToData('Bot', message);\n      } catch (error) {\n        this.addMessageToData(\n          'bot',\n          'Error: Could not retrieve response. Please check the console for more details.'\n        );\n      } finally {\n        this.isWaiting = false;\n        this.focusInput();\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <section class=\"flex flex-col w-full h-full bg-slate-25\">\n    <PlaygroundHeader\n      :response-source-name=\"componentData.responseSourceName\"\n      :response-source-path=\"componentData.responseSourcePath\"\n    />\n    <div class=\"flex-1 px-8 py-4 overflow-auto\">\n      <div\n        v-for=\"message in messages\"\n        :id=\"`message-${message.id}`\"\n        :key=\"message.id\"\n      >\n        <UserMessage\n          v-if=\"message.type === 'User'\"\n          :message=\"formatMessage(message.content)\"\n        />\n        <BotMessage v-else :message=\"formatMessage(message.content)\" />\n      </div>\n      <TypingIndicator v-if=\"isWaiting\" />\n    </div>\n    <div class=\"w-full px-8 py-6\">\n      <textarea\n        ref=\"messageInput\"\n        v-model=\"messageContent\"\n        :rows=\"4\"\n        class=\"resize-none block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border !outline-2 border-slate-100 focus:ring-woot-500 focus:border-woot-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-woot-500 dark:focus:border-woot-500\"\n        placeholder=\"Type a message... [CMD/CTRL + Enter to send]\"\n        autofocus\n        autocomplete=\"off\"\n        @keydown.meta.enter=\"onMessageSend\"\n        @keydown.ctrl.enter=\"onMessageSend\"\n      />\n    </div>\n  </section>\n</template>\n","import { render, staticRenderFns } from \"./TypingIndicator.vue?vue&type=template&id=278d0699&\"\nimport script from \"./TypingIndicator.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./TypingIndicator.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"w-full mb-4 flex items-center justify-start\"},[_c('div',{staticClass:\"px-2 py-2 bg-white max-w-4xl text-slate-700 leading-6 text-sm rounded-md inline-block border border-slate-100\"},[_c('img',{staticClass:\"h-4\",attrs:{\"src\":_setup.TypingIndicator,\"alt\":\"TypingIndicator\"}})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=197c3b7b&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"media/superadmin_pages/components/playground/assets/typing-929e3aeb589b7668d0b4ff57f73e17e3.gif\";","// Process [@mention](mention://user/1/Pranav)\nconst USER_MENTIONS_REGEX = /mention:\\/\\/(user|team)\\/(\\d+)\\/(.+)/gm;\n\nconst buildMentionTokens = () => (state, silent) => {\n  var label;\n  var labelEnd;\n  var labelStart;\n  var pos;\n  var res;\n  var token;\n  var href = '';\n  var max = state.posMax;\n\n  if (state.src.charCodeAt(state.pos) !== 0x5b /* [ */) {\n    return false;\n  }\n\n  labelStart = state.pos + 1;\n  labelEnd = state.md.helpers.parseLinkLabel(state, state.pos, true);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) {\n    return false;\n  }\n\n  label = state.src.slice(labelStart, labelEnd);\n  pos = labelEnd + 1;\n\n  if (pos < max && state.src.charCodeAt(pos) === 0x28 /* ( */) {\n    pos += 1;\n    res = state.md.helpers.parseLinkDestination(state.src, pos, state.posMax);\n    if (res.ok) {\n      href = state.md.normalizeLink(res.str);\n      if (state.md.validateLink(href)) {\n        pos = res.pos;\n      } else {\n        href = '';\n      }\n    }\n    pos += 1;\n  }\n\n  if (!href.match(new RegExp(USER_MENTIONS_REGEX))) {\n    return false;\n  }\n\n  if (!silent) {\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    token = state.push('mention', '');\n    token.href = href;\n    token.content = label;\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n\n  return true;\n};\n\nconst renderMentions = () => (tokens, idx) => {\n  return `<span class=\"prosemirror-mention-node\">${tokens[idx].content}</span>`;\n};\n\nexport default function mentionPlugin(md) {\n  md.renderer.rules.mention = renderMentions(md);\n  md.inline.ruler.before('link', 'mention', buildMentionTokens(md));\n}\n","import mila from 'markdown-it-link-attributes';\nimport mentionPlugin from './markdownIt/link';\n\nconst setImageHeight = inlineToken => {\n  const imgSrc = inlineToken.attrGet('src');\n  if (!imgSrc) return;\n  const url = new URL(imgSrc);\n  const height = url.searchParams.get('cw_image_height');\n  if (!height) return;\n  inlineToken.attrSet('style', `height: ${height};`);\n};\n\nconst processInlineToken = blockToken => {\n  blockToken.children.forEach(inlineToken => {\n    if (inlineToken.type === 'image') {\n      setImageHeight(inlineToken);\n    }\n  });\n};\n\nconst imgResizeManager = md => {\n  // Custom rule for image resize in markdown\n  // If the image url has a query param cw_image_height, then add a style attribute to the image\n  md.core.ruler.after('inline', 'add-image-height', state => {\n    state.tokens.forEach(blockToken => {\n      if (blockToken.type === 'inline') {\n        processInlineToken(blockToken);\n      }\n    });\n  });\n};\n\nconst md = require('markdown-it')({\n  html: false,\n  xhtmlOut: true,\n  breaks: true,\n  langPrefix: 'language-',\n  linkify: true,\n  typographer: true,\n  quotes: '\\u201c\\u201d\\u2018\\u2019',\n  maxNesting: 20,\n})\n  .use(mentionPlugin)\n  .use(imgResizeManager)\n  .use(mila, {\n    attrs: {\n      class: 'link',\n      rel: 'noreferrer noopener nofollow',\n      target: '_blank',\n    },\n  });\n\nconst TWITTER_USERNAME_REGEX = /(^|[^@\\w])@(\\w{1,15})\\b/g;\nconst TWITTER_USERNAME_REPLACEMENT = '$1[@$2](http://twitter.com/$2)';\nconst TWITTER_HASH_REGEX = /(^|\\s)#(\\w+)/g;\nconst TWITTER_HASH_REPLACEMENT = '$1[#$2](https://twitter.com/hashtag/$2)';\n\nclass MessageFormatter {\n  constructor(message, isATweet = false, isAPrivateNote = false) {\n    this.message = message || '';\n    this.isAPrivateNote = isAPrivateNote;\n    this.isATweet = isATweet;\n  }\n\n  formatMessage() {\n    let updatedMessage = this.message;\n    if (this.isATweet && !this.isAPrivateNote) {\n      updatedMessage = updatedMessage.replace(\n        TWITTER_USERNAME_REGEX,\n        TWITTER_USERNAME_REPLACEMENT\n      );\n      updatedMessage = updatedMessage.replace(\n        TWITTER_HASH_REGEX,\n        TWITTER_HASH_REPLACEMENT\n      );\n    }\n    return md.render(updatedMessage);\n  }\n\n  get formattedMessage() {\n    return this.formatMessage();\n  }\n\n  get plainText() {\n    const strippedOutHtml = new DOMParser().parseFromString(\n      this.formattedMessage,\n      'text/html'\n    );\n    return strippedOutHtml.body.textContent || '';\n  }\n}\n\nexport default MessageFormatter;\n","import MessageFormatter from '../helpers/MessageFormatter';\n\n/**\n * A composable providing utility functions for message formatting.\n *\n * @returns {Object} A set of functions for message formatting.\n */\nexport const useMessageFormatter = () => {\n  /**\n   * Formats a message based on specified conditions.\n   *\n   * @param {string} message - The message to be formatted.\n   * @param {boolean} isATweet - Whether the message is a tweet.\n   * @param {boolean} isAPrivateNote - Whether the message is a private note.\n   * @returns {string} - The formatted message.\n   */\n  const formatMessage = (message, isATweet, isAPrivateNote) => {\n    const messageFormatter = new MessageFormatter(\n      message,\n      isATweet,\n      isAPrivateNote\n    );\n    return messageFormatter.formattedMessage;\n  };\n\n  /**\n   * Converts a message to plain text.\n   *\n   * @param {string} message - The message to be converted.\n   * @param {boolean} isATweet - Whether the message is a tweet.\n   * @returns {string} - The plain text message.\n   */\n  const getPlainText = (message, isATweet) => {\n    const messageFormatter = new MessageFormatter(message, isATweet);\n    return messageFormatter.plainText;\n  };\n\n  /**\n   * Truncates a description to a maximum length of 100 characters.\n   *\n   * @param {string} [description=''] - The description to be truncated.\n   * @returns {string} - The truncated description.\n   */\n  const truncateMessage = (description = '') => {\n    if (description.length < 100) {\n      return description;\n    }\n\n    return `${description.slice(0, 97)}...`;\n  };\n\n  /**\n   * Highlights occurrences of a search term within given content.\n   *\n   * @param {string} [content=''] - The content in which to search.\n   * @param {string} [searchTerm=''] - The term to search for.\n   * @param {string} [highlightClass=''] - The CSS class to apply to the highlighted term.\n   * @returns {string} - The content with highlighted terms.\n   */\n  const highlightContent = (\n    content = '',\n    searchTerm = '',\n    highlightClass = ''\n  ) => {\n    const plainTextContent = getPlainText(content);\n\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#escaping\n    const escapedSearchTerm = searchTerm.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n\n    return plainTextContent.replace(\n      new RegExp(`(${escapedSearchTerm})`, 'ig'),\n      `<span class=\"${highlightClass}\">$1</span>`\n    );\n  };\n\n  return {\n    formatMessage,\n    getPlainText,\n    truncateMessage,\n    highlightContent,\n  };\n};\n"],"sourceRoot":""}