{"version":3,"sources":["webpack:///./node_modules/engine.io-client/build/esm/transport.js","webpack:///./node_modules/@socket.io/component-emitter/lib/esm/index.js","webpack:///./node_modules/engine.io-client/build/esm/util.js","webpack:///./node_modules/engine.io-client/build/esm/transports/websocket-constructor.browser.js","webpack:///./node_modules/engine.io-parser/build/esm/commons.js","webpack:///./node_modules/engine.io-parser/build/esm/encodePacket.browser.js","webpack:///./node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","webpack:///./node_modules/engine.io-parser/build/esm/index.js","webpack:///./node_modules/engine.io-parser/build/esm/decodePacket.browser.js","webpack:///./node_modules/engine.io-client/build/esm/globalThis.browser.js","webpack:///./node_modules/engine.io-client/build/esm/contrib/parseqs.js","webpack:///./node_modules/engine.io-client/build/esm/contrib/yeast.js","webpack:///./node_modules/date-fns/esm/differenceInMinutes/index.js","webpack:///./node_modules/engine.io-client/build/esm/transports/websocket.js","webpack:///./node_modules/engine.io-client/build/esm/contrib/has-cors.js","webpack:///./node_modules/engine.io-client/build/esm/transports/xmlhttprequest.browser.js","webpack:///./node_modules/engine.io-client/build/esm/transports/polling.js","webpack:///./node_modules/engine.io-client/build/esm/transports/webtransport.js","webpack:///./node_modules/engine.io-client/build/esm/transports/index.js","webpack:///./node_modules/engine.io-client/build/esm/contrib/parseuri.js","webpack:///./node_modules/engine.io-client/build/esm/socket.js","webpack:///./node_modules/engine.io-client/build/esm/index.js","webpack:///./node_modules/socket.io-parser/build/esm/is-binary.js","webpack:///./node_modules/socket.io-parser/build/esm/binary.js","webpack:///./node_modules/socket.io-parser/build/esm/index.js","webpack:///./node_modules/socket.io-client/build/esm/on.js","webpack:///./node_modules/socket.io-client/build/esm/socket.js","webpack:///./node_modules/socket.io-client/build/esm/contrib/backo2.js","webpack:///./node_modules/socket.io-client/build/esm/manager.js","webpack:///./node_modules/socket.io-client/build/esm/index.js","webpack:///./node_modules/socket.io-client/build/esm/url.js","webpack:///./node_modules/date-fns/esm/getHours/index.js","webpack:///./node_modules/date-fns/esm/getMinutes/index.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_get","property","receiver","Reflect","get","base","object","hasOwnProperty","call","_getPrototypeOf","_superPropBase","desc","getOwnPropertyDescriptor","value","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","create","_setPrototypeOf","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","result","Super","NewTarget","this","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","_wrapNativeSuper","Class","_cache","Map","undefined","fn","Function","toString","indexOf","has","set","Wrapper","_construct","Parent","args","a","push","bind","sham","Proxy","Boolean","valueOf","e","o","p","setPrototypeOf","__proto__","getPrototypeOf","TransportError","_Error","_super","reason","description","context","_this","type","Error","Transport","_Emitter","protoProps","staticProps","_super2","opts","_this2","query","socket","readyState","doOpen","doClose","onClose","packets","write","data","packet","binaryType","onPacket","details","onPause","schema","_hostname","_port","path","_query","hostname","port","secure","Number","encodedQuery","Emitter","mixin","on","addEventListener","event","_callbacks","once","off","removeListener","removeAllListeners","removeEventListener","cb","callbacks","splice","emit","Array","len","slice","emitReserved","listeners","hasListeners","pick","_len","attr","_key","reduce","acc","k","NATIVE_SET_TIMEOUT","setTimeout","NATIVE_CLEAR_TIMEOUT","clearTimeout","installTimerFunctions","useNativeTimers","setTimeoutFn","clearTimeoutFn","byteLength","str","c","l","charCodeAt","utf8Length","Math","ceil","size","nextTick","Promise","resolve","then","WebSocket","MozWebSocket","usingBrowserWebSocket","defaultBinaryType","PACKET_TYPES","PACKET_TYPES_REVERSE","keys","forEach","TEXT_ENCODER","ERROR_PACKET","withNativeBlob","Blob","withNativeArrayBuffer","ArrayBuffer","isView","buffer","_ref","supportsBinary","callback","encodeBlobAsBase64","fileReader","FileReader","onload","content","split","readAsDataURL","toArray","Uint8Array","byteOffset","chars","lookup","TEXT_DECODER","encodedPacket","mapBinary","charAt","substring","decoded","base64","encoded1","encoded2","encoded3","encoded4","bufferLength","arraybuffer","bytes","decode","SEPARATOR","String","fromCharCode","encodedPackets","count","join","encodedPayload","decodedPacket","createPacketEncoderStream","TransformStream","transform","controller","arrayBuffer","encoded","TextEncoder","encode","encodePacketToBinary","header","payloadLength","DataView","setUint8","view","setUint16","_view","setBigUint64","BigInt","enqueue","totalLength","chunks","chunk","concatChunks","shift","j","createPacketDecoderStream","maxPayload","TextDecoder","state","expectedLength","isBinary","headerArray","getUint16","_headerArray","n","getUint32","pow","protocol","globalThisShim","window","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","prev","alphabet","map","seed","num","floor","yeast","now","Date","differenceInMinutes","dirtyDateLeft","dirtyDateRight","diff","isReactNative","navigator","product","toLowerCase","WS","_Transport","forceBase64","check","uri","protocols","extraHeaders","headers","ws","err","addEventListeners","onopen","autoUnref","_socket","unref","onOpen","onclose","closeEvent","onmessage","ev","onData","onerror","onError","_this3","_loop","lastPacket","options","compress","perMessageDeflate","Buffer","threshold","send","close","timestampRequests","timestampParam","b64","createUri","XMLHttpRequest","hasCORS","XHR","xdomain","concat","_createClass","empty","hasXHR2","responseType","Polling","polling","location","isSSL","xd","withCredentials","cookieJar","createCookieJar","poll","pause","total","doPoll","_this4","_this5","doWrite","sid","assign","_this6","req","request","method","xhrStatus","_this7","pollXhr","Request","_this8","_a","_this9","xhr","open","setDisableHeaderCheck","setRequestHeader","addCookies","requestTimeout","timeout","onreadystatechange","parseCookies","status","onLoad","document","index","requestsCount","requests","cleanup","fromError","abort","responseText","attachEvent","unloadHandler","terminationEvent","WT","WebTransport","transport","transportOptions","name","closed","catch","ready","createBidirectionalStream","stream","decoderStream","MAX_SAFE_INTEGER","reader","readable","pipeThrough","getReader","encoderStream","pipeTo","writer","getWriter","read","done","transports","websocket","webtransport","re","parts","parse","src","b","replace","m","exec","source","host","authority","ipv6uri","pathNames","regx","names","queryKey","$0","$1","$2","Socket","writeBuffer","prevBufferLen","agent","upgrade","rememberUpgrade","addTrailingSlash","rejectUnauthorized","closeOnBeforeunload","id","upgrades","pingInterval","pingTimeout","pingTimeoutTimer","beforeunloadEventListener","offlineEventListener","EIO","priorWebsocketSuccess","createTransport","setTransport","onDrain","failed","onTransportOpen","msg","upgrading","flush","freezeTransport","error","onTransportClose","onupgrade","to","probe","resetPingTimeout","onHandshake","JSON","sendPacket","code","filterUpgrades","getWritablePackets","payloadSize","cleanupAndClose","waitForUpgrade","filteredUpgrades","withNativeFile","File","hasBinary","toJSON","isArray","deconstructPacket","buffers","packetData","pack","_deconstructPacket","attachments","placeholder","_placeholder","newData","_newData","reconstructPacket","_reconstructPacket","PacketType","RESERVED_EVENTS","Encoder","replacer","EVENT","ACK","encodeAsString","encodeAsBinary","BINARY_EVENT","BINARY_ACK","nsp","stringify","deconstruction","unshift","isObject","Decoder","reviver","reconstructor","isBinaryEvent","decodeString","takeBinaryData","start","buf","_start","next","_start2","_c","payload","tryParse","substr","isPayloadValid","finishedReconstruction","CONNECT","DISCONNECT","CONNECT_ERROR","BinaryReconstructor","reconPack","binData","_createForOfIteratorHelper","allowArrayLike","it","minLen","_arrayLikeToArray","from","test","_unsupportedIterableToArray","F","s","_e","f","normalCompletion","didErr","step","_e2","return","arr","arr2","freeze","connect","connect_error","disconnect","disconnecting","newListener","io","connected","recovered","receiveBuffer","sendBuffer","_queue","_queueSeq","ids","acks","flags","auth","_opts","_autoConnect","subs","onpacket","subEvents","_readyState","_len2","_key2","retries","fromQueue","volatile","_addToQueue","ack","pop","_registerAckCallback","isTransportWritable","engine","discardPacket","notifyOutgoingListeners","ackTimeout","timer","_len3","_key3","withError","_len4","_key4","reject","arg1","arg2","tryCount","pending","hasError","_len5","responseArgs","_key5","_drainQueue","force","_packet","_sendConnectPacket","_pid","pid","offset","_lastOffset","_clearAcks","some","onconnect","onevent","onack","ondisconnect","destroy","message","emitEvent","_anyListeners","_step","_iterator","sent","_len6","_key6","emitBuffered","subDestroy","_compress","_timeout","listener","_anyOutgoingListeners","_step2","_iterator2","Backoff","ms","min","max","factor","jitter","attempts","duration","rand","random","deviation","reset","setMin","setMax","setJitter","Manager","nsps","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","parser","encoder","decoder","autoConnect","v","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_reconnecting","reconnect","skipReconnect","openSubDestroy","maybeReconnectOnOpen","errorSub","onping","ondata","ondecoded","add","active","_i","_nsps","_close","delay","onreconnect","attempt","cache","parsed","loc","href","url","sameNamespace","forceNew","multiplex","getHours","dirtyDate","date","hours","getMinutes","minutes"],"mappings":"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","file":"js/48-c9729e2db7f949754110.chunk.js","sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nimport { encode } from \"./contrib/parseqs.js\";\nexport var TransportError = /*#__PURE__*/function (_Error) {\n  _inherits(TransportError, _Error);\n\n  var _super = _createSuper(TransportError);\n\n  function TransportError(reason, description, context) {\n    var _this;\n\n    _classCallCheck(this, TransportError);\n\n    _this = _super.call(this, reason);\n    _this.description = description;\n    _this.context = context;\n    _this.type = \"TransportError\";\n    return _this;\n  }\n\n  return TransportError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nexport var Transport = /*#__PURE__*/function (_Emitter) {\n  _inherits(Transport, _Emitter);\n\n  var _super2 = _createSuper(Transport);\n\n  /**\n   * Transport abstract constructor.\n   *\n   * @param {Object} opts - options\n   * @protected\n   */\n  function Transport(opts) {\n    var _this2;\n\n    _classCallCheck(this, Transport);\n\n    _this2 = _super2.call(this);\n    _this2.writable = false;\n    installTimerFunctions(_assertThisInitialized(_this2), opts);\n    _this2.opts = opts;\n    _this2.query = opts.query;\n    _this2.socket = opts.socket;\n    return _this2;\n  }\n  /**\n   * Emits an error.\n   *\n   * @param {String} reason\n   * @param description\n   * @param context - the error context\n   * @return {Transport} for chaining\n   * @protected\n   */\n\n\n  _createClass(Transport, [{\n    key: \"onError\",\n    value: function onError(reason, description, context) {\n      _get(_getPrototypeOf(Transport.prototype), \"emitReserved\", this).call(this, \"error\", new TransportError(reason, description, context));\n\n      return this;\n    }\n    /**\n     * Opens the transport.\n     */\n\n  }, {\n    key: \"open\",\n    value: function open() {\n      this.readyState = \"opening\";\n      this.doOpen();\n      return this;\n    }\n    /**\n     * Closes the transport.\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      if (this.readyState === \"opening\" || this.readyState === \"open\") {\n        this.doClose();\n        this.onClose();\n      }\n\n      return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n\n  }, {\n    key: \"send\",\n    value: function send(packets) {\n      if (this.readyState === \"open\") {\n        this.write(packets);\n      } else {// this might happen if the transport was silently closed in the beforeunload event handler\n      }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n\n  }, {\n    key: \"onOpen\",\n    value: function onOpen() {\n      this.readyState = \"open\";\n      this.writable = true;\n\n      _get(_getPrototypeOf(Transport.prototype), \"emitReserved\", this).call(this, \"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n\n  }, {\n    key: \"onData\",\n    value: function onData(data) {\n      var packet = decodePacket(data, this.socket.binaryType);\n      this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n\n  }, {\n    key: \"onPacket\",\n    value: function onPacket(packet) {\n      _get(_getPrototypeOf(Transport.prototype), \"emitReserved\", this).call(this, \"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n\n  }, {\n    key: \"onClose\",\n    value: function onClose(details) {\n      this.readyState = \"closed\";\n\n      _get(_getPrototypeOf(Transport.prototype), \"emitReserved\", this).call(this, \"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause(onPause) {}\n  }, {\n    key: \"createUri\",\n    value: function createUri(schema) {\n      var query = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return schema + \"://\" + this._hostname() + this._port() + this.opts.path + this._query(query);\n    }\n  }, {\n    key: \"_hostname\",\n    value: function _hostname() {\n      var hostname = this.opts.hostname;\n      return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    }\n  }, {\n    key: \"_port\",\n    value: function _port() {\n      if (this.opts.port && (this.opts.secure && Number(this.opts.port !== 443) || !this.opts.secure && Number(this.opts.port) !== 80)) {\n        return \":\" + this.opts.port;\n      } else {\n        return \"\";\n      }\n    }\n  }, {\n    key: \"_query\",\n    value: function _query(query) {\n      var encodedQuery = encode(query);\n      return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    }\n  }]);\n\n  return Transport;\n}(Emitter);","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n\n  return obj;\n}\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\n\nEmitter.prototype.on = Emitter.prototype.addEventListener = function (event, fn) {\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || []).push(fn);\n  return this;\n};\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\n\nEmitter.prototype.once = function (event, fn) {\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\n\nEmitter.prototype.off = Emitter.prototype.removeListener = Emitter.prototype.removeAllListeners = Emitter.prototype.removeEventListener = function (event, fn) {\n  this._callbacks = this._callbacks || {}; // all\n\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  } // specific event\n\n\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this; // remove all handlers\n\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  } // remove specific handler\n\n\n  var cb;\n\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  } // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n\n\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\n\nEmitter.prototype.emit = function (event) {\n  this._callbacks = this._callbacks || {};\n  var args = new Array(arguments.length - 1),\n      callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n}; // alias used for reserved events (protected method)\n\n\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function (event) {\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\n\nEmitter.prototype.hasListeners = function (event) {\n  return !!this.listeners(event).length;\n};","import { globalThisShim as globalThis } from \"./globalThis.js\";\nexport function pick(obj) {\n  for (var _len = arguments.length, attr = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    attr[_key - 1] = arguments[_key];\n  }\n\n  return attr.reduce(function (acc, k) {\n    if (obj.hasOwnProperty(k)) {\n      acc[k] = obj[k];\n    }\n\n    return acc;\n  }, {});\n} // Keep a reference to the real timeout functions so they can be used when overridden\n\nvar NATIVE_SET_TIMEOUT = globalThis.setTimeout;\nvar NATIVE_CLEAR_TIMEOUT = globalThis.clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n  if (opts.useNativeTimers) {\n    obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n    obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n  } else {\n    obj.setTimeoutFn = globalThis.setTimeout.bind(globalThis);\n    obj.clearTimeoutFn = globalThis.clearTimeout.bind(globalThis);\n  }\n} // base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\n\nvar BASE64_OVERHEAD = 1.33; // we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\n\nexport function byteLength(obj) {\n  if (typeof obj === \"string\") {\n    return utf8Length(obj);\n  } // arraybuffer or blob\n\n\n  return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\n\nfunction utf8Length(str) {\n  var c = 0,\n      length = 0;\n\n  for (var i = 0, l = str.length; i < l; i++) {\n    c = str.charCodeAt(i);\n\n    if (c < 0x80) {\n      length += 1;\n    } else if (c < 0x800) {\n      length += 2;\n    } else if (c < 0xd800 || c >= 0xe000) {\n      length += 3;\n    } else {\n      i++;\n      length += 4;\n    }\n  }\n\n  return length;\n}","import { globalThisShim as globalThis } from \"../globalThis.js\";\nexport var nextTick = function () {\n  var isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n\n  if (isPromiseAvailable) {\n    return function (cb) {\n      return Promise.resolve().then(cb);\n    };\n  } else {\n    return function (cb, setTimeoutFn) {\n      return setTimeoutFn(cb, 0);\n    };\n  }\n}();\nexport var WebSocket = globalThis.WebSocket || globalThis.MozWebSocket;\nexport var usingBrowserWebSocket = true;\nexport var defaultBinaryType = \"arraybuffer\";","var PACKET_TYPES = Object.create(null); // no Map = no polyfill\n\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nvar PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach(function (key) {\n  PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nvar ERROR_PACKET = {\n  type: \"error\",\n  data: \"parser error\"\n};\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };","import { PACKET_TYPES } from \"./commons.js\";\nvar withNativeBlob = typeof Blob === \"function\" || typeof Blob !== \"undefined\" && Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\";\nvar withNativeArrayBuffer = typeof ArrayBuffer === \"function\"; // ArrayBuffer.isView method is not defined in IE10\n\nvar isView = function isView(obj) {\n  return typeof ArrayBuffer.isView === \"function\" ? ArrayBuffer.isView(obj) : obj && obj.buffer instanceof ArrayBuffer;\n};\n\nvar encodePacket = function encodePacket(_ref, supportsBinary, callback) {\n  var type = _ref.type,\n      data = _ref.data;\n\n  if (withNativeBlob && data instanceof Blob) {\n    if (supportsBinary) {\n      return callback(data);\n    } else {\n      return encodeBlobAsBase64(data, callback);\n    }\n  } else if (withNativeArrayBuffer && (data instanceof ArrayBuffer || isView(data))) {\n    if (supportsBinary) {\n      return callback(data);\n    } else {\n      return encodeBlobAsBase64(new Blob([data]), callback);\n    }\n  } // plain string\n\n\n  return callback(PACKET_TYPES[type] + (data || \"\"));\n};\n\nvar encodeBlobAsBase64 = function encodeBlobAsBase64(data, callback) {\n  var fileReader = new FileReader();\n\n  fileReader.onload = function () {\n    var content = fileReader.result.split(\",\")[1];\n    callback(\"b\" + (content || \"\"));\n  };\n\n  return fileReader.readAsDataURL(data);\n};\n\nfunction toArray(data) {\n  if (data instanceof Uint8Array) {\n    return data;\n  } else if (data instanceof ArrayBuffer) {\n    return new Uint8Array(data);\n  } else {\n    return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n  }\n}\n\nvar TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n  if (withNativeBlob && packet.data instanceof Blob) {\n    return packet.data.arrayBuffer().then(toArray).then(callback);\n  } else if (withNativeArrayBuffer && (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n    return callback(toArray(packet.data));\n  }\n\n  encodePacket(packet, false, function (encoded) {\n    if (!TEXT_ENCODER) {\n      TEXT_ENCODER = new TextEncoder();\n    }\n\n    callback(TEXT_ENCODER.encode(encoded));\n  });\n}\nexport { encodePacket };","// imported from https://github.com/socketio/base64-arraybuffer\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'; // Use a lookup table to find the index.\n\nvar lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\n\nfor (var i = 0; i < chars.length; i++) {\n  lookup[chars.charCodeAt(i)] = i;\n}\n\nexport var encode = function encode(arraybuffer) {\n  var bytes = new Uint8Array(arraybuffer),\n      i,\n      len = bytes.length,\n      base64 = '';\n\n  for (i = 0; i < len; i += 3) {\n    base64 += chars[bytes[i] >> 2];\n    base64 += chars[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];\n    base64 += chars[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];\n    base64 += chars[bytes[i + 2] & 63];\n  }\n\n  if (len % 3 === 2) {\n    base64 = base64.substring(0, base64.length - 1) + '=';\n  } else if (len % 3 === 1) {\n    base64 = base64.substring(0, base64.length - 2) + '==';\n  }\n\n  return base64;\n};\nexport var decode = function decode(base64) {\n  var bufferLength = base64.length * 0.75,\n      len = base64.length,\n      i,\n      p = 0,\n      encoded1,\n      encoded2,\n      encoded3,\n      encoded4;\n\n  if (base64[base64.length - 1] === '=') {\n    bufferLength--;\n\n    if (base64[base64.length - 2] === '=') {\n      bufferLength--;\n    }\n  }\n\n  var arraybuffer = new ArrayBuffer(bufferLength),\n      bytes = new Uint8Array(arraybuffer);\n\n  for (i = 0; i < len; i += 4) {\n    encoded1 = lookup[base64.charCodeAt(i)];\n    encoded2 = lookup[base64.charCodeAt(i + 1)];\n    encoded3 = lookup[base64.charCodeAt(i + 2)];\n    encoded4 = lookup[base64.charCodeAt(i + 3)];\n    bytes[p++] = encoded1 << 2 | encoded2 >> 4;\n    bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;\n    bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;\n  }\n\n  return arraybuffer;\n};","import { encodePacket, encodePacketToBinary } from \"./encodePacket.js\";\nimport { decodePacket } from \"./decodePacket.js\";\nimport { ERROR_PACKET } from \"./commons.js\";\nvar SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\n\nvar encodePayload = function encodePayload(packets, callback) {\n  // some packets may be added to the array while encoding, so the initial length must be saved\n  var length = packets.length;\n  var encodedPackets = new Array(length);\n  var count = 0;\n  packets.forEach(function (packet, i) {\n    // force base64 encoding for binary packets\n    encodePacket(packet, false, function (encodedPacket) {\n      encodedPackets[i] = encodedPacket;\n\n      if (++count === length) {\n        callback(encodedPackets.join(SEPARATOR));\n      }\n    });\n  });\n};\n\nvar decodePayload = function decodePayload(encodedPayload, binaryType) {\n  var encodedPackets = encodedPayload.split(SEPARATOR);\n  var packets = [];\n\n  for (var i = 0; i < encodedPackets.length; i++) {\n    var decodedPacket = decodePacket(encodedPackets[i], binaryType);\n    packets.push(decodedPacket);\n\n    if (decodedPacket.type === \"error\") {\n      break;\n    }\n  }\n\n  return packets;\n};\n\nexport function createPacketEncoderStream() {\n  return new TransformStream({\n    transform: function transform(packet, controller) {\n      encodePacketToBinary(packet, function (encodedPacket) {\n        var payloadLength = encodedPacket.length;\n        var header; // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n\n        if (payloadLength < 126) {\n          header = new Uint8Array(1);\n          new DataView(header.buffer).setUint8(0, payloadLength);\n        } else if (payloadLength < 65536) {\n          header = new Uint8Array(3);\n          var view = new DataView(header.buffer);\n          view.setUint8(0, 126);\n          view.setUint16(1, payloadLength);\n        } else {\n          header = new Uint8Array(9);\n\n          var _view = new DataView(header.buffer);\n\n          _view.setUint8(0, 127);\n\n          _view.setBigUint64(1, BigInt(payloadLength));\n        } // first bit indicates whether the payload is plain text (0) or binary (1)\n\n\n        if (packet.data && typeof packet.data !== \"string\") {\n          header[0] |= 0x80;\n        }\n\n        controller.enqueue(header);\n        controller.enqueue(encodedPacket);\n      });\n    }\n  });\n}\nvar TEXT_DECODER;\n\nfunction totalLength(chunks) {\n  return chunks.reduce(function (acc, chunk) {\n    return acc + chunk.length;\n  }, 0);\n}\n\nfunction concatChunks(chunks, size) {\n  if (chunks[0].length === size) {\n    return chunks.shift();\n  }\n\n  var buffer = new Uint8Array(size);\n  var j = 0;\n\n  for (var i = 0; i < size; i++) {\n    buffer[i] = chunks[0][j++];\n\n    if (j === chunks[0].length) {\n      chunks.shift();\n      j = 0;\n    }\n  }\n\n  if (chunks.length && j < chunks[0].length) {\n    chunks[0] = chunks[0].slice(j);\n  }\n\n  return buffer;\n}\n\nexport function createPacketDecoderStream(maxPayload, binaryType) {\n  if (!TEXT_DECODER) {\n    TEXT_DECODER = new TextDecoder();\n  }\n\n  var chunks = [];\n  var state = 0\n  /* State.READ_HEADER */\n  ;\n  var expectedLength = -1;\n  var isBinary = false;\n  return new TransformStream({\n    transform: function transform(chunk, controller) {\n      chunks.push(chunk);\n\n      while (true) {\n        if (state === 0\n        /* State.READ_HEADER */\n        ) {\n            if (totalLength(chunks) < 1) {\n              break;\n            }\n\n            var header = concatChunks(chunks, 1);\n            isBinary = (header[0] & 0x80) === 0x80;\n            expectedLength = header[0] & 0x7f;\n\n            if (expectedLength < 126) {\n              state = 3\n              /* State.READ_PAYLOAD */\n              ;\n            } else if (expectedLength === 126) {\n              state = 1\n              /* State.READ_EXTENDED_LENGTH_16 */\n              ;\n            } else {\n              state = 2\n              /* State.READ_EXTENDED_LENGTH_64 */\n              ;\n            }\n          } else if (state === 1\n        /* State.READ_EXTENDED_LENGTH_16 */\n        ) {\n            if (totalLength(chunks) < 2) {\n              break;\n            }\n\n            var headerArray = concatChunks(chunks, 2);\n            expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n            state = 3\n            /* State.READ_PAYLOAD */\n            ;\n          } else if (state === 2\n        /* State.READ_EXTENDED_LENGTH_64 */\n        ) {\n            if (totalLength(chunks) < 8) {\n              break;\n            }\n\n            var _headerArray = concatChunks(chunks, 8);\n\n            var view = new DataView(_headerArray.buffer, _headerArray.byteOffset, _headerArray.length);\n            var n = view.getUint32(0);\n\n            if (n > Math.pow(2, 53 - 32) - 1) {\n              // the maximum safe integer in JavaScript is 2^53 - 1\n              controller.enqueue(ERROR_PACKET);\n              break;\n            }\n\n            expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n            state = 3\n            /* State.READ_PAYLOAD */\n            ;\n          } else {\n          if (totalLength(chunks) < expectedLength) {\n            break;\n          }\n\n          var data = concatChunks(chunks, expectedLength);\n          controller.enqueue(decodePacket(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n          state = 0\n          /* State.READ_HEADER */\n          ;\n        }\n\n        if (expectedLength === 0 || expectedLength > maxPayload) {\n          controller.enqueue(ERROR_PACKET);\n          break;\n        }\n      }\n    }\n  });\n}\nexport var protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload };","import { ERROR_PACKET, PACKET_TYPES_REVERSE } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nvar withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nexport var decodePacket = function decodePacket(encodedPacket, binaryType) {\n  if (typeof encodedPacket !== \"string\") {\n    return {\n      type: \"message\",\n      data: mapBinary(encodedPacket, binaryType)\n    };\n  }\n\n  var type = encodedPacket.charAt(0);\n\n  if (type === \"b\") {\n    return {\n      type: \"message\",\n      data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n    };\n  }\n\n  var packetType = PACKET_TYPES_REVERSE[type];\n\n  if (!packetType) {\n    return ERROR_PACKET;\n  }\n\n  return encodedPacket.length > 1 ? {\n    type: PACKET_TYPES_REVERSE[type],\n    data: encodedPacket.substring(1)\n  } : {\n    type: PACKET_TYPES_REVERSE[type]\n  };\n};\n\nvar decodeBase64Packet = function decodeBase64Packet(data, binaryType) {\n  if (withNativeArrayBuffer) {\n    var decoded = decode(data);\n    return mapBinary(decoded, binaryType);\n  } else {\n    return {\n      base64: true,\n      data: data\n    }; // fallback for old browsers\n  }\n};\n\nvar mapBinary = function mapBinary(data, binaryType) {\n  switch (binaryType) {\n    case \"blob\":\n      if (data instanceof Blob) {\n        // from WebSocket + binaryType \"blob\"\n        return data;\n      } else {\n        // from HTTP long-polling or WebTransport\n        return new Blob([data]);\n      }\n\n    case \"arraybuffer\":\n    default:\n      if (data instanceof ArrayBuffer) {\n        // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n        return data;\n      } else {\n        // from WebTransport (Uint8Array)\n        return data.buffer;\n      }\n\n  }\n};","export var globalThisShim = function () {\n  if (typeof self !== \"undefined\") {\n    return self;\n  } else if (typeof window !== \"undefined\") {\n    return window;\n  } else {\n    return Function(\"return this\")();\n  }\n}();","// imported from https://github.com/galkn/querystring\n\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexport function decode(qs) {\n  var qry = {};\n  var pairs = qs.split('&');\n\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n\n  return qry;\n}","// imported from https://github.com/unshiftio/yeast\n'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''),\n    length = 64,\n    map = {};\nvar seed = 0,\n    i = 0,\n    prev;\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\n\nexport function encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\n\nexport function decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\n\nexport function yeast() {\n  var now = encode(+new Date());\n  if (now !== prev) return seed = 0, prev = now;\n  return now + '.' + encode(seed++);\n} //\n// Map each character to its index.\n//\n\nfor (; i < length; i++) {\n  map[alphabet[i]] = i;\n}","import differenceInMilliseconds from \"../differenceInMilliseconds/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\nvar MILLISECONDS_IN_MINUTE = 60000;\n/**\n * @name differenceInMinutes\n * @category Minute Helpers\n * @summary Get the number of minutes between the given dates.\n *\n * @description\n * Get the signed number of full (rounded towards 0) minutes between the given dates.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the later date\n * @param {Date|Number} dateRight - the earlier date\n * @returns {Number} the number of minutes\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // How many minutes are between 2 July 2014 12:07:59 and 2 July 2014 12:20:00?\n * var result = differenceInMinutes(\n *   new Date(2014, 6, 2, 12, 20, 0),\n *   new Date(2014, 6, 2, 12, 7, 59)\n * )\n * //=> 12\n *\n * @example\n * // How many minutes are from 10:01:59 to 10:00:00\n * var result = differenceInMinutes(\n *   new Date(2000, 0, 1, 10, 0, 0),\n *   new Date(2000, 0, 1, 10, 1, 59)\n * )\n * //=> -1\n */\n\nexport default function differenceInMinutes(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var diff = differenceInMilliseconds(dirtyDateLeft, dirtyDateRight) / MILLISECONDS_IN_MINUTE;\n  return diff > 0 ? Math.floor(diff) : Math.ceil(diff);\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport { Transport } from \"../transport.js\";\nimport { yeast } from \"../contrib/yeast.js\";\nimport { pick } from \"../util.js\";\nimport { nextTick, usingBrowserWebSocket, WebSocket } from \"./websocket-constructor.js\";\nimport { encodePacket } from \"engine.io-parser\"; // detect ReactNative environment\n\nvar isReactNative = typeof navigator !== \"undefined\" && typeof navigator.product === \"string\" && navigator.product.toLowerCase() === \"reactnative\";\nexport var WS = /*#__PURE__*/function (_Transport) {\n  _inherits(WS, _Transport);\n\n  var _super = _createSuper(WS);\n\n  /**\n   * WebSocket transport constructor.\n   *\n   * @param {Object} opts - connection options\n   * @protected\n   */\n  function WS(opts) {\n    var _this;\n\n    _classCallCheck(this, WS);\n\n    _this = _super.call(this, opts);\n    _this.supportsBinary = !opts.forceBase64;\n    return _this;\n  }\n\n  _createClass(WS, [{\n    key: \"name\",\n    get: function get() {\n      return \"websocket\";\n    }\n  }, {\n    key: \"doOpen\",\n    value: function doOpen() {\n      if (!this.check()) {\n        // let probe timeout\n        return;\n      }\n\n      var uri = this.uri();\n      var protocols = this.opts.protocols; // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n\n      var opts = isReactNative ? {} : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n\n      if (this.opts.extraHeaders) {\n        opts.headers = this.opts.extraHeaders;\n      }\n\n      try {\n        this.ws = usingBrowserWebSocket && !isReactNative ? protocols ? new WebSocket(uri, protocols) : new WebSocket(uri) : new WebSocket(uri, protocols, opts);\n      } catch (err) {\n        return this.emitReserved(\"error\", err);\n      }\n\n      this.ws.binaryType = this.socket.binaryType;\n      this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */\n\n  }, {\n    key: \"addEventListeners\",\n    value: function addEventListeners() {\n      var _this2 = this;\n\n      this.ws.onopen = function () {\n        if (_this2.opts.autoUnref) {\n          _this2.ws._socket.unref();\n        }\n\n        _this2.onOpen();\n      };\n\n      this.ws.onclose = function (closeEvent) {\n        return _this2.onClose({\n          description: \"websocket connection closed\",\n          context: closeEvent\n        });\n      };\n\n      this.ws.onmessage = function (ev) {\n        return _this2.onData(ev.data);\n      };\n\n      this.ws.onerror = function (e) {\n        return _this2.onError(\"websocket error\", e);\n      };\n    }\n  }, {\n    key: \"write\",\n    value: function write(packets) {\n      var _this3 = this;\n\n      this.writable = false; // encodePacket efficient as it uses WS framing\n      // no need for encodePayload\n\n      var _loop = function _loop(i) {\n        var packet = packets[i];\n        var lastPacket = i === packets.length - 1;\n        encodePacket(packet, _this3.supportsBinary, function (data) {\n          // always create a new object (GH-437)\n          var opts = {};\n\n          if (!usingBrowserWebSocket) {\n            if (packet.options) {\n              opts.compress = packet.options.compress;\n            }\n\n            if (_this3.opts.perMessageDeflate) {\n              var len = // @ts-ignore\n              \"string\" === typeof data ? Buffer.byteLength(data) : data.length;\n\n              if (len < _this3.opts.perMessageDeflate.threshold) {\n                opts.compress = false;\n              }\n            }\n          } // Sometimes the websocket has already been closed but the browser didn't\n          // have a chance of informing us about it yet, in that case send will\n          // throw an error\n\n\n          try {\n            if (usingBrowserWebSocket) {\n              // TypeError is thrown when passing the second argument on Safari\n              _this3.ws.send(data);\n            } else {\n              _this3.ws.send(data, opts);\n            }\n          } catch (e) {}\n\n          if (lastPacket) {\n            // fake drain\n            // defer to next tick to allow Socket to clear writeBuffer\n            nextTick(function () {\n              _this3.writable = true;\n\n              _this3.emitReserved(\"drain\");\n            }, _this3.setTimeoutFn);\n          }\n        });\n      };\n\n      for (var i = 0; i < packets.length; i++) {\n        _loop(i);\n      }\n    }\n  }, {\n    key: \"doClose\",\n    value: function doClose() {\n      if (typeof this.ws !== \"undefined\") {\n        this.ws.close();\n        this.ws = null;\n      }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"uri\",\n    value: function uri() {\n      var schema = this.opts.secure ? \"wss\" : \"ws\";\n      var query = this.query || {}; // append timestamp to URI\n\n      if (this.opts.timestampRequests) {\n        query[this.opts.timestampParam] = yeast();\n      } // communicate binary support capabilities\n\n\n      if (!this.supportsBinary) {\n        query.b64 = 1;\n      }\n\n      return this.createUri(schema, query);\n    }\n    /**\n     * Feature detection for WebSocket.\n     *\n     * @return {Boolean} whether this transport is available.\n     * @private\n     */\n\n  }, {\n    key: \"check\",\n    value: function check() {\n      return !!WebSocket;\n    }\n  }]);\n\n  return WS;\n}(Transport);","// imported from https://github.com/component/has-cors\nvar value = false;\n\ntry {\n  value = typeof XMLHttpRequest !== 'undefined' && 'withCredentials' in new XMLHttpRequest();\n} catch (err) {// if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n}\n\nexport var hasCORS = value;","// browser shim for xmlhttprequest module\nimport { hasCORS } from \"../contrib/has-cors.js\";\nimport { globalThisShim as globalThis } from \"../globalThis.js\";\nexport function XHR(opts) {\n  var xdomain = opts.xdomain; // XMLHttpRequest can be disabled on IE\n\n  try {\n    if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) {}\n\n  if (!xdomain) {\n    try {\n      return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n    } catch (e) {}\n  }\n}\nexport function createCookieJar() {}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport { Transport } from \"../transport.js\";\nimport { yeast } from \"../contrib/yeast.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nimport { createCookieJar, XHR as XMLHttpRequest } from \"./xmlhttprequest.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globalThis.js\";\n\nfunction empty() {}\n\nvar hasXHR2 = function () {\n  var xhr = new XMLHttpRequest({\n    xdomain: false\n  });\n  return null != xhr.responseType;\n}();\n\nexport var Polling = /*#__PURE__*/function (_Transport) {\n  _inherits(Polling, _Transport);\n\n  var _super = _createSuper(Polling);\n\n  /**\n   * XHR Polling constructor.\n   *\n   * @param {Object} opts\n   * @package\n   */\n  function Polling(opts) {\n    var _this;\n\n    _classCallCheck(this, Polling);\n\n    _this = _super.call(this, opts);\n    _this.polling = false;\n\n    if (typeof location !== \"undefined\") {\n      var isSSL = \"https:\" === location.protocol;\n      var port = location.port; // some user agents have empty `location.port`\n\n      if (!port) {\n        port = isSSL ? \"443\" : \"80\";\n      }\n\n      _this.xd = typeof location !== \"undefined\" && opts.hostname !== location.hostname || port !== opts.port;\n    }\n    /**\n     * XHR supports binary\n     */\n\n\n    var forceBase64 = opts && opts.forceBase64;\n    _this.supportsBinary = hasXHR2 && !forceBase64;\n\n    if (_this.opts.withCredentials) {\n      _this.cookieJar = createCookieJar();\n    }\n\n    return _this;\n  }\n\n  _createClass(Polling, [{\n    key: \"name\",\n    get: function get() {\n      return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n\n  }, {\n    key: \"doOpen\",\n    value: function doOpen() {\n      this.poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause(onPause) {\n      var _this2 = this;\n\n      this.readyState = \"pausing\";\n\n      var pause = function pause() {\n        _this2.readyState = \"paused\";\n        onPause();\n      };\n\n      if (this.polling || !this.writable) {\n        var total = 0;\n\n        if (this.polling) {\n          total++;\n          this.once(\"pollComplete\", function () {\n            --total || pause();\n          });\n        }\n\n        if (!this.writable) {\n          total++;\n          this.once(\"drain\", function () {\n            --total || pause();\n          });\n        }\n      } else {\n        pause();\n      }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"poll\",\n    value: function poll() {\n      this.polling = true;\n      this.doPoll();\n      this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */\n\n  }, {\n    key: \"onData\",\n    value: function onData(data) {\n      var _this3 = this;\n\n      var callback = function callback(packet) {\n        // if its the first message we consider the transport open\n        if (\"opening\" === _this3.readyState && packet.type === \"open\") {\n          _this3.onOpen();\n        } // if its a close packet, we close the ongoing requests\n\n\n        if (\"close\" === packet.type) {\n          _this3.onClose({\n            description: \"transport closed by the server\"\n          });\n\n          return false;\n        } // otherwise bypass onData and handle the message\n\n\n        _this3.onPacket(packet);\n      }; // decode payload\n\n\n      decodePayload(data, this.socket.binaryType).forEach(callback); // if an event did not trigger closing\n\n      if (\"closed\" !== this.readyState) {\n        // if we got data we're not polling\n        this.polling = false;\n        this.emitReserved(\"pollComplete\");\n\n        if (\"open\" === this.readyState) {\n          this.poll();\n        } else {}\n      }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */\n\n  }, {\n    key: \"doClose\",\n    value: function doClose() {\n      var _this4 = this;\n\n      var close = function close() {\n        _this4.write([{\n          type: \"close\"\n        }]);\n      };\n\n      if (\"open\" === this.readyState) {\n        close();\n      } else {\n        // in case we're trying to close while\n        // handshaking is in progress (GH-164)\n        this.once(\"open\", close);\n      }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */\n\n  }, {\n    key: \"write\",\n    value: function write(packets) {\n      var _this5 = this;\n\n      this.writable = false;\n      encodePayload(packets, function (data) {\n        _this5.doWrite(data, function () {\n          _this5.writable = true;\n\n          _this5.emitReserved(\"drain\");\n        });\n      });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"uri\",\n    value: function uri() {\n      var schema = this.opts.secure ? \"https\" : \"http\";\n      var query = this.query || {}; // cache busting is forced\n\n      if (false !== this.opts.timestampRequests) {\n        query[this.opts.timestampParam] = yeast();\n      }\n\n      if (!this.supportsBinary && !query.sid) {\n        query.b64 = 1;\n      }\n\n      return this.createUri(schema, query);\n    }\n    /**\n     * Creates a request.\n     *\n     * @param {String} method\n     * @private\n     */\n\n  }, {\n    key: \"request\",\n    value: function request() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      Object.assign(opts, {\n        xd: this.xd,\n        cookieJar: this.cookieJar\n      }, this.opts);\n      return new Request(this.uri(), opts);\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n\n  }, {\n    key: \"doWrite\",\n    value: function doWrite(data, fn) {\n      var _this6 = this;\n\n      var req = this.request({\n        method: \"POST\",\n        data: data\n      });\n      req.on(\"success\", fn);\n      req.on(\"error\", function (xhrStatus, context) {\n        _this6.onError(\"xhr post error\", xhrStatus, context);\n      });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"doPoll\",\n    value: function doPoll() {\n      var _this7 = this;\n\n      var req = this.request();\n      req.on(\"data\", this.onData.bind(this));\n      req.on(\"error\", function (xhrStatus, context) {\n        _this7.onError(\"xhr poll error\", xhrStatus, context);\n      });\n      this.pollXhr = req;\n    }\n  }]);\n\n  return Polling;\n}(Transport);\nexport var Request = /*#__PURE__*/function (_Emitter) {\n  _inherits(Request, _Emitter);\n\n  var _super2 = _createSuper(Request);\n\n  /**\n   * Request constructor\n   *\n   * @param {Object} options\n   * @package\n   */\n  function Request(uri, opts) {\n    var _this8;\n\n    _classCallCheck(this, Request);\n\n    _this8 = _super2.call(this);\n    installTimerFunctions(_assertThisInitialized(_this8), opts);\n    _this8.opts = opts;\n    _this8.method = opts.method || \"GET\";\n    _this8.uri = uri;\n    _this8.data = undefined !== opts.data ? opts.data : null;\n\n    _this8.create();\n\n    return _this8;\n  }\n  /**\n   * Creates the XHR object and sends the request.\n   *\n   * @private\n   */\n\n\n  _createClass(Request, [{\n    key: \"create\",\n    value: function create() {\n      var _this9 = this;\n\n      var _a;\n\n      var opts = pick(this.opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n      opts.xdomain = !!this.opts.xd;\n      var xhr = this.xhr = new XMLHttpRequest(opts);\n\n      try {\n        xhr.open(this.method, this.uri, true);\n\n        try {\n          if (this.opts.extraHeaders) {\n            xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n\n            for (var i in this.opts.extraHeaders) {\n              if (this.opts.extraHeaders.hasOwnProperty(i)) {\n                xhr.setRequestHeader(i, this.opts.extraHeaders[i]);\n              }\n            }\n          }\n        } catch (e) {}\n\n        if (\"POST\" === this.method) {\n          try {\n            xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n          } catch (e) {}\n        }\n\n        try {\n          xhr.setRequestHeader(\"Accept\", \"*/*\");\n        } catch (e) {}\n\n        (_a = this.opts.cookieJar) === null || _a === void 0 ? void 0 : _a.addCookies(xhr); // ie6 check\n\n        if (\"withCredentials\" in xhr) {\n          xhr.withCredentials = this.opts.withCredentials;\n        }\n\n        if (this.opts.requestTimeout) {\n          xhr.timeout = this.opts.requestTimeout;\n        }\n\n        xhr.onreadystatechange = function () {\n          var _a;\n\n          if (xhr.readyState === 3) {\n            (_a = _this9.opts.cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(xhr);\n          }\n\n          if (4 !== xhr.readyState) return;\n\n          if (200 === xhr.status || 1223 === xhr.status) {\n            _this9.onLoad();\n          } else {\n            // make sure the `error` event handler that's user-set\n            // does not throw in the same tick and gets caught here\n            _this9.setTimeoutFn(function () {\n              _this9.onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n            }, 0);\n          }\n        };\n\n        xhr.send(this.data);\n      } catch (e) {\n        // Need to defer since .create() is called directly from the constructor\n        // and thus the 'error' event can only be only bound *after* this exception\n        // occurs.  Therefore, also, we cannot throw here at all.\n        this.setTimeoutFn(function () {\n          _this9.onError(e);\n        }, 0);\n        return;\n      }\n\n      if (typeof document !== \"undefined\") {\n        this.index = Request.requestsCount++;\n        Request.requests[this.index] = this;\n      }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onError\",\n    value: function onError(err) {\n      this.emitReserved(\"error\", err, this.xhr);\n      this.cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"cleanup\",\n    value: function cleanup(fromError) {\n      if (\"undefined\" === typeof this.xhr || null === this.xhr) {\n        return;\n      }\n\n      this.xhr.onreadystatechange = empty;\n\n      if (fromError) {\n        try {\n          this.xhr.abort();\n        } catch (e) {}\n      }\n\n      if (typeof document !== \"undefined\") {\n        delete Request.requests[this.index];\n      }\n\n      this.xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onLoad\",\n    value: function onLoad() {\n      var data = this.xhr.responseText;\n\n      if (data !== null) {\n        this.emitReserved(\"data\", data);\n        this.emitReserved(\"success\");\n        this.cleanup();\n      }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */\n\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      this.cleanup();\n    }\n  }]);\n\n  return Request;\n}(Emitter);\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nif (typeof document !== \"undefined\") {\n  // @ts-ignore\n  if (typeof attachEvent === \"function\") {\n    // @ts-ignore\n    attachEvent(\"onunload\", unloadHandler);\n  } else if (typeof addEventListener === \"function\") {\n    var terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler() {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport { Transport } from \"../transport.js\";\nimport { nextTick } from \"./websocket-constructor.js\";\nimport { createPacketDecoderStream, createPacketEncoderStream } from \"engine.io-parser\";\nexport var WT = /*#__PURE__*/function (_Transport) {\n  _inherits(WT, _Transport);\n\n  var _super = _createSuper(WT);\n\n  function WT() {\n    _classCallCheck(this, WT);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(WT, [{\n    key: \"name\",\n    get: function get() {\n      return \"webtransport\";\n    }\n  }, {\n    key: \"doOpen\",\n    value: function doOpen() {\n      var _this = this;\n\n      // @ts-ignore\n      if (typeof WebTransport !== \"function\") {\n        return;\n      } // @ts-ignore\n\n\n      this.transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n      this.transport.closed.then(function () {\n        _this.onClose();\n      }).catch(function (err) {\n        _this.onError(\"webtransport error\", err);\n      }); // note: we could have used async/await, but that would require some additional polyfills\n\n      this.transport.ready.then(function () {\n        _this.transport.createBidirectionalStream().then(function (stream) {\n          var decoderStream = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, _this.socket.binaryType);\n          var reader = stream.readable.pipeThrough(decoderStream).getReader();\n          var encoderStream = createPacketEncoderStream();\n          encoderStream.readable.pipeTo(stream.writable);\n          _this.writer = encoderStream.writable.getWriter();\n\n          var read = function read() {\n            reader.read().then(function (_ref) {\n              var done = _ref.done,\n                  value = _ref.value;\n\n              if (done) {\n                return;\n              }\n\n              _this.onPacket(value);\n\n              read();\n            }).catch(function (err) {});\n          };\n\n          read();\n          var packet = {\n            type: \"open\"\n          };\n\n          if (_this.query.sid) {\n            packet.data = \"{\\\"sid\\\":\\\"\".concat(_this.query.sid, \"\\\"}\");\n          }\n\n          _this.writer.write(packet).then(function () {\n            return _this.onOpen();\n          });\n        });\n      });\n    }\n  }, {\n    key: \"write\",\n    value: function write(packets) {\n      var _this2 = this;\n\n      this.writable = false;\n\n      var _loop = function _loop(i) {\n        var packet = packets[i];\n        var lastPacket = i === packets.length - 1;\n\n        _this2.writer.write(packet).then(function () {\n          if (lastPacket) {\n            nextTick(function () {\n              _this2.writable = true;\n\n              _this2.emitReserved(\"drain\");\n            }, _this2.setTimeoutFn);\n          }\n        });\n      };\n\n      for (var i = 0; i < packets.length; i++) {\n        _loop(i);\n      }\n    }\n  }, {\n    key: \"doClose\",\n    value: function doClose() {\n      var _a;\n\n      (_a = this.transport) === null || _a === void 0 ? void 0 : _a.close();\n    }\n  }]);\n\n  return WT;\n}(Transport);","import { Polling } from \"./polling.js\";\nimport { WS } from \"./websocket.js\";\nimport { WT } from \"./webtransport.js\";\nexport var transports = {\n  websocket: WS,\n  webtransport: WT,\n  polling: Polling\n};","// imported from https://github.com/galkn/parseuri\n\n/**\n * Parses a URI\n *\n * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n *\n * See:\n * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n * - https://caniuse.com/url\n * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n *\n * History of the parse() method:\n * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nvar re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nvar parts = ['source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'];\nexport function parse(str) {\n  if (str.length > 2000) {\n    throw \"URI too long\";\n  }\n\n  var src = str,\n      b = str.indexOf('['),\n      e = str.indexOf(']');\n\n  if (b != -1 && e != -1) {\n    str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n  }\n\n  var m = re.exec(str || ''),\n      uri = {},\n      i = 14;\n\n  while (i--) {\n    uri[parts[i]] = m[i] || '';\n  }\n\n  if (b != -1 && e != -1) {\n    uri.source = src;\n    uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n    uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n    uri.ipv6uri = true;\n  }\n\n  uri.pathNames = pathNames(uri, uri['path']);\n  uri.queryKey = queryKey(uri, uri['query']);\n  return uri;\n}\n\nfunction pathNames(obj, path) {\n  var regx = /\\/{2,9}/g,\n      names = path.replace(regx, \"/\").split(\"/\");\n\n  if (path.slice(0, 1) == '/' || path.length === 0) {\n    names.splice(0, 1);\n  }\n\n  if (path.slice(-1) == '/') {\n    names.splice(names.length - 1, 1);\n  }\n\n  return names;\n}\n\nfunction queryKey(uri, query) {\n  var data = {};\n  query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n    if ($1) {\n      data[$1] = $2;\n    }\n  });\n  return data;\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport { transports } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nimport { defaultBinaryType } from \"./transports/websocket-constructor.js\";\nexport var Socket = /*#__PURE__*/function (_Emitter) {\n  _inherits(Socket, _Emitter);\n\n  var _super = _createSuper(Socket);\n\n  /**\n   * Socket constructor.\n   *\n   * @param {String|Object} uri - uri or options\n   * @param {Object} opts - options\n   */\n  function Socket(uri) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Socket);\n\n    _this = _super.call(this);\n    _this.binaryType = defaultBinaryType;\n    _this.writeBuffer = [];\n\n    if (uri && \"object\" === _typeof(uri)) {\n      opts = uri;\n      uri = null;\n    }\n\n    if (uri) {\n      uri = parse(uri);\n      opts.hostname = uri.host;\n      opts.secure = uri.protocol === \"https\" || uri.protocol === \"wss\";\n      opts.port = uri.port;\n      if (uri.query) opts.query = uri.query;\n    } else if (opts.host) {\n      opts.hostname = parse(opts.host).host;\n    }\n\n    installTimerFunctions(_assertThisInitialized(_this), opts);\n    _this.secure = null != opts.secure ? opts.secure : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n\n    if (opts.hostname && !opts.port) {\n      // if no port is specified manually, use the protocol default\n      opts.port = _this.secure ? \"443\" : \"80\";\n    }\n\n    _this.hostname = opts.hostname || (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n    _this.port = opts.port || (typeof location !== \"undefined\" && location.port ? location.port : _this.secure ? \"443\" : \"80\");\n    _this.transports = opts.transports || [\"polling\", \"websocket\", \"webtransport\"];\n    _this.writeBuffer = [];\n    _this.prevBufferLen = 0;\n    _this.opts = Object.assign({\n      path: \"/engine.io\",\n      agent: false,\n      withCredentials: false,\n      upgrade: true,\n      timestampParam: \"t\",\n      rememberUpgrade: false,\n      addTrailingSlash: true,\n      rejectUnauthorized: true,\n      perMessageDeflate: {\n        threshold: 1024\n      },\n      transportOptions: {},\n      closeOnBeforeunload: false\n    }, opts);\n    _this.opts.path = _this.opts.path.replace(/\\/$/, \"\") + (_this.opts.addTrailingSlash ? \"/\" : \"\");\n\n    if (typeof _this.opts.query === \"string\") {\n      _this.opts.query = decode(_this.opts.query);\n    } // set on handshake\n\n\n    _this.id = null;\n    _this.upgrades = null;\n    _this.pingInterval = null;\n    _this.pingTimeout = null; // set on heartbeat\n\n    _this.pingTimeoutTimer = null;\n\n    if (typeof addEventListener === \"function\") {\n      if (_this.opts.closeOnBeforeunload) {\n        // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n        // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n        // closed/reloaded)\n        _this.beforeunloadEventListener = function () {\n          if (_this.transport) {\n            // silently close the transport\n            _this.transport.removeAllListeners();\n\n            _this.transport.close();\n          }\n        };\n\n        addEventListener(\"beforeunload\", _this.beforeunloadEventListener, false);\n      }\n\n      if (_this.hostname !== \"localhost\") {\n        _this.offlineEventListener = function () {\n          _this.onClose(\"transport close\", {\n            description: \"network connection lost\"\n          });\n        };\n\n        addEventListener(\"offline\", _this.offlineEventListener, false);\n      }\n    }\n\n    _this.open();\n\n    return _this;\n  }\n  /**\n   * Creates transport of the given type.\n   *\n   * @param {String} name - transport name\n   * @return {Transport}\n   * @private\n   */\n\n\n  _createClass(Socket, [{\n    key: \"createTransport\",\n    value: function createTransport(name) {\n      var query = Object.assign({}, this.opts.query); // append engine.io protocol identifier\n\n      query.EIO = protocol; // transport name\n\n      query.transport = name; // session id if we already have one\n\n      if (this.id) query.sid = this.id;\n      var opts = Object.assign({}, this.opts, {\n        query: query,\n        socket: this,\n        hostname: this.hostname,\n        secure: this.secure,\n        port: this.port\n      }, this.opts.transportOptions[name]);\n      return new transports[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"open\",\n    value: function open() {\n      var _this2 = this;\n\n      var transport;\n\n      if (this.opts.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf(\"websocket\") !== -1) {\n        transport = \"websocket\";\n      } else if (0 === this.transports.length) {\n        // Emit error on next tick so it can be listened to\n        this.setTimeoutFn(function () {\n          _this2.emitReserved(\"error\", \"No transports available\");\n        }, 0);\n        return;\n      } else {\n        transport = this.transports[0];\n      }\n\n      this.readyState = \"opening\"; // Retry with the next transport if the transport is disabled (jsonp: false)\n\n      try {\n        transport = this.createTransport(transport);\n      } catch (e) {\n        this.transports.shift();\n        this.open();\n        return;\n      }\n\n      transport.open();\n      this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */\n\n  }, {\n    key: \"setTransport\",\n    value: function setTransport(transport) {\n      var _this3 = this;\n\n      if (this.transport) {\n        this.transport.removeAllListeners();\n      } // set up transport\n\n\n      this.transport = transport; // set up transport listeners\n\n      transport.on(\"drain\", this.onDrain.bind(this)).on(\"packet\", this.onPacket.bind(this)).on(\"error\", this.onError.bind(this)).on(\"close\", function (reason) {\n        return _this3.onClose(\"transport close\", reason);\n      });\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */\n\n  }, {\n    key: \"probe\",\n    value: function probe(name) {\n      var _this4 = this;\n\n      var transport = this.createTransport(name);\n      var failed = false;\n      Socket.priorWebsocketSuccess = false;\n\n      var onTransportOpen = function onTransportOpen() {\n        if (failed) return;\n        transport.send([{\n          type: \"ping\",\n          data: \"probe\"\n        }]);\n        transport.once(\"packet\", function (msg) {\n          if (failed) return;\n\n          if (\"pong\" === msg.type && \"probe\" === msg.data) {\n            _this4.upgrading = true;\n\n            _this4.emitReserved(\"upgrading\", transport);\n\n            if (!transport) return;\n            Socket.priorWebsocketSuccess = \"websocket\" === transport.name;\n\n            _this4.transport.pause(function () {\n              if (failed) return;\n              if (\"closed\" === _this4.readyState) return;\n              cleanup();\n\n              _this4.setTransport(transport);\n\n              transport.send([{\n                type: \"upgrade\"\n              }]);\n\n              _this4.emitReserved(\"upgrade\", transport);\n\n              transport = null;\n              _this4.upgrading = false;\n\n              _this4.flush();\n            });\n          } else {\n            var err = new Error(\"probe error\"); // @ts-ignore\n\n            err.transport = transport.name;\n\n            _this4.emitReserved(\"upgradeError\", err);\n          }\n        });\n      };\n\n      function freezeTransport() {\n        if (failed) return; // Any callback called by transport should be ignored since now\n\n        failed = true;\n        cleanup();\n        transport.close();\n        transport = null;\n      } // Handle any error that happens while probing\n\n\n      var onerror = function onerror(err) {\n        var error = new Error(\"probe error: \" + err); // @ts-ignore\n\n        error.transport = transport.name;\n        freezeTransport();\n\n        _this4.emitReserved(\"upgradeError\", error);\n      };\n\n      function onTransportClose() {\n        onerror(\"transport closed\");\n      } // When the socket is closed while we're probing\n\n\n      function onclose() {\n        onerror(\"socket closed\");\n      } // When the socket is upgraded while we're probing\n\n\n      function onupgrade(to) {\n        if (transport && to.name !== transport.name) {\n          freezeTransport();\n        }\n      } // Remove all listeners on the transport and on self\n\n\n      var cleanup = function cleanup() {\n        transport.removeListener(\"open\", onTransportOpen);\n        transport.removeListener(\"error\", onerror);\n        transport.removeListener(\"close\", onTransportClose);\n\n        _this4.off(\"close\", onclose);\n\n        _this4.off(\"upgrading\", onupgrade);\n      };\n\n      transport.once(\"open\", onTransportOpen);\n      transport.once(\"error\", onerror);\n      transport.once(\"close\", onTransportClose);\n      this.once(\"close\", onclose);\n      this.once(\"upgrading\", onupgrade);\n\n      if (this.upgrades.indexOf(\"webtransport\") !== -1 && name !== \"webtransport\") {\n        // favor WebTransport\n        this.setTimeoutFn(function () {\n          if (!failed) {\n            transport.open();\n          }\n        }, 200);\n      } else {\n        transport.open();\n      }\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onOpen\",\n    value: function onOpen() {\n      this.readyState = \"open\";\n      Socket.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n      this.emitReserved(\"open\");\n      this.flush(); // we check for `readyState` in case an `open`\n      // listener already closed the socket\n\n      if (\"open\" === this.readyState && this.opts.upgrade) {\n        var i = 0;\n        var l = this.upgrades.length;\n\n        for (; i < l; i++) {\n          this.probe(this.upgrades[i]);\n        }\n      }\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onPacket\",\n    value: function onPacket(packet) {\n      if (\"opening\" === this.readyState || \"open\" === this.readyState || \"closing\" === this.readyState) {\n        this.emitReserved(\"packet\", packet); // Socket is live - any packet counts\n\n        this.emitReserved(\"heartbeat\");\n        this.resetPingTimeout();\n\n        switch (packet.type) {\n          case \"open\":\n            this.onHandshake(JSON.parse(packet.data));\n            break;\n\n          case \"ping\":\n            this.sendPacket(\"pong\");\n            this.emitReserved(\"ping\");\n            this.emitReserved(\"pong\");\n            break;\n\n          case \"error\":\n            var err = new Error(\"server error\"); // @ts-ignore\n\n            err.code = packet.data;\n            this.onError(err);\n            break;\n\n          case \"message\":\n            this.emitReserved(\"data\", packet.data);\n            this.emitReserved(\"message\", packet.data);\n            break;\n        }\n      } else {}\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */\n\n  }, {\n    key: \"onHandshake\",\n    value: function onHandshake(data) {\n      this.emitReserved(\"handshake\", data);\n      this.id = data.sid;\n      this.transport.query.sid = data.sid;\n      this.upgrades = this.filterUpgrades(data.upgrades);\n      this.pingInterval = data.pingInterval;\n      this.pingTimeout = data.pingTimeout;\n      this.maxPayload = data.maxPayload;\n      this.onOpen(); // In case open handler closes socket\n\n      if (\"closed\" === this.readyState) return;\n      this.resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"resetPingTimeout\",\n    value: function resetPingTimeout() {\n      var _this5 = this;\n\n      this.clearTimeoutFn(this.pingTimeoutTimer);\n      this.pingTimeoutTimer = this.setTimeoutFn(function () {\n        _this5.onClose(\"ping timeout\");\n      }, this.pingInterval + this.pingTimeout);\n\n      if (this.opts.autoUnref) {\n        this.pingTimeoutTimer.unref();\n      }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onDrain\",\n    value: function onDrain() {\n      this.writeBuffer.splice(0, this.prevBufferLen); // setting prevBufferLen = 0 is very important\n      // for example, when upgrading, upgrade packet is sent over,\n      // and a nonzero prevBufferLen could cause problems on `drain`\n\n      this.prevBufferLen = 0;\n\n      if (0 === this.writeBuffer.length) {\n        this.emitReserved(\"drain\");\n      } else {\n        this.flush();\n      }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"flush\",\n    value: function flush() {\n      if (\"closed\" !== this.readyState && this.transport.writable && !this.upgrading && this.writeBuffer.length) {\n        var packets = this.getWritablePackets();\n        this.transport.send(packets); // keep track of current length of writeBuffer\n        // splice writeBuffer and callbackBuffer on `drain`\n\n        this.prevBufferLen = packets.length;\n        this.emitReserved(\"flush\");\n      }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n\n  }, {\n    key: \"getWritablePackets\",\n    value: function getWritablePackets() {\n      var shouldCheckPayloadSize = this.maxPayload && this.transport.name === \"polling\" && this.writeBuffer.length > 1;\n\n      if (!shouldCheckPayloadSize) {\n        return this.writeBuffer;\n      }\n\n      var payloadSize = 1; // first packet type\n\n      for (var i = 0; i < this.writeBuffer.length; i++) {\n        var data = this.writeBuffer[i].data;\n\n        if (data) {\n          payloadSize += byteLength(data);\n        }\n\n        if (i > 0 && payloadSize > this.maxPayload) {\n          return this.writeBuffer.slice(0, i);\n        }\n\n        payloadSize += 2; // separator + packet type\n      }\n\n      return this.writeBuffer;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} callback function.\n     * @return {Socket} for chaining.\n     */\n\n  }, {\n    key: \"write\",\n    value: function write(msg, options, fn) {\n      this.sendPacket(\"message\", msg, options, fn);\n      return this;\n    }\n  }, {\n    key: \"send\",\n    value: function send(msg, options, fn) {\n      this.sendPacket(\"message\", msg, options, fn);\n      return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */\n\n  }, {\n    key: \"sendPacket\",\n    value: function sendPacket(type, data, options, fn) {\n      if (\"function\" === typeof data) {\n        fn = data;\n        data = undefined;\n      }\n\n      if (\"function\" === typeof options) {\n        fn = options;\n        options = null;\n      }\n\n      if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n        return;\n      }\n\n      options = options || {};\n      options.compress = false !== options.compress;\n      var packet = {\n        type: type,\n        data: data,\n        options: options\n      };\n      this.emitReserved(\"packetCreate\", packet);\n      this.writeBuffer.push(packet);\n      if (fn) this.once(\"flush\", fn);\n      this.flush();\n    }\n    /**\n     * Closes the connection.\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      var _this6 = this;\n\n      var close = function close() {\n        _this6.onClose(\"forced close\");\n\n        _this6.transport.close();\n      };\n\n      var cleanupAndClose = function cleanupAndClose() {\n        _this6.off(\"upgrade\", cleanupAndClose);\n\n        _this6.off(\"upgradeError\", cleanupAndClose);\n\n        close();\n      };\n\n      var waitForUpgrade = function waitForUpgrade() {\n        // wait for upgrade to finish since we can't send packets while pausing a transport\n        _this6.once(\"upgrade\", cleanupAndClose);\n\n        _this6.once(\"upgradeError\", cleanupAndClose);\n      };\n\n      if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n        this.readyState = \"closing\";\n\n        if (this.writeBuffer.length) {\n          this.once(\"drain\", function () {\n            if (_this6.upgrading) {\n              waitForUpgrade();\n            } else {\n              close();\n            }\n          });\n        } else if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      }\n\n      return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onError\",\n    value: function onError(err) {\n      Socket.priorWebsocketSuccess = false;\n      this.emitReserved(\"error\", err);\n      this.onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onClose\",\n    value: function onClose(reason, description) {\n      if (\"opening\" === this.readyState || \"open\" === this.readyState || \"closing\" === this.readyState) {\n        // clear timers\n        this.clearTimeoutFn(this.pingTimeoutTimer); // stop event from firing again for transport\n\n        this.transport.removeAllListeners(\"close\"); // ensure transport won't stay open\n\n        this.transport.close(); // ignore further transport communication\n\n        this.transport.removeAllListeners();\n\n        if (typeof removeEventListener === \"function\") {\n          removeEventListener(\"beforeunload\", this.beforeunloadEventListener, false);\n          removeEventListener(\"offline\", this.offlineEventListener, false);\n        } // set ready state\n\n\n        this.readyState = \"closed\"; // clear session id\n\n        this.id = null; // emit close event\n\n        this.emitReserved(\"close\", reason, description); // clean buffers after, so users can still\n        // grab the buffers on `close` event\n\n        this.writeBuffer = [];\n        this.prevBufferLen = 0;\n      }\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */\n\n  }, {\n    key: \"filterUpgrades\",\n    value: function filterUpgrades(upgrades) {\n      var filteredUpgrades = [];\n      var i = 0;\n      var j = upgrades.length;\n\n      for (; i < j; i++) {\n        if (~this.transports.indexOf(upgrades[i])) filteredUpgrades.push(upgrades[i]);\n      }\n\n      return filteredUpgrades;\n    }\n  }]);\n\n  return Socket;\n}(Emitter);\nSocket.protocol = protocol;","import { Socket } from \"./socket.js\";\nexport { Socket };\nexport var protocol = Socket.protocol;\nexport { Transport, TransportError } from \"./transport.js\";\nexport { transports } from \"./transports/index.js\";\nexport { installTimerFunctions } from \"./util.js\";\nexport { parse } from \"./contrib/parseuri.js\";\nexport { nextTick } from \"./transports/websocket-constructor.js\";","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n\nvar isView = function isView(obj) {\n  return typeof ArrayBuffer.isView === \"function\" ? ArrayBuffer.isView(obj) : obj.buffer instanceof ArrayBuffer;\n};\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === \"function\" || typeof Blob !== \"undefined\" && toString.call(Blob) === \"[object BlobConstructor]\";\nvar withNativeFile = typeof File === \"function\" || typeof File !== \"undefined\" && toString.call(File) === \"[object FileConstructor]\";\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\n\nexport function isBinary(obj) {\n  return withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)) || withNativeBlob && obj instanceof Blob || withNativeFile && obj instanceof File;\n}\nexport function hasBinary(obj, toJSON) {\n  if (!obj || _typeof(obj) !== \"object\") {\n    return false;\n  }\n\n  if (Array.isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  if (isBinary(obj)) {\n    return true;\n  }\n\n  if (obj.toJSON && typeof obj.toJSON === \"function\" && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\n\nexport function deconstructPacket(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n\n  return {\n    packet: pack,\n    buffers: buffers\n  };\n}\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBinary(data)) {\n    var placeholder = {\n      _placeholder: true,\n      num: buffers.length\n    };\n    buffers.push(data);\n    return placeholder;\n  } else if (Array.isArray(data)) {\n    var newData = new Array(data.length);\n\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n\n    return newData;\n  } else if (_typeof(data) === \"object\" && !(data instanceof Date)) {\n    var _newData = {};\n\n    for (var key in data) {\n      if (Object.prototype.hasOwnProperty.call(data, key)) {\n        _newData[key] = _deconstructPacket(data[key], buffers);\n      }\n    }\n\n    return _newData;\n  }\n\n  return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\n\n\nexport function reconstructPacket(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  delete packet.attachments; // no longer useful\n\n  return packet;\n}\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder === true) {\n    var isIndexValid = typeof data.num === \"number\" && data.num >= 0 && data.num < buffers.length;\n\n    if (isIndexValid) {\n      return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n    } else {\n      throw new Error(\"illegal attachments\");\n    }\n  } else if (Array.isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (_typeof(data) === \"object\") {\n    for (var key in data) {\n      if (Object.prototype.hasOwnProperty.call(data, key)) {\n        data[key] = _reconstructPacket(data[key], buffers);\n      }\n    }\n  }\n\n  return data;\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * These strings must not be used as event names, as they have a special meaning.\n */\n\nvar RESERVED_EVENTS = [\"connect\", \"connect_error\", \"disconnect\", \"disconnecting\", \"newListener\", \"removeListener\" // used by the Node.js EventEmitter\n];\n/**\n * Protocol version.\n *\n * @public\n */\n\nexport var protocol = 5;\nexport var PacketType;\n\n(function (PacketType) {\n  PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n  PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n  PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n  PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n  PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n  PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n  PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\n\n\nexport var Encoder = /*#__PURE__*/function () {\n  /**\n   * Encoder constructor\n   *\n   * @param {function} replacer - custom replacer to pass down to JSON.parse\n   */\n  function Encoder(replacer) {\n    _classCallCheck(this, Encoder);\n\n    this.replacer = replacer;\n  }\n  /**\n   * Encode a packet as a single string if non-binary, or as a\n   * buffer sequence, depending on packet type.\n   *\n   * @param {Object} obj - packet object\n   */\n\n\n  _createClass(Encoder, [{\n    key: \"encode\",\n    value: function encode(obj) {\n      if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n        if (hasBinary(obj)) {\n          return this.encodeAsBinary({\n            type: obj.type === PacketType.EVENT ? PacketType.BINARY_EVENT : PacketType.BINARY_ACK,\n            nsp: obj.nsp,\n            data: obj.data,\n            id: obj.id\n          });\n        }\n      }\n\n      return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n\n  }, {\n    key: \"encodeAsString\",\n    value: function encodeAsString(obj) {\n      // first is type\n      var str = \"\" + obj.type; // attachments if we have them\n\n      if (obj.type === PacketType.BINARY_EVENT || obj.type === PacketType.BINARY_ACK) {\n        str += obj.attachments + \"-\";\n      } // if we have a namespace other than `/`\n      // we append it followed by a comma `,`\n\n\n      if (obj.nsp && \"/\" !== obj.nsp) {\n        str += obj.nsp + \",\";\n      } // immediately followed by the id\n\n\n      if (null != obj.id) {\n        str += obj.id;\n      } // json data\n\n\n      if (null != obj.data) {\n        str += JSON.stringify(obj.data, this.replacer);\n      }\n\n      return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n\n  }, {\n    key: \"encodeAsBinary\",\n    value: function encodeAsBinary(obj) {\n      var deconstruction = deconstructPacket(obj);\n      var pack = this.encodeAsString(deconstruction.packet);\n      var buffers = deconstruction.buffers;\n      buffers.unshift(pack); // add packet info to beginning of data list\n\n      return buffers; // write all the buffers\n    }\n  }]);\n\n  return Encoder;\n}(); // see https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript\n\nfunction isObject(value) {\n  return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\n\n\nexport var Decoder = /*#__PURE__*/function (_Emitter) {\n  _inherits(Decoder, _Emitter);\n\n  var _super = _createSuper(Decoder);\n\n  /**\n   * Decoder constructor\n   *\n   * @param {function} reviver - custom reviver to pass down to JSON.stringify\n   */\n  function Decoder(reviver) {\n    var _this;\n\n    _classCallCheck(this, Decoder);\n\n    _this = _super.call(this);\n    _this.reviver = reviver;\n    return _this;\n  }\n  /**\n   * Decodes an encoded packet string into packet JSON.\n   *\n   * @param {String} obj - encoded packet\n   */\n\n\n  _createClass(Decoder, [{\n    key: \"add\",\n    value: function add(obj) {\n      var packet;\n\n      if (typeof obj === \"string\") {\n        if (this.reconstructor) {\n          throw new Error(\"got plaintext data when reconstructing a packet\");\n        }\n\n        packet = this.decodeString(obj);\n        var isBinaryEvent = packet.type === PacketType.BINARY_EVENT;\n\n        if (isBinaryEvent || packet.type === PacketType.BINARY_ACK) {\n          packet.type = isBinaryEvent ? PacketType.EVENT : PacketType.ACK; // binary packet's json\n\n          this.reconstructor = new BinaryReconstructor(packet); // no attachments, labeled binary but no binary data to follow\n\n          if (packet.attachments === 0) {\n            _get(_getPrototypeOf(Decoder.prototype), \"emitReserved\", this).call(this, \"decoded\", packet);\n          }\n        } else {\n          // non-binary full packet\n          _get(_getPrototypeOf(Decoder.prototype), \"emitReserved\", this).call(this, \"decoded\", packet);\n        }\n      } else if (isBinary(obj) || obj.base64) {\n        // raw binary data\n        if (!this.reconstructor) {\n          throw new Error(\"got binary data when not reconstructing a packet\");\n        } else {\n          packet = this.reconstructor.takeBinaryData(obj);\n\n          if (packet) {\n            // received final buffer\n            this.reconstructor = null;\n\n            _get(_getPrototypeOf(Decoder.prototype), \"emitReserved\", this).call(this, \"decoded\", packet);\n          }\n        }\n      } else {\n        throw new Error(\"Unknown type: \" + obj);\n      }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n\n  }, {\n    key: \"decodeString\",\n    value: function decodeString(str) {\n      var i = 0; // look up type\n\n      var p = {\n        type: Number(str.charAt(0))\n      };\n\n      if (PacketType[p.type] === undefined) {\n        throw new Error(\"unknown packet type \" + p.type);\n      } // look up attachments if type binary\n\n\n      if (p.type === PacketType.BINARY_EVENT || p.type === PacketType.BINARY_ACK) {\n        var start = i + 1;\n\n        while (str.charAt(++i) !== \"-\" && i != str.length) {}\n\n        var buf = str.substring(start, i);\n\n        if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n          throw new Error(\"Illegal attachments\");\n        }\n\n        p.attachments = Number(buf);\n      } // look up namespace (if any)\n\n\n      if (\"/\" === str.charAt(i + 1)) {\n        var _start = i + 1;\n\n        while (++i) {\n          var c = str.charAt(i);\n          if (\",\" === c) break;\n          if (i === str.length) break;\n        }\n\n        p.nsp = str.substring(_start, i);\n      } else {\n        p.nsp = \"/\";\n      } // look up id\n\n\n      var next = str.charAt(i + 1);\n\n      if (\"\" !== next && Number(next) == next) {\n        var _start2 = i + 1;\n\n        while (++i) {\n          var _c = str.charAt(i);\n\n          if (null == _c || Number(_c) != _c) {\n            --i;\n            break;\n          }\n\n          if (i === str.length) break;\n        }\n\n        p.id = Number(str.substring(_start2, i + 1));\n      } // look up json data\n\n\n      if (str.charAt(++i)) {\n        var payload = this.tryParse(str.substr(i));\n\n        if (Decoder.isPayloadValid(p.type, payload)) {\n          p.data = payload;\n        } else {\n          throw new Error(\"invalid payload\");\n        }\n      }\n\n      return p;\n    }\n  }, {\n    key: \"tryParse\",\n    value: function tryParse(str) {\n      try {\n        return JSON.parse(str, this.reviver);\n      } catch (e) {\n        return false;\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value:\n    /**\n     * Deallocates a parser's resources\n     */\n    function destroy() {\n      if (this.reconstructor) {\n        this.reconstructor.finishedReconstruction();\n        this.reconstructor = null;\n      }\n    }\n  }], [{\n    key: \"isPayloadValid\",\n    value: function isPayloadValid(type, payload) {\n      switch (type) {\n        case PacketType.CONNECT:\n          return isObject(payload);\n\n        case PacketType.DISCONNECT:\n          return payload === undefined;\n\n        case PacketType.CONNECT_ERROR:\n          return typeof payload === \"string\" || isObject(payload);\n\n        case PacketType.EVENT:\n        case PacketType.BINARY_EVENT:\n          return Array.isArray(payload) && (typeof payload[0] === \"number\" || typeof payload[0] === \"string\" && RESERVED_EVENTS.indexOf(payload[0]) === -1);\n\n        case PacketType.ACK:\n        case PacketType.BINARY_ACK:\n          return Array.isArray(payload);\n      }\n    }\n  }]);\n\n  return Decoder;\n}(Emitter);\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\n\nvar BinaryReconstructor = /*#__PURE__*/function () {\n  function BinaryReconstructor(packet) {\n    _classCallCheck(this, BinaryReconstructor);\n\n    this.packet = packet;\n    this.buffers = [];\n    this.reconPack = packet;\n  }\n  /**\n   * Method to be called when binary data received from connection\n   * after a BINARY_EVENT packet.\n   *\n   * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n   * @return {null | Object} returns null if more binary data is expected or\n   *   a reconstructed packet object if all buffers have been received.\n   */\n\n\n  _createClass(BinaryReconstructor, [{\n    key: \"takeBinaryData\",\n    value: function takeBinaryData(binData) {\n      this.buffers.push(binData);\n\n      if (this.buffers.length === this.reconPack.attachments) {\n        // done with buffer list\n        var packet = reconstructPacket(this.reconPack, this.buffers);\n        this.finishedReconstruction();\n        return packet;\n      }\n\n      return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n\n  }, {\n    key: \"finishedReconstruction\",\n    value: function finishedReconstruction() {\n      this.reconPack = null;\n      this.buffers = [];\n    }\n  }]);\n\n  return BinaryReconstructor;\n}();","export function on(obj, ev, fn) {\n  obj.on(ev, fn);\n  return function subDestroy() {\n    obj.off(ev, fn);\n  };\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\n\nvar RESERVED_EVENTS = Object.freeze({\n  connect: 1,\n  connect_error: 1,\n  disconnect: 1,\n  disconnecting: 1,\n  // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n  newListener: 1,\n  removeListener: 1\n});\n/**\n * A Socket is the fundamental class for interacting with the server.\n *\n * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n *\n * @example\n * const socket = io();\n *\n * socket.on(\"connect\", () => {\n *   console.log(\"connected\");\n * });\n *\n * // send an event to the server\n * socket.emit(\"foo\", \"bar\");\n *\n * socket.on(\"foobar\", () => {\n *   // an event was received from the server\n * });\n *\n * // upon disconnection\n * socket.on(\"disconnect\", (reason) => {\n *   console.log(`disconnected due to ${reason}`);\n * });\n */\n\nexport var Socket = /*#__PURE__*/function (_Emitter) {\n  _inherits(Socket, _Emitter);\n\n  var _super = _createSuper(Socket);\n\n  /**\n   * `Socket` constructor.\n   */\n  function Socket(io, nsp, opts) {\n    var _this;\n\n    _classCallCheck(this, Socket);\n\n    _this = _super.call(this);\n    /**\n     * Whether the socket is currently connected to the server.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.connected); // true\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.connected); // false\n     * });\n     */\n\n    _this.connected = false;\n    /**\n     * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n     * be transmitted by the server.\n     */\n\n    _this.recovered = false;\n    /**\n     * Buffer for packets received before the CONNECT packet\n     */\n\n    _this.receiveBuffer = [];\n    /**\n     * Buffer for packets that will be sent once the socket is connected\n     */\n\n    _this.sendBuffer = [];\n    /**\n     * The queue of packets to be sent with retry in case of failure.\n     *\n     * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n     * @private\n     */\n\n    _this._queue = [];\n    /**\n     * A sequence to generate the ID of the {@link QueuedPacket}.\n     * @private\n     */\n\n    _this._queueSeq = 0;\n    _this.ids = 0;\n    /**\n     * A map containing acknowledgement handlers.\n     *\n     * The `withError` attribute is used to differentiate handlers that accept an error as first argument:\n     *\n     * - `socket.emit(\"test\", (err, value) => { ... })` with `ackTimeout` option\n     * - `socket.timeout(5000).emit(\"test\", (err, value) => { ... })`\n     * - `const value = await socket.emitWithAck(\"test\")`\n     *\n     * From those that don't:\n     *\n     * - `socket.emit(\"test\", (value) => { ... });`\n     *\n     * In the first case, the handlers will be called with an error when:\n     *\n     * - the timeout is reached\n     * - the socket gets disconnected\n     *\n     * In the second case, the handlers will be simply discarded upon disconnection, since the client will never receive\n     * an acknowledgement from the server.\n     *\n     * @private\n     */\n\n    _this.acks = {};\n    _this.flags = {};\n    _this.io = io;\n    _this.nsp = nsp;\n\n    if (opts && opts.auth) {\n      _this.auth = opts.auth;\n    }\n\n    _this._opts = Object.assign({}, opts);\n    if (_this.io._autoConnect) _this.open();\n    return _this;\n  }\n  /**\n   * Whether the socket is currently disconnected\n   *\n   * @example\n   * const socket = io();\n   *\n   * socket.on(\"connect\", () => {\n   *   console.log(socket.disconnected); // false\n   * });\n   *\n   * socket.on(\"disconnect\", () => {\n   *   console.log(socket.disconnected); // true\n   * });\n   */\n\n\n  _createClass(Socket, [{\n    key: \"disconnected\",\n    get: function get() {\n      return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n\n  }, {\n    key: \"subEvents\",\n    value: function subEvents() {\n      if (this.subs) return;\n      var io = this.io;\n      this.subs = [on(io, \"open\", this.onopen.bind(this)), on(io, \"packet\", this.onpacket.bind(this)), on(io, \"error\", this.onerror.bind(this)), on(io, \"close\", this.onclose.bind(this))];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */\n\n  }, {\n    key: \"active\",\n    get: function get() {\n      return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n\n  }, {\n    key: \"connect\",\n    value: function connect() {\n      if (this.connected) return this;\n      this.subEvents();\n      if (!this.io[\"_reconnecting\"]) this.io.open(); // ensure open\n\n      if (\"open\" === this.io._readyState) this.onopen();\n      return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */\n\n  }, {\n    key: \"open\",\n    value: function open() {\n      return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n\n  }, {\n    key: \"send\",\n    value: function send() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      args.unshift(\"message\");\n      this.emit.apply(this, args);\n      return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */\n\n  }, {\n    key: \"emit\",\n    value: function emit(ev) {\n      if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n        throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n      }\n\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      args.unshift(ev);\n\n      if (this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) {\n        this._addToQueue(args);\n\n        return this;\n      }\n\n      var packet = {\n        type: PacketType.EVENT,\n        data: args\n      };\n      packet.options = {};\n      packet.options.compress = this.flags.compress !== false; // event ack callback\n\n      if (\"function\" === typeof args[args.length - 1]) {\n        var id = this.ids++;\n        var ack = args.pop();\n\n        this._registerAckCallback(id, ack);\n\n        packet.id = id;\n      }\n\n      var isTransportWritable = this.io.engine && this.io.engine.transport && this.io.engine.transport.writable;\n      var discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected);\n\n      if (discardPacket) {} else if (this.connected) {\n        this.notifyOutgoingListeners(packet);\n        this.packet(packet);\n      } else {\n        this.sendBuffer.push(packet);\n      }\n\n      this.flags = {};\n      return this;\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"_registerAckCallback\",\n    value: function _registerAckCallback(id, ack) {\n      var _this2 = this;\n\n      var _a;\n\n      var timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n\n      if (timeout === undefined) {\n        this.acks[id] = ack;\n        return;\n      } // @ts-ignore\n\n\n      var timer = this.io.setTimeoutFn(function () {\n        delete _this2.acks[id];\n\n        for (var i = 0; i < _this2.sendBuffer.length; i++) {\n          if (_this2.sendBuffer[i].id === id) {\n            _this2.sendBuffer.splice(i, 1);\n          }\n        }\n\n        ack.call(_this2, new Error(\"operation has timed out\"));\n      }, timeout);\n\n      var fn = function fn() {\n        // @ts-ignore\n        _this2.io.clearTimeoutFn(timer);\n\n        for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          args[_key3] = arguments[_key3];\n        }\n\n        ack.apply(_this2, args);\n      };\n\n      fn.withError = true;\n      this.acks[id] = fn;\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */\n\n  }, {\n    key: \"emitWithAck\",\n    value: function emitWithAck(ev) {\n      var _this3 = this;\n\n      for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n        args[_key4 - 1] = arguments[_key4];\n      }\n\n      return new Promise(function (resolve, reject) {\n        var fn = function fn(arg1, arg2) {\n          return arg1 ? reject(arg1) : resolve(arg2);\n        };\n\n        fn.withError = true;\n        args.push(fn);\n\n        _this3.emit.apply(_this3, [ev].concat(args));\n      });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */\n\n  }, {\n    key: \"_addToQueue\",\n    value: function _addToQueue(args) {\n      var _this4 = this;\n\n      var ack;\n\n      if (typeof args[args.length - 1] === \"function\") {\n        ack = args.pop();\n      }\n\n      var packet = {\n        id: this._queueSeq++,\n        tryCount: 0,\n        pending: false,\n        args: args,\n        flags: Object.assign({\n          fromQueue: true\n        }, this.flags)\n      };\n      args.push(function (err) {\n        if (packet !== _this4._queue[0]) {\n          // the packet has already been acknowledged\n          return;\n        }\n\n        var hasError = err !== null;\n\n        if (hasError) {\n          if (packet.tryCount > _this4._opts.retries) {\n            _this4._queue.shift();\n\n            if (ack) {\n              ack(err);\n            }\n          }\n        } else {\n          _this4._queue.shift();\n\n          if (ack) {\n            for (var _len5 = arguments.length, responseArgs = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n              responseArgs[_key5 - 1] = arguments[_key5];\n            }\n\n            ack.apply(void 0, [null].concat(responseArgs));\n          }\n        }\n\n        packet.pending = false;\n        return _this4._drainQueue();\n      });\n\n      this._queue.push(packet);\n\n      this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @param force - whether to resend a packet that has not been acknowledged yet\n     *\n     * @private\n     */\n\n  }, {\n    key: \"_drainQueue\",\n    value: function _drainQueue() {\n      var force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (!this.connected || this._queue.length === 0) {\n        return;\n      }\n\n      var packet = this._queue[0];\n\n      if (packet.pending && !force) {\n        return;\n      }\n\n      packet.pending = true;\n      packet.tryCount++;\n      this.flags = packet.flags;\n      this.emit.apply(this, packet.args);\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n\n  }, {\n    key: \"packet\",\n    value: function packet(_packet) {\n      _packet.nsp = this.nsp;\n\n      this.io._packet(_packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onopen\",\n    value: function onopen() {\n      var _this5 = this;\n\n      if (typeof this.auth == \"function\") {\n        this.auth(function (data) {\n          _this5._sendConnectPacket(data);\n        });\n      } else {\n        this._sendConnectPacket(this.auth);\n      }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */\n\n  }, {\n    key: \"_sendConnectPacket\",\n    value: function _sendConnectPacket(data) {\n      this.packet({\n        type: PacketType.CONNECT,\n        data: this._pid ? Object.assign({\n          pid: this._pid,\n          offset: this._lastOffset\n        }, data) : data\n      });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n\n  }, {\n    key: \"onerror\",\n    value: function onerror(err) {\n      if (!this.connected) {\n        this.emitReserved(\"connect_error\", err);\n      }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n\n  }, {\n    key: \"onclose\",\n    value: function onclose(reason, description) {\n      this.connected = false;\n      delete this.id;\n      this.emitReserved(\"disconnect\", reason, description);\n\n      this._clearAcks();\n    }\n    /**\n     * Clears the acknowledgement handlers upon disconnection, since the client will never receive an acknowledgement from\n     * the server.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"_clearAcks\",\n    value: function _clearAcks() {\n      var _this6 = this;\n\n      Object.keys(this.acks).forEach(function (id) {\n        var isBuffered = _this6.sendBuffer.some(function (packet) {\n          return String(packet.id) === id;\n        });\n\n        if (!isBuffered) {\n          // note: handlers that do not accept an error as first argument are ignored here\n          var ack = _this6.acks[id];\n          delete _this6.acks[id];\n\n          if (ack.withError) {\n            ack.call(_this6, new Error(\"socket has been disconnected\"));\n          }\n        }\n      });\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n\n  }, {\n    key: \"onpacket\",\n    value: function onpacket(packet) {\n      var sameNamespace = packet.nsp === this.nsp;\n      if (!sameNamespace) return;\n\n      switch (packet.type) {\n        case PacketType.CONNECT:\n          if (packet.data && packet.data.sid) {\n            this.onconnect(packet.data.sid, packet.data.pid);\n          } else {\n            this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n          }\n\n          break;\n\n        case PacketType.EVENT:\n        case PacketType.BINARY_EVENT:\n          this.onevent(packet);\n          break;\n\n        case PacketType.ACK:\n        case PacketType.BINARY_ACK:\n          this.onack(packet);\n          break;\n\n        case PacketType.DISCONNECT:\n          this.ondisconnect();\n          break;\n\n        case PacketType.CONNECT_ERROR:\n          this.destroy();\n          var err = new Error(packet.data.message); // @ts-ignore\n\n          err.data = packet.data.data;\n          this.emitReserved(\"connect_error\", err);\n          break;\n      }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n\n  }, {\n    key: \"onevent\",\n    value: function onevent(packet) {\n      var args = packet.data || [];\n\n      if (null != packet.id) {\n        args.push(this.ack(packet.id));\n      }\n\n      if (this.connected) {\n        this.emitEvent(args);\n      } else {\n        this.receiveBuffer.push(Object.freeze(args));\n      }\n    }\n  }, {\n    key: \"emitEvent\",\n    value: function emitEvent(args) {\n      if (this._anyListeners && this._anyListeners.length) {\n        var listeners = this._anyListeners.slice();\n\n        var _iterator = _createForOfIteratorHelper(listeners),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var listener = _step.value;\n            listener.apply(this, args);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n\n      _get(_getPrototypeOf(Socket.prototype), \"emit\", this).apply(this, args);\n\n      if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n        this._lastOffset = args[args.length - 1];\n      }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"ack\",\n    value: function ack(id) {\n      var self = this;\n      var sent = false;\n      return function () {\n        // prevent double callbacks\n        if (sent) return;\n        sent = true;\n\n        for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n          args[_key6] = arguments[_key6];\n        }\n\n        self.packet({\n          type: PacketType.ACK,\n          id: id,\n          data: args\n        });\n      };\n    }\n    /**\n     * Called upon a server acknowledgement.\n     *\n     * @param packet\n     * @private\n     */\n\n  }, {\n    key: \"onack\",\n    value: function onack(packet) {\n      var ack = this.acks[packet.id];\n\n      if (typeof ack !== \"function\") {\n        return;\n      }\n\n      delete this.acks[packet.id]; // @ts-ignore FIXME ack is incorrectly inferred as 'never'\n\n      if (ack.withError) {\n        packet.data.unshift(null);\n      } // @ts-ignore\n\n\n      ack.apply(this, packet.data);\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onconnect\",\n    value: function onconnect(id, pid) {\n      this.id = id;\n      this.recovered = pid && this._pid === pid;\n      this._pid = pid; // defined only if connection state recovery is enabled\n\n      this.connected = true;\n      this.emitBuffered();\n      this.emitReserved(\"connect\");\n\n      this._drainQueue(true);\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n\n  }, {\n    key: \"emitBuffered\",\n    value: function emitBuffered() {\n      var _this7 = this;\n\n      this.receiveBuffer.forEach(function (args) {\n        return _this7.emitEvent(args);\n      });\n      this.receiveBuffer = [];\n      this.sendBuffer.forEach(function (packet) {\n        _this7.notifyOutgoingListeners(packet);\n\n        _this7.packet(packet);\n      });\n      this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"ondisconnect\",\n    value: function ondisconnect() {\n      this.destroy();\n      this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.subs) {\n        // clean subscriptions to avoid reconnections\n        this.subs.forEach(function (subDestroy) {\n          return subDestroy();\n        });\n        this.subs = undefined;\n      }\n\n      this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */\n\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      if (this.connected) {\n        this.packet({\n          type: PacketType.DISCONNECT\n        });\n      } // remove socket from pool\n\n\n      this.destroy();\n\n      if (this.connected) {\n        // fire events\n        this.onclose(\"io client disconnect\");\n      }\n\n      return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */\n\n  }, {\n    key: \"compress\",\n    value: function compress(_compress) {\n      this.flags.compress = _compress;\n      return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */\n\n  }, {\n    key: \"volatile\",\n    get: function get() {\n      this.flags.volatile = true;\n      return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n\n  }, {\n    key: \"timeout\",\n    value: function timeout(_timeout) {\n      this.flags.timeout = _timeout;\n      return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */\n\n  }, {\n    key: \"onAny\",\n    value: function onAny(listener) {\n      this._anyListeners = this._anyListeners || [];\n\n      this._anyListeners.push(listener);\n\n      return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n\n  }, {\n    key: \"prependAny\",\n    value: function prependAny(listener) {\n      this._anyListeners = this._anyListeners || [];\n\n      this._anyListeners.unshift(listener);\n\n      return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */\n\n  }, {\n    key: \"offAny\",\n    value: function offAny(listener) {\n      if (!this._anyListeners) {\n        return this;\n      }\n\n      if (listener) {\n        var listeners = this._anyListeners;\n\n        for (var i = 0; i < listeners.length; i++) {\n          if (listener === listeners[i]) {\n            listeners.splice(i, 1);\n            return this;\n          }\n        }\n      } else {\n        this._anyListeners = [];\n      }\n\n      return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n\n  }, {\n    key: \"listenersAny\",\n    value: function listenersAny() {\n      return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n\n  }, {\n    key: \"onAnyOutgoing\",\n    value: function onAnyOutgoing(listener) {\n      this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n\n      this._anyOutgoingListeners.push(listener);\n\n      return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n\n  }, {\n    key: \"prependAnyOutgoing\",\n    value: function prependAnyOutgoing(listener) {\n      this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n\n      this._anyOutgoingListeners.unshift(listener);\n\n      return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */\n\n  }, {\n    key: \"offAnyOutgoing\",\n    value: function offAnyOutgoing(listener) {\n      if (!this._anyOutgoingListeners) {\n        return this;\n      }\n\n      if (listener) {\n        var listeners = this._anyOutgoingListeners;\n\n        for (var i = 0; i < listeners.length; i++) {\n          if (listener === listeners[i]) {\n            listeners.splice(i, 1);\n            return this;\n          }\n        }\n      } else {\n        this._anyOutgoingListeners = [];\n      }\n\n      return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n\n  }, {\n    key: \"listenersAnyOutgoing\",\n    value: function listenersAnyOutgoing() {\n      return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n\n  }, {\n    key: \"notifyOutgoingListeners\",\n    value: function notifyOutgoingListeners(packet) {\n      if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n        var listeners = this._anyOutgoingListeners.slice();\n\n        var _iterator2 = _createForOfIteratorHelper(listeners),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var listener = _step2.value;\n            listener.apply(this, packet.data);\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      }\n    }\n  }]);\n\n  return Socket;\n}(Emitter);","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function () {\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n\n  if (this.jitter) {\n    var rand = Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n  }\n\n  return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\n\nBackoff.prototype.reset = function () {\n  this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\n\nBackoff.prototype.setMin = function (min) {\n  this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\n\nBackoff.prototype.setMax = function (max) {\n  this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\n\n\nBackoff.prototype.setJitter = function (jitter) {\n  this.jitter = jitter;\n};","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport { Socket as Engine, installTimerFunctions, nextTick } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nexport var Manager = /*#__PURE__*/function (_Emitter) {\n  _inherits(Manager, _Emitter);\n\n  var _super = _createSuper(Manager);\n\n  function Manager(uri, opts) {\n    var _this;\n\n    _classCallCheck(this, Manager);\n\n    var _a;\n\n    _this = _super.call(this);\n    _this.nsps = {};\n    _this.subs = [];\n\n    if (uri && \"object\" === _typeof(uri)) {\n      opts = uri;\n      uri = undefined;\n    }\n\n    opts = opts || {};\n    opts.path = opts.path || \"/socket.io\";\n    _this.opts = opts;\n    installTimerFunctions(_assertThisInitialized(_this), opts);\n\n    _this.reconnection(opts.reconnection !== false);\n\n    _this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n\n    _this.reconnectionDelay(opts.reconnectionDelay || 1000);\n\n    _this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n\n    _this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n\n    _this.backoff = new Backoff({\n      min: _this.reconnectionDelay(),\n      max: _this.reconnectionDelayMax(),\n      jitter: _this.randomizationFactor()\n    });\n\n    _this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n\n    _this._readyState = \"closed\";\n    _this.uri = uri;\n\n    var _parser = opts.parser || parser;\n\n    _this.encoder = new _parser.Encoder();\n    _this.decoder = new _parser.Decoder();\n    _this._autoConnect = opts.autoConnect !== false;\n    if (_this._autoConnect) _this.open();\n    return _this;\n  }\n\n  _createClass(Manager, [{\n    key: \"reconnection\",\n    value: function reconnection(v) {\n      if (!arguments.length) return this._reconnection;\n      this._reconnection = !!v;\n      return this;\n    }\n  }, {\n    key: \"reconnectionAttempts\",\n    value: function reconnectionAttempts(v) {\n      if (v === undefined) return this._reconnectionAttempts;\n      this._reconnectionAttempts = v;\n      return this;\n    }\n  }, {\n    key: \"reconnectionDelay\",\n    value: function reconnectionDelay(v) {\n      var _a;\n\n      if (v === undefined) return this._reconnectionDelay;\n      this._reconnectionDelay = v;\n      (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n      return this;\n    }\n  }, {\n    key: \"randomizationFactor\",\n    value: function randomizationFactor(v) {\n      var _a;\n\n      if (v === undefined) return this._randomizationFactor;\n      this._randomizationFactor = v;\n      (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n      return this;\n    }\n  }, {\n    key: \"reconnectionDelayMax\",\n    value: function reconnectionDelayMax(v) {\n      var _a;\n\n      if (v === undefined) return this._reconnectionDelayMax;\n      this._reconnectionDelayMax = v;\n      (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n      return this;\n    }\n  }, {\n    key: \"timeout\",\n    value: function timeout(v) {\n      if (!arguments.length) return this._timeout;\n      this._timeout = v;\n      return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n\n  }, {\n    key: \"maybeReconnectOnOpen\",\n    value: function maybeReconnectOnOpen() {\n      // Only try to reconnect if it's the first time we're connecting\n      if (!this._reconnecting && this._reconnection && this.backoff.attempts === 0) {\n        // keeps reconnection from firing twice for the same reconnection loop\n        this.reconnect();\n      }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n\n  }, {\n    key: \"open\",\n    value: function open(fn) {\n      var _this2 = this;\n\n      if (~this._readyState.indexOf(\"open\")) return this;\n      this.engine = new Engine(this.uri, this.opts);\n      var socket = this.engine;\n      var self = this;\n      this._readyState = \"opening\";\n      this.skipReconnect = false; // emit `open`\n\n      var openSubDestroy = on(socket, \"open\", function () {\n        self.onopen();\n        fn && fn();\n      });\n\n      var onError = function onError(err) {\n        _this2.cleanup();\n\n        _this2._readyState = \"closed\";\n\n        _this2.emitReserved(\"error\", err);\n\n        if (fn) {\n          fn(err);\n        } else {\n          // Only do this if there is no fn to handle the error\n          _this2.maybeReconnectOnOpen();\n        }\n      }; // emit `error`\n\n\n      var errorSub = on(socket, \"error\", onError);\n\n      if (false !== this._timeout) {\n        var timeout = this._timeout; // set timer\n\n        var timer = this.setTimeoutFn(function () {\n          openSubDestroy();\n          onError(new Error(\"timeout\"));\n          socket.close();\n        }, timeout);\n\n        if (this.opts.autoUnref) {\n          timer.unref();\n        }\n\n        this.subs.push(function () {\n          _this2.clearTimeoutFn(timer);\n        });\n      }\n\n      this.subs.push(openSubDestroy);\n      this.subs.push(errorSub);\n      return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n\n  }, {\n    key: \"connect\",\n    value: function connect(fn) {\n      return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onopen\",\n    value: function onopen() {\n      // clear old subs\n      this.cleanup(); // mark as open\n\n      this._readyState = \"open\";\n      this.emitReserved(\"open\"); // add new subs\n\n      var socket = this.engine;\n      this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onping\",\n    value: function onping() {\n      this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"ondata\",\n    value: function ondata(data) {\n      try {\n        this.decoder.add(data);\n      } catch (e) {\n        this.onclose(\"parse error\", e);\n      }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"ondecoded\",\n    value: function ondecoded(packet) {\n      var _this3 = this;\n\n      // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n      nextTick(function () {\n        _this3.emitReserved(\"packet\", packet);\n      }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onerror\",\n    value: function onerror(err) {\n      this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n\n  }, {\n    key: \"socket\",\n    value: function socket(nsp, opts) {\n      var socket = this.nsps[nsp];\n\n      if (!socket) {\n        socket = new Socket(this, nsp, opts);\n        this.nsps[nsp] = socket;\n      } else if (this._autoConnect && !socket.active) {\n        socket.connect();\n      }\n\n      return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n\n  }, {\n    key: \"_destroy\",\n    value: function _destroy(socket) {\n      var nsps = Object.keys(this.nsps);\n\n      for (var _i = 0, _nsps = nsps; _i < _nsps.length; _i++) {\n        var nsp = _nsps[_i];\n        var _socket = this.nsps[nsp];\n\n        if (_socket.active) {\n          return;\n        }\n      }\n\n      this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n\n  }, {\n    key: \"_packet\",\n    value: function _packet(packet) {\n      var encodedPackets = this.encoder.encode(packet);\n\n      for (var i = 0; i < encodedPackets.length; i++) {\n        this.engine.write(encodedPackets[i], packet.options);\n      }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"cleanup\",\n    value: function cleanup() {\n      this.subs.forEach(function (subDestroy) {\n        return subDestroy();\n      });\n      this.subs.length = 0;\n      this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"_close\",\n    value: function _close() {\n      this.skipReconnect = true;\n      this._reconnecting = false;\n      this.onclose(\"forced close\");\n      if (this.engine) this.engine.close();\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      return this._close();\n    }\n    /**\n     * Called upon engine close.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onclose\",\n    value: function onclose(reason, description) {\n      this.cleanup();\n      this.backoff.reset();\n      this._readyState = \"closed\";\n      this.emitReserved(\"close\", reason, description);\n\n      if (this._reconnection && !this.skipReconnect) {\n        this.reconnect();\n      }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"reconnect\",\n    value: function reconnect() {\n      var _this4 = this;\n\n      if (this._reconnecting || this.skipReconnect) return this;\n      var self = this;\n\n      if (this.backoff.attempts >= this._reconnectionAttempts) {\n        this.backoff.reset();\n        this.emitReserved(\"reconnect_failed\");\n        this._reconnecting = false;\n      } else {\n        var delay = this.backoff.duration();\n        this._reconnecting = true;\n        var timer = this.setTimeoutFn(function () {\n          if (self.skipReconnect) return;\n\n          _this4.emitReserved(\"reconnect_attempt\", self.backoff.attempts); // check again for the case socket closed in above events\n\n\n          if (self.skipReconnect) return;\n          self.open(function (err) {\n            if (err) {\n              self._reconnecting = false;\n              self.reconnect();\n\n              _this4.emitReserved(\"reconnect_error\", err);\n            } else {\n              self.onreconnect();\n            }\n          });\n        }, delay);\n\n        if (this.opts.autoUnref) {\n          timer.unref();\n        }\n\n        this.subs.push(function () {\n          _this4.clearTimeoutFn(timer);\n        });\n      }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onreconnect\",\n    value: function onreconnect() {\n      var attempt = this.backoff.attempts;\n      this._reconnecting = false;\n      this.backoff.reset();\n      this.emitReserved(\"reconnect\", attempt);\n    }\n  }]);\n\n  return Manager;\n}(Emitter);","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\n\nvar cache = {};\n\nfunction lookup(uri, opts) {\n  if (_typeof(uri) === \"object\") {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n  var parsed = url(uri, opts.path || \"/socket.io\");\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n  var newConnection = opts.forceNew || opts[\"force new connection\"] || false === opts.multiplex || sameNamespace;\n  var io;\n\n  if (newConnection) {\n    io = new Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      cache[id] = new Manager(source, opts);\n    }\n\n    io = cache[id];\n  }\n\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.queryKey;\n  }\n\n  return io.socket(parsed.path, opts);\n} // so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\n\n\nObject.assign(lookup, {\n  Manager: Manager,\n  Socket: Socket,\n  io: lookup,\n  connect: lookup\n});\n/**\n * Protocol version.\n *\n * @public\n */\n\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\n\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default };","import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\n\nexport function url(uri) {\n  var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n  var loc = arguments.length > 2 ? arguments[2] : undefined;\n  var obj = uri; // default to window.location\n\n  loc = loc || typeof location !== \"undefined\" && location;\n  if (null == uri) uri = loc.protocol + \"//\" + loc.host; // relative path support\n\n  if (typeof uri === \"string\") {\n    if (\"/\" === uri.charAt(0)) {\n      if (\"/\" === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      if (\"undefined\" !== typeof loc) {\n        uri = loc.protocol + \"//\" + uri;\n      } else {\n        uri = \"https://\" + uri;\n      }\n    } // parse\n\n\n    obj = parse(uri);\n  } // make sure we treat `localhost:80` and `localhost` equally\n\n\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = \"80\";\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = \"443\";\n    }\n  }\n\n  obj.path = obj.path || \"/\";\n  var ipv6 = obj.host.indexOf(\":\") !== -1;\n  var host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host; // define unique id\n\n  obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path; // define href\n\n  obj.href = obj.protocol + \"://\" + host + (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n  return obj;\n}","import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name getHours\n * @category Hour Helpers\n * @summary Get the hours of the given date.\n *\n * @description\n * Get the hours of the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the given date\n * @returns {Number} the hours\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Get the hours of 29 February 2012 11:45:00:\n * const result = getHours(new Date(2012, 1, 29, 11, 45))\n * //=> 11\n */\n\nexport default function getHours(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var hours = date.getHours();\n  return hours;\n}","import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name getMinutes\n * @category Minute Helpers\n * @summary Get the minutes of the given date.\n *\n * @description\n * Get the minutes of the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the given date\n * @returns {Number} the minutes\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Get the minutes of 29 February 2012 11:45:05:\n * const result = getMinutes(new Date(2012, 1, 29, 11, 45, 5))\n * //=> 45\n */\n\nexport default function getMinutes(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var minutes = date.getMinutes();\n  return minutes;\n}"],"sourceRoot":""}