(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{1511:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return i})),a.d(e,"d",(function(){return u})),a.d(e,"e",(function(){return d}));var n={1:{id:1,period:"day"},2:{id:2,period:"week"},3:{id:3,period:"month"},4:{id:4,period:"year"}},r={DAY:{id:"DAY",period:"day",translationKey:"REPORT.GROUPING_OPTIONS.DAY"},WEEK:{id:"WEEK",period:"week",translationKey:"REPORT.GROUPING_OPTIONS.WEEK"},MONTH:{id:"MONTH",period:"month",translationKey:"REPORT.GROUPING_OPTIONS.MONTH"},YEAR:{id:"YEAR",period:"year",translationKey:"REPORT.GROUPING_OPTIONS.YEAR"}},i={LAST_7_DAYS:{id:"LAST_7_DAYS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS",offset:6,groupByOptions:[r.DAY]},LAST_30_DAYS:{id:"LAST_30_DAYS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS",offset:29,groupByOptions:[r.DAY,r.WEEK]},LAST_3_MONTHS:{id:"LAST_3_MONTHS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_3_MONTHS",offset:89,groupByOptions:[r.DAY,r.WEEK,r.MONTH]},LAST_6_MONTHS:{id:"LAST_6_MONTHS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_6_MONTHS",offset:179,groupByOptions:[r.WEEK,r.MONTH]},LAST_YEAR:{id:"LAST_YEAR",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_YEAR",offset:364,groupByOptions:[r.WEEK,r.MONTH]},CUSTOM_DATE_RANGE:{id:"CUSTOM_DATE_RANGE",translationKey:"REPORT.DATE_RANGE_OPTIONS.CUSTOM_DATE_RANGE",offset:null,groupByOptions:[r.DAY,r.WEEK,r.MONTH,r.YEAR]}},o='PlusJakarta,-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif',s={type:"bar",backgroundColor:"rgb(31, 147, 255)"},l={datasets:[s],scales:{xAxes:[{ticks:{fontFamily:o},gridLines:{drawOnChartArea:!1}}],yAxes:[{id:"y-left",type:"linear",position:"left",ticks:{fontFamily:o,beginAtZero:!0,stepSize:1,callback:function(t,e,a){return e&&e!==a.length-1?"":t}},gridLines:{drawOnChartArea:!1}}]}},c={datasets:[s],scales:{xAxes:[{ticks:{fontFamily:o},gridLines:{drawOnChartArea:!1}}],yAxes:[{id:"y-left",type:"linear",position:"left",ticks:{fontFamily:o,callback:function(t,e,a){return e&&e!==a.length-1?"":function(t){if(!t)return"";if(t<60)return"".concat(t,"s");if(t<3600){var e=Math.floor(t/60);return"".concat(e,"m")}if(t<86400){var a=Math.floor(t/3600);return"".concat(a,"h")}var n=Math.floor(t/86400);return"".concat(n,"d")}(t)}},gridLines:{drawOnChartArea:!1}}]}},u={conversations_count:l,incoming_messages_count:l,outgoing_messages_count:l,avg_first_response_time:c,reply_time:c,avg_resolution_time:c,resolutions_count:l,bot_resolutions_count:l,bot_handoffs_count:l},d={open:"OPEN",unattended:"UNATTENDED",unassigned:"UNASSIGNED",pending:"PENDING",online:"ONLINE",busy:"BUSY",offline:"OFFLINE"}},1825:function(t,e,a){},1826:function(t,e,a){},2056:function(t,e,a){"use strict";a(1825)},2057:function(t,e,a){"use strict";a(1826)},2218:function(t,e,a){"use strict";a.r(e);a(23),a(24),a(10),a(21),a(29),a(30);var n=a(38),r=(a(51),a(81),a(44),a(140),a(1697)),i=a(198),o=a(869),s=a(248);function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){u(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function u(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var d={name:"AgentTable",components:{EmptyState:o.a,Spinner:i.a,VeTable:r.VeTable,VePagination:r.VePagination},props:{agents:{type:Array,default:function(){return[]}},agentMetrics:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},pageIndex:{type:Number,default:1}},computed:c(c({},Object(n.mapGetters)({isRTL:"accounts/isRTL"})),{},{tableData:function(){var t=this;return this.agentMetrics.filter((function(e){return t.getAgentInformation(e.id)})).map((function(e){var a=t.getAgentInformation(e.id);return{agent:a.name||a.available_name,email:a.email,thumbnail:a.thumbnail,open:e.metric.open||0,unattended:e.metric.unattended||0,status:a.availability_status}}))},columns:function(){var t=this.$createElement;return[{field:"agent",key:"agent",title:this.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.AGENT"),fixed:"left",align:this.isRTL?"right":"left",width:25,renderBodyCell:function(e){var a=e.row;return t("div",{class:"row-user-block"},[t(s.a,{attrs:{src:a.thumbnail,size:"32px",username:a.agent,status:a.status}}),t("div",{class:"user-block"},[t("h6",{class:"overflow-hidden title whitespace-nowrap text-ellipsis"},[a.agent]),t("span",{class:"sub-title"},[a.email])])])}},{field:"open",key:"open",title:this.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.OPEN"),align:this.isRTL?"right":"left",width:10},{field:"unattended",key:"unattended",title:this.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.UNATTENDED"),align:this.isRTL?"right":"left",width:10}]}}),methods:{onPageNumberChange:function(t){this.$emit("pageChange",t)},getAgentInformation:function(t){var e;return null===(e=this.agents)||void 0===e?void 0:e.find((function(e){return e.id===Number(t)}))}}},f=(a(2056),a(8)),g=Object(f.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"agent-table-container"},[e("VeTable",{attrs:{"max-height":"calc(100vh - 21.875rem)","fixed-header":"",columns:t.columns,"table-data":t.tableData}}),t._v(" "),t.isLoading?e("div",{staticClass:"agents-loader"},[e("Spinner"),t._v(" "),e("span",[t._v(t._s(t.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.LOADING_MESSAGE")))])],1):t.isLoading||t.agentMetrics.length?t._e():e("EmptyState",{attrs:{title:t.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.NO_AGENTS")}}),t._v(" "),t.agentMetrics.length>0?e("div",{staticClass:"table-pagination"},[e("VePagination",{attrs:{total:t.agents.length,"page-index":t.pageIndex,"page-size":25,"page-size-option":[25]},on:{"on-page-number-change":t.onPageNumberChange}})],1):t._e()],1)}),[],!1,null,"2eb0e434",null).exports,p={name:"MetricCard",components:{Spinner:i.a},props:{header:{type:String,default:""},isLoading:{type:Boolean,default:!1},loadingMessage:{type:String,default:""}}},O=(a(2057),Object(f.a)(p,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"metric-card flex flex-col m-2 p-4 border border-solid overflow-hidden rounded-md flex-grow shadow-sm text-slate-700 dark:text-slate-100 bg-white dark:bg-slate-800 border-slate-75 dark:border-slate-700 min-h-[10rem]"},[e("div",{staticClass:"card-header"},[t._t("header",(function(){return[e("div",{staticClass:"flex items-center gap-0.5 flex-row"},[e("h5",{staticClass:"mb-0 text-slate-800 dark:text-slate-100 font-medium text-xl"},[t._v("\n          "+t._s(t.header)+"\n        ")]),t._v(" "),e("span",{staticClass:"flex flex-row items-center pr-2 pl-2 m-1 rounded-sm text-green-400 dark:text-green-400 text-xs bg-green-100/30 dark:bg-green-100/20"},[e("span",{staticClass:"bg-green-500 dark:bg-green-500 h-1 w-1 rounded-full mr-1 rtl:mr-0 rtl:ml-0"}),t._v(" "),e("span",[t._v("\n            "+t._s(t.$t("OVERVIEW_REPORTS.LIVE"))+"\n          ")])])]),t._v(" "),e("div",{staticClass:"card-header--control-area"},[t._t("control")],2)]}))],2),t._v(" "),t.isLoading?t.isLoading?e("div",{staticClass:"items-center flex text-base justify-center px-12 py-6"},[e("Spinner"),t._v(" "),e("span",{staticClass:"text-slate-300 dark:text-slate-200"},[t._v("\n      "+t._s(t.loadingMessage)+"\n    ")])],1):t._e():e("div",{staticClass:"card-body max-w-full w-full ml-auto mr-auto justify-between flex"},[t._t("default")],2)])}),[],!1,null,"9597fa24",null).exports),_=a(1511),E=(a(285),a(41),a(32),a(9),a(34),a(14),a(17),a(20),a(65),a(59),a(5)),m=a(290),A=a(15),v=a(11);var h=a(275),b=a(751),T=a(356);function S(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return y(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return y(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var R={__name:"Heatmap",props:{heatData:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1}},setup:function(t){var e=t,a=Object(T.a)().t,n=Object(E.computed)((function(){return Object(b.b)(e.heatData)})),r=Object(E.computed)((function(){var t=e.heatData.map((function(t){return t.value}));return Object(h.h)(t,[.2,.4,.6,.8,.9,.99])}));return{__sfc:!0,props:e,t:a,processedData:n,quantileRange:r,getCountTooltip:function(t){return t?a(1===t?"OVERVIEW_REPORTS.CONVERSATION_HEATMAP.CONVERSATION":"OVERVIEW_REPORTS.CONVERSATION_HEATMAP.CONVERSATIONS",{count:t}):a("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.NO_CONVERSATIONS")},formatDate:function(t){return Object(m.a)(new Date(t),"MMM d, yyyy")},getDayOfTheWeek:function(t){var e=function(t){return Object(v.a)(1,arguments),Object(A.a)(t).getDay()}(t);return[a("DAYS_OF_WEEK.SUNDAY"),a("DAYS_OF_WEEK.MONDAY"),a("DAYS_OF_WEEK.TUESDAY"),a("DAYS_OF_WEEK.WEDNESDAY"),a("DAYS_OF_WEEK.THURSDAY"),a("DAYS_OF_WEEK.FRIDAY"),a("DAYS_OF_WEEK.SATURDAY")][e]},getHeatmapLevelClass:function(t){if(!t)return"outline-slate-100 dark:outline-slate-700 dark:bg-slate-700/40 bg-slate-50/50";var e=[].concat(S(r.value),[1/0]).findIndex((function(e){return t<=e&&t>0}));return e>6&&(e=5),0===e?"outline-slate-100 dark:outline-slate-700 dark:bg-slate-700/40 bg-slate-50/50":["bg-woot-50 dark:bg-woot-800/40 dark:outline-woot-800/80","bg-woot-100 dark:bg-woot-800/30 dark:outline-woot-800/80","bg-woot-200 dark:bg-woot-500/40 dark:outline-woot-700/80","bg-woot-300 dark:bg-woot-500/60 dark:outline-woot-600/80","bg-woot-600 dark:bg-woot-500/80 dark:outline-woot-500/80","bg-woot-800 dark:bg-woot-500 dark:outline-woot-400/80"][e-1]}}}},C=R,w=Object(f.a)(C,(function(){var t=this,e=t._self._c,a=t._self._setupProxy;return e("div",{staticClass:"grid relative w-full gap-x-4 gap-y-2.5 overflow-y-scroll md:overflow-visible grid-cols-[80px_1fr] min-h-72"},[t.isLoading?[e("div",{staticClass:"grid gap-[5px] flex-shrink-0"},t._l(7,(function(t){return e("div",{key:t,staticClass:"w-full rounded-sm bg-slate-100 dark:bg-slate-900 animate-loader-pulse h-8 min-w-[70px]"})})),0),t._v(" "),e("div",{staticClass:"grid gap-[5px] w-full min-w-[700px]"},t._l(7,(function(a){return e("div",{key:a,staticClass:"grid gap-[5px] grid-cols-[repeat(24,_1fr)]"},t._l(24,(function(t){return e("div",{key:t,staticClass:"w-full h-8 rounded-sm bg-slate-100 dark:bg-slate-900 animate-loader-pulse"})})),0)})),0),t._v(" "),e("div"),t._v(" "),e("div",{staticClass:"grid grid-cols-[repeat(24,_1fr)] gap-[5px] w-full text-[8px] font-semibold h-5 text-slate-800 dark:text-slate-200"},t._l(24,(function(a){return e("div",{key:a,staticClass:"flex items-center justify-center"},[t._v("\n        "+t._s(a-1)+" \u2013 "+t._s(a)+"\n      ")])})),0)]:[e("div",{staticClass:"grid gap-[5px] flex-shrink-0"},t._l(a.processedData.keys(),(function(n){return e("div",{key:n,staticClass:"h-8 min-w-[70px] text-slate-800 dark:text-slate-200 text-[10px] font-semibold flex flex-col items-end justify-center"},[t._v("\n        "+t._s(a.getDayOfTheWeek(new Date(n)))+"\n        "),e("time",{staticClass:"font-normal text-slate-700 dark:text-slate-200"},[t._v("\n          "+t._s(a.formatDate(n))+"\n        ")])])})),0),t._v(" "),e("div",{staticClass:"grid gap-[5px] w-full min-w-[700px]"},t._l(a.processedData.keys(),(function(n){return e("div",{key:n,staticClass:"grid gap-[5px] grid-cols-[repeat(24,_1fr)]"},t._l(a.processedData.get(n),(function(t){return e("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:a.getCountTooltip(t.value),expression:"getCountTooltip(data.value)",modifiers:{top:!0}}],key:t.timestamp,staticClass:"h-8 rounded-sm shadow-inner dark:outline dark:outline-1 shadow-black",class:a.getHeatmapLevelClass(t.value)})})),0)})),0),t._v(" "),e("div"),t._v(" "),e("div",{staticClass:"grid grid-cols-[repeat(24,_1fr)] gap-[5px] w-full text-[8px] font-semibold h-5 text-slate-800 dark:text-slate-200"},t._l(24,(function(a){return e("div",{key:a,staticClass:"flex items-center justify-center"},[t._v("\n        "+t._s(a-1)+" \u2013 "+t._s(a)+"\n      ")])})),0)]],2)}),[],!1,null,null,null).exports,N=a(529),x=a(716),D=a(165),P=a(723);function k(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function I(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?k(Object(a),!0).forEach((function(e){M(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function M(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var V={name:"LiveReports",components:{AgentTable:g,MetricCard:O,ReportHeatmap:w},data:function(){return{pageIndex:1}},computed:I(I({},Object(n.mapGetters)({agentStatus:"agents/getAgentStatus",agents:"agents/getAgents",accountConversationMetric:"getAccountConversationMetric",agentConversationMetric:"getAgentConversationMetric",accountConversationHeatmap:"getAccountConversationHeatmapData",uiFlags:"getOverviewUIFlags"})),{},{agentStatusMetrics:function(){var t=this,e={};return Object.keys(this.agentStatus).forEach((function(a){var n=t.$t("OVERVIEW_REPORTS.AGENT_STATUS.".concat(_.e[a]));e[n]=t.agentStatus[a]})),e},conversationMetrics:function(){var t=this,e={};return Object.keys(this.accountConversationMetric).forEach((function(a){var n=t.$t("OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS.".concat(_.e[a]));e[n]=t.accountConversationMetric[a]})),e}}),mounted:function(){var t=this;this.$store.dispatch("agents/get"),this.fetchAllData(),this.$emitter.on("fetch_overview_reports",(function(){t.fetchAllData()}))},methods:{fetchAllData:function(){this.fetchAccountConversationMetric(),this.fetchAgentConversationMetric(),this.fetchHeatmapData()},downloadHeatmapData:function(){var t=Object(N.a)(new Date);this.$store.dispatch("downloadAccountConversationHeatmap",{to:Object(x.a)(t)})},fetchHeatmapData:function(){if(!this.uiFlags.isFetchingAccountConversationsHeatmap){var t=Object(N.a)(new Date),e=Object(D.a)(Object(P.a)(t,6));this.accountConversationHeatmap.length&&(t=Object(N.a)(new Date),e=Object(D.a)(t)),this.$store.dispatch("fetchAccountConversationHeatmap",{metric:"conversations_count",from:Object(x.a)(e),to:Object(x.a)(t),groupBy:"hour",businessHours:!1})}},fetchAccountConversationMetric:function(){this.$store.dispatch("fetchAccountConversationMetric",{type:"account"})},fetchAgentConversationMetric:function(){this.$store.dispatch("fetchAgentConversationMetric",{type:"agent",page:this.pageIndex})},onPageNumberChange:function(t){this.pageIndex=t,this.fetchAgentConversationMetric()}}},j=Object(f.a)(V,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-1 p-4 overflow-auto"},[e("div",{staticClass:"flex flex-col items-center md:flex-row"},[e("div",{staticClass:"flex-1 w-full max-w-full md:w-[65%] md:max-w-[65%] conversation-metric"},[e("MetricCard",{attrs:{header:t.$t("OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS.HEADER"),"is-loading":t.uiFlags.isFetchingAccountConversationMetric,"loading-message":t.$t("OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS.LOADING_MESSAGE")}},t._l(t.conversationMetrics,(function(a,n,r){return e("div",{key:r,staticClass:"flex-1 min-w-0 metric-content"},[e("h3",{staticClass:"heading"},[t._v("\n            "+t._s(n)+"\n          ")]),t._v(" "),e("p",{staticClass:"metric"},[t._v(t._s(a))])])})),0)],1),t._v(" "),e("div",{staticClass:"flex-1 w-full max-w-full md:w-[35%] md:max-w-[35%]"},[e("MetricCard",{attrs:{header:t.$t("OVERVIEW_REPORTS.AGENT_STATUS.HEADER")}},t._l(t.agentStatusMetrics,(function(a,n,r){return e("div",{key:r,staticClass:"flex-1 min-w-0 metric-content"},[e("h3",{staticClass:"heading"},[t._v("\n            "+t._s(n)+"\n          ")]),t._v(" "),e("p",{staticClass:"metric"},[t._v(t._s(a))])])})),0)],1)]),t._v(" "),e("div",{staticClass:"flex flex-row flex-wrap max-w-full ml-auto mr-auto"},[e("MetricCard",{attrs:{header:t.$t("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.HEADER")},scopedSlots:t._u([{key:"control",fn:function(){return[e("woot-button",{attrs:{icon:"arrow-download",size:"small",variant:"smooth","color-scheme":"secondary"},on:{click:t.downloadHeatmapData}},[t._v("\n          "+t._s(t.$t("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.DOWNLOAD_REPORT"))+"\n        ")])]},proxy:!0}])},[t._v(" "),e("ReportHeatmap",{attrs:{"heat-data":t.accountConversationHeatmap,"is-loading":t.uiFlags.isFetchingAccountConversationsHeatmap}})],1)],1),t._v(" "),e("div",{staticClass:"flex flex-row flex-wrap max-w-full ml-auto mr-auto"},[e("MetricCard",{attrs:{header:t.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.HEADER")}},[e("AgentTable",{attrs:{agents:t.agents,"agent-metrics":t.agentConversationMetric,"page-index":t.pageIndex,"is-loading":t.uiFlags.isFetchingAgentConversationMetric},on:{pageChange:t.onPageNumberChange}})],1)],1)])}),[],!1,null,null,null);e.default=j.exports}}]);
//# sourceMappingURL=64-5a396299728937a352bb.chunk.js.map