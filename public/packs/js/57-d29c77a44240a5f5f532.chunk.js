(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{1505:function(t,e,n){"use strict";var a=n(250),o={__name:"BackButton",props:{backUrl:{type:[String,Object],default:""},buttonLabel:{type:String,default:""},compact:{type:Boolean,default:!1}},setup:function(t){var e=t,n=e.compact?"text-sm text-slate-600 dark:text-slate-300":"text-base text-woot-500 dark:text-woot-500";return{__sfc:!0,props:e,goBack:function(){""!==e.backUrl?a.a.push(e.backUrl):a.a.go(-1)},buttonStyleClass:n}}},r=n(8),i=Object(r.a)(o,(function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("button",{staticClass:"flex items-center p-0 font-normal cursor-pointer",class:n.buttonStyleClass,on:{"!click":function(t){return n.goBack.apply(null,arguments)}}},[e("fluent-icon",{staticClass:"-ml-1",attrs:{icon:"chevron-left"}}),t._v("\n  "+t._s(t.buttonLabel||t.$t("GENERAL_SETTINGS.BACK"))+"\n")],1)}),[],!1,null,null,null);e.a=i.exports},1506:function(t,e,n){"use strict";var a=n(197),o=n(5),r={__name:"CustomBrandPolicyWrapper",props:{showOnCustomBrandedInstance:{type:Boolean,default:!0}},setup:function(t){var e=t,n=Object(a.c)(),r=n["globalConfig/isACustomBrandedInstance"],i=Object(o.computed)((function(){return e.showOnCustomBrandedInstance||!r.value}));return{__sfc:!0,props:e,getters:n,isACustomBrandedInstance:r,shouldShowContent:i}}},i=n(8),s=Object(i.a)(r,(function(){var t=this,e=t._self._c;return t._self._setupProxy.shouldShowContent?e("div",[t._t("default")],2):t._e()}),[],!1,null,null,null).exports,u={agent_bots:"https://chwt.app/hc/agent-bots",agents:"https://chwt.app/hc/agents",audit_logs:"https://chwt.app/hc/audit-logs",campaigns:"https://chwt.app/hc/campaigns",canned_responses:"https://chwt.app/hc/canned",channel_email:"https://chwt.app/hc/email",channel_facebook:"https://chwt.app/hc/fb",custom_attributes:"https://chwt.app/hc/custom-attributes",dashboard_apps:"https://chwt.app/hc/dashboard-apps",help_center:"https://chwt.app/hc/help-center",inboxes:"https://chwt.app/hc/inboxes",integrations:"https://chwt.app/hc/integrations",labels:"https://chwt.app/hc/labels",macros:"https://chwt.app/hc/macros",message_reply_to:"https://chwt.app/hc/reply-to",reports:"https://chwt.app/hc/reports",sla:"https://chwt.app/hc/sla",captain:"https://chwt.app/hc/captain",team_management:"https://chwt.app/hc/teams",webhook:"https://chwt.app/hc/webhooks"};var l=n(1505),c={__name:"BaseSettingsHeader",props:{title:{type:String,required:!0},description:{type:String,required:!0},iconName:{type:String,default:""},linkText:{type:String,default:""},featureName:{type:String,default:""},backButtonLabel:{type:String,default:""}},setup:function(t){var e;return{__sfc:!0,props:t,helpURL:(e=t.featureName,u[e]),openInNewTab:function(t){t&&window.open(t,"_blank","noopener noreferrer")},CustomBrandPolicyWrapper:s,BackButton:l.a}}},p=Object(i.a)(c,(function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",{staticClass:"flex flex-col items-start w-full gap-2 pt-4"},[t.backButtonLabel?e(n.BackButton,{attrs:{compact:"","button-label":t.backButtonLabel}}):t._e(),t._v(" "),e("div",{staticClass:"flex items-center justify-between w-full gap-4"},[e("div",{staticClass:"flex items-center gap-3"},[t.iconName?e("div",{staticClass:"flex items-center w-10 h-10 p-1 rounded-full bg-woot-25/60 dark:bg-woot-900/60"},[e("div",{staticClass:"flex items-center justify-center w-full h-full rounded-full bg-woot-75/70 dark:bg-woot-800/40"},[e("fluent-icon",{staticClass:"flex-shrink-0 text-woot-500 dark:text-woot-500",attrs:{size:"14",icon:t.iconName,type:"outline"}})],1)]):t._e(),t._v(" "),e("h1",{staticClass:"text-2xl font-semibold font-interDisplay tracking-[0.3px] text-slate-900 dark:text-slate-25"},[t._v("\n        "+t._s(t.title)+"\n      ")])]),t._v(" "),e("div",{staticClass:"hidden gap-2 sm:flex"},[t._t("actions")],2)]),t._v(" "),e("div",{staticClass:"flex flex-col gap-3 text-slate-600 dark:text-slate-300 w-full"},[e("p",{staticClass:"mb-0 text-base font-normal line-clamp-5 sm:line-clamp-none max-w-3xl tracking-[-0.1px]"},[t._t("description",(function(){return[t._v(t._s(t.description))]}))],2),t._v(" "),e(n.CustomBrandPolicyWrapper,{attrs:{"show-on-custom-branded-instance":!1}},[n.helpURL&&t.linkText?e("a",{staticClass:"sm:inline-flex hidden gap-1 w-fit items-center text-woot-500 dark:text-woot-500 text-sm font-medium hover:underline",attrs:{href:n.helpURL,target:"_blank",rel:"noopener noreferrer"}},[t._v("\n        "+t._s(t.linkText)+"\n        "),e("fluent-icon",{staticClass:"flex-shrink-0 text-woot-500 dark:text-woot-500",attrs:{size:"16",icon:"chevron-right",type:"outline"}})],1):t._e()])],1),t._v(" "),e("div",{staticClass:"flex items-start justify-start w-full gap-3 sm:hidden flex-wrap"},[t._t("actions"),t._v(" "),e(n.CustomBrandPolicyWrapper,{attrs:{"show-on-custom-branded-instance":!1}},[n.helpURL&&t.linkText?e("woot-button",{staticClass:"flex-row-reverse rounded-md min-w-0 !bg-slate-50 !text-slate-900 dark:!text-white dark:!bg-slate-800",attrs:{"color-scheme":"secondary",icon:"arrow-outwards"},on:{click:function(t){return n.openInNewTab(n.helpURL)}}},[t._v("\n        "+t._s(t.linkText)+"\n      ")]):t._e()],1)],2)],1)}),[],!1,null,null,null);e.a=p.exports},1508:function(t,e,n){"use strict";var a={__name:"SettingsLayout",props:{isLoading:{type:Boolean,default:!1},noRecordsFound:{type:Boolean,default:!1},loadingMessage:{type:String,default:""},noRecordsMessage:{type:String,default:""}},setup:function(t){return{__sfc:!0}}},o=n(8),r=Object(o.a)(a,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"flex flex-col w-full h-full gap-10 font-inter"},[t._t("header"),t._v(" "),e("div",[t._t("preBody"),t._v(" "),t.isLoading?t._t("loading",(function(){return[e("woot-loading-state",{attrs:{message:t.loadingMessage}})]})):t.noRecordsFound?e("p",{staticClass:"flex-1 text-slate-700 dark:text-slate-100 flex items-center justify-center text-base"},[t._v("\n      "+t._s(t.noRecordsMessage)+"\n    ")]):t._t("body"),t._v(" "),t._t("default")],2)],2)}),[],!1,null,null,null);e.a=r.exports},1538:function(t,e,n){},1600:function(t,e,n){"use strict";n(14),n(9),n(20),n(24),n(10),n(21),n(29),n(23),n(30);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i={props:{value:{type:Object,default:function(){return null}},filterAttributes:{type:Array,default:function(){return[]}},inputType:{type:String,default:"plain_text"},operators:{type:Array,default:function(){return[]}},dropdownValues:{type:Array,default:function(){return[]}},showQueryOperator:{type:Boolean,default:!1},showUserInput:{type:Boolean,default:!0},groupedFilters:{type:Boolean,default:!1},filterGroups:{type:Array,default:function(){return[]}},customAttributeType:{type:String,default:""},errorMessage:{type:String,default:""}},computed:{attributeKey:{get:function(){return this.value?this.value.attribute_key:null},set:function(t){var e=this.value||{};this.$emit("input",o(o({},e),{},{attribute_key:t}))}},filterOperator:{get:function(){return this.value?this.value.filter_operator:null},set:function(t){var e=this.value||{};this.$emit("input",o(o({},e),{},{filter_operator:t}))}},values:{get:function(){return this.value?this.value.values:null},set:function(t){var e=this.value||{};this.$emit("input",o(o({},e),{},{values:t}))}},query_operator:{get:function(){return this.value?this.value.query_operator:null},set:function(t){var e=this.value||{};this.$emit("input",o(o({},e),{},{query_operator:t}))}},custom_attribute_type:{get:function(){return this.customAttributeType?this.customAttributeType:""},set:function(){var t=this.value||{};this.$emit("input",o(o({},t),{},{custom_attribute_type:this.customAttributeType}))}}},watch:{customAttributeType:{handler:function(t){this.value.custom_attribute_type="conversation_attribute"===t||"contact_attribute"===t?this.customAttributeType:""},immediate:!0}},methods:{removeFilter:function(){this.$emit("removeFilter")},resetFilter:function(){this.$emit("resetFilter")},getInputErrorClass:function(t){return t?"bg-red-50 dark:bg-red-800/50 border-red-100 dark:border-red-700/50":"bg-slate-50 dark:bg-slate-800 border-slate-75 dark:border-slate-700/50"}}},s=(n(1606),n(8)),u=Object(s.a)(i,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"p-2 border border-solid rounded-md",class:t.getInputErrorClass(t.errorMessage)},[e("div",{staticClass:"flex"},[t.groupedFilters?e("select",{directives:[{name:"model",rawName:"v-model",value:t.attributeKey,expression:"attributeKey"}],staticClass:"bg-white max-w-[30%] dark:bg-slate-900 mb-0 mr-1 text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.attributeKey=e.target.multiple?n:n[0]},function(e){return t.resetFilter()}]}},t._l(t.filterGroups,(function(n,a){return e("optgroup",{key:a,attrs:{label:n.name}},t._l(n.attributes,(function(n){return e("option",{key:n.key,domProps:{value:n.key}},[t._v("\n            "+t._s(n.name)+"\n          ")])})),0)})),0):e("select",{directives:[{name:"model",rawName:"v-model",value:t.attributeKey,expression:"attributeKey"}],staticClass:"bg-white max-w-[30%] dark:bg-slate-900 mb-0 mr-1 text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.attributeKey=e.target.multiple?n:n[0]},function(e){return t.resetFilter()}]}},t._l(t.filterAttributes,(function(n){return e("option",{key:n.key,attrs:{disabled:n.disabled},domProps:{value:n.key}},[t._v("\n          "+t._s(n.name)+"\n        ")])})),0),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filterOperator,expression:"filterOperator"}],staticClass:"bg-white dark:bg-slate-900 max-w-[20%] mb-0 mr-1 text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.filterOperator=e.target.multiple?n:n[0]}}},t._l(t.operators,(function(n,a){return e("option",{key:a,domProps:{value:n.value}},[t._v("\n          "+t._s(t.$t(`FILTER.OPERATOR_LABELS.${n.value}`))+"\n        ")])})),0),t._v(" "),t.showUserInput?e("div",{staticClass:"flex-grow mr-1 filter__answer--wrap"},["multi_select"===t.inputType?e("div",{staticClass:"multiselect-wrap--small"},[e("multiselect",{attrs:{"track-by":"id",label:"name",placeholder:"Select",multiple:"","selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:t.dropdownValues,"allow-empty":!1},model:{value:t.values,callback:function(e){t.values=e},expression:"values"}})],1):"search_select"===t.inputType?e("div",{staticClass:"multiselect-wrap--small"},[e("multiselect",{attrs:{"track-by":"id",label:"name",placeholder:"Select","selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:t.dropdownValues,"allow-empty":!1,"option-height":104},model:{value:t.values,callback:function(e){t.values=e},expression:"values"}})],1):"date"===t.inputType?e("div",{staticClass:"multiselect-wrap--small"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.values,expression:"values"}],staticClass:"mb-0 datepicker",attrs:{type:"date",editable:!1},domProps:{value:t.values},on:{input:function(e){e.target.composing||(t.values=e.target.value)}}})]):e("input",{directives:[{name:"model",rawName:"v-model",value:t.values,expression:"values"}],staticClass:"mb-0",attrs:{type:"text",placeholder:t.$t("FILTER.INPUT_PLACEHOLDER")},domProps:{value:t.values},on:{input:function(e){e.target.composing||(t.values=e.target.value)}}})]):t._e(),t._v(" "),e("woot-button",{attrs:{icon:"dismiss",variant:"clear","color-scheme":"secondary"},on:{click:t.removeFilter}})],1),t._v(" "),t.errorMessage?e("p",{staticClass:"filter-error"},[t._v("\n      "+t._s(t.errorMessage)+"\n    ")]):t._e()]),t._v(" "),t.showQueryOperator?e("div",{staticClass:"flex items-center justify-center relative my-2.5 mx-0"},[e("hr",{staticClass:"absolute w-full border-b border-solid border-slate-75 dark:border-slate-800"}),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.query_operator,expression:"query_operator"}],staticClass:"relative w-auto mb-0 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.query_operator=e.target.multiple?n:n[0]}}},[e("option",{attrs:{value:"and"}},[t._v("\n        "+t._s(t.$t("FILTER.QUERY_DROPDOWN_LABELS.AND"))+"\n      ")]),t._v(" "),e("option",{attrs:{value:"or"}},[t._v("\n        "+t._s(t.$t("FILTER.QUERY_DROPDOWN_LABELS.OR"))+"\n      ")])])]):t._e()])}),[],!1,null,"59f86fa4",null);e.a=u.exports},1606:function(t,e,n){"use strict";n(1538)},1777:function(t,e,n){},1941:function(t,e,n){"use strict";n(1777)},2214:function(t,e,n){"use strict";n.r(e);n(33),n(41),n(44),n(9),n(22);var a=n(64),o=(n(14),n(20),n(21),n(24),n(10),n(29),n(23),n(30),n(38)),r=n(1600),i=n(1747),s=(n(81),n(381),n(140),n(255),n(75),n(91),n(32),n(34),n(17),n(65),n(59),n(5)),u=n(197),l=n(356),c=n(876),p=n(868),m=(n(141),[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"}]),d=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"contains",label:"Contains"},{value:"does_not_contain",label:"Does not contain"}],_=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"}],b=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"},{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"}],y=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"contains",label:"Contains"},{value:"does_not_contain",label:"Does not contain"},{value:"starts_with",label:"Starts With"}],f=n(1775),v=n(892),A=n(1776);function O(t){return function(t){if(Array.isArray(t))return T(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var g=function(t){return{date:"date",text:"plain_text",list:"search_select",checkbox:"search_select"}[t]||"plain_text"},h=function(t,e){return t.find((function(t){return t.attribute_key===e}))},E=function(t){return{list:m,text:_,number:m,link:m,date:b,checkbox:m}[t]||m},I=function(t,e){return t.map((function(t){return{key:t.attribute_key,name:t.attribute_display_name,inputType:g(t.attribute_display_type),filterOperators:E(t.attribute_display_type),customAttributeType:e}}))},N=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return t.map((function(t){return{id:t[e],name:t.title}}))},k=function(t){return[{id:"nil",name:"None"}].concat(O(t||[]))},S=function(t){return"message_created"===t?f.c:"conversation_opened"===t?f.b:f.d},w=function(){return f.a},C=function(t){var e=JSON.parse(JSON.stringify(t));return e.conditions[e.conditions.length-1].query_operator=null,e.conditions=Object(v.a)(e.conditions).payload,e.actions=Object(A.a)(e.actions),e},M=function(t,e){return t[e].conditions},R=function(t,e,n){return t[e.event_name].conditions.find((function(t){return t.key===n}))},x=function(t,e,n,a){var o=h(t,a);return o?g(o.attribute_display_type):R(e,n,a).inputType},D=function(t,e,n,a,o){if("edit"===a){var r=h(t,o);if(r)return E(r.attribute_display_type)}return R(e,n,o).filterOperators},L=function(t,e,n){return t[e.event_name].conditions.find((function(t){return t.key===n})).customAttributeType},U=function(t,e){return"send_email_to_team"!==e&&"send_message"!==e&&"send_private_note"!==e&&!!t.find((function(t){return t.key===e})).inputType};function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){F(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function F(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $(t){return function(t){if(Array.isArray(t))return K(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return K(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function B(){var t=Object(u.c)(),e=Object(l.a)().t,n=Object(u.a)("agents/getAgents"),o=Object(u.a)("campaigns/getAllCampaigns"),r=Object(u.a)("contacts/getContacts"),i=Object(u.a)("inboxes/getInboxes"),m=Object(u.a)("labels/getLabels"),d=Object(u.a)("teams/getTeams"),_=Object(u.a)("sla/getSLA"),b=Object(s.computed)((function(){return[{id:!0,name:e("FILTER.ATTRIBUTE_LABELS.TRUE")},{id:!1,name:e("FILTER.ATTRIBUTE_LABELS.FALSE")}]})),y=Object(s.computed)((function(){var t=e("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS");return[].concat($(Object.keys(t).map((function(e){return{id:e,name:t[e].TEXT}}))),[{id:"all",name:e("CHAT_LIST.FILTER_ALL")}])})),v=function(e){return function(t){var e=t.agents,n=t.booleanFilterOptions,a=t.campaigns,o=t.contacts,r=t.countries,i=t.customAttributes,s=t.inboxes,u=t.languages,l=t.statusFilterOptions,c=t.teams,p=t.type;return function(t,e){return t.find((function(t){return t.attribute_key===e&&"checkbox"===t.attribute_display_type}))}(i,p)?n:function(t,e){return t.find((function(t){return t.attribute_key===e&&"list"===t.attribute_display_type}))}(i,p)?function(t,e){return t.find((function(t){return t.attribute_key===e})).attribute_values.map((function(t){return{id:t,name:t}}))}(i,p):{status:l,assignee_id:e,contact:o,inbox_id:s,team_id:c,campaigns:N(a),browser_language:u,conversation_language:u,country_code:r,message_type:f.e,priority:f.f}[p]}({agents:n.value,booleanFilterOptions:b.value,campaigns:o.value,contacts:r.value,customAttributes:t["attributes/getAttributes"].value,inboxes:i.value,statusFilterOptions:y.value,teams:d.value,languages:c.a,countries:p.a,type:e})},A=function(t,e,n){var a=function(t){return t.map((function(t){return{key:t.attribute_key,name:t.attribute_display_name,type:t.attribute_display_type}}))}(e);return t.conditions.map((function(e){var o,r,i=(o=a,r=e.attribute_key,o.find((function(t){return t.key===r}))),s="plain_text";return s=i?g(i.type):function(t,e,n){return t[e].conditions.find((function(t){return t.key===n})).inputType}(n,t.event_name,e.attribute_key),P(P({},e),{},"plain_text"===s||"date"===s?{values:e.values[0]}:"comma_separated_plain_text"===s?{values:e.values.join(",")}:{query_operator:e.query_operator||"and",values:$(v(e.attribute_key)).filter((function(t){return $(e.values).includes(t.id)}))})}))},T=function(t){return function(t){var e=t.agents,n=t.teams,a=t.labels,o=t.slaPolicies,r=t.type;return{assign_agent:k(e),assign_team:k(n),send_email_to_team:n,add_label:N(a,"title"),remove_label:N(a,"title"),change_priority:f.f,add_sla:o}[r]}({agents:n.value,labels:m.value,teams:d.value,slaPolicies:_.value,languages:c.a,type:t})},h=function(t,e){var n=t.action_params,a=e.find((function(e){return e.key===t.action_name})).inputType;return"multi_select"===a||"search_select"===a?$(T(t.action_name)).filter((function(t){return $(n).includes(t.id)})):"team_message"===a?{team_ids:$(T(t.action_name)).filter((function(t){return $(n[0].team_ids).includes(t.id)})),message:n[0].message}:$(n)},E=function(t,e){return t.actions.map((function(t){return P(P({},t),{},{action_params:t.action_params.length?h(t,e):[]})}))};return{agents:n,campaigns:o,contacts:r,inboxes:i,labels:m,teams:d,slaPolicies:_,booleanFilterOptions:b,statusFilterOptions:y,onEventChange:function(t){t.conditions=S(t.event_name),t.actions=w()},getConditionDropdownValues:v,appendNewCondition:function(t){var e;(e=t.conditions).push.apply(e,$(S(t.event_name)))},appendNewAction:function(t){var e;(e=t.actions).push.apply(e,$(w()))},removeFilter:function(t,n){t.conditions.length<=1?Object(a.a)(e("AUTOMATION.CONDITION.DELETE_MESSAGE")):t.conditions.splice(n,1)},removeAction:function(t,n){t.actions.length<=1?Object(a.a)(e("AUTOMATION.ACTION.DELETE_MESSAGE")):t.actions.splice(n,1)},resetFilter:function(t,e,n,a){t.conditions[n].filter_operator=e[t.event_name].conditions.find((function(t){return t.key===a.attribute_key})).filterOperators[0].value,t.conditions[n].values=""},resetAction:function(t,e){t.actions[e].action_params=[]},formatAutomation:function(t,e,n,a){return P(P({},t),{},{conditions:A(t,e,n),actions:E(t,a)})},getActionDropdownValues:T,manifestCustomAttributes:function(n){var a,o,r,i,s=t["attributes/getAttributesByModel"].value("conversation_attribute"),u=t["attributes/getAttributesByModel"].value("contact_attribute"),l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=[];return t.length&&o.push.apply(o,[{key:"conversation_custom_attribute",name:n,disabled:!0}].concat(O(t))),e.length&&o.push.apply(o,[{key:"contact_custom_attribute",name:a,disabled:!0}].concat(O(e))),o}(I(s,"conversation_attribute"),I(u,"contact_attribute"),e("AUTOMATION.CONDITION.CONVERSATION_CUSTOM_ATTR_LABEL"),e("AUTOMATION.CONDITION.CONTACT_CUSTOM_ATTR_LABEL"));(a=n.message_created.conditions).push.apply(a,$(l)),(o=n.conversation_created.conditions).push.apply(o,$(l)),(r=n.conversation_updated.conditions).push.apply(r,$(l)),(i=n.conversation_opened.conditions).push.apply(i,$(l))}}}var G=n(1563),V={message_created:{conditions:[{key:"message_type",name:"Message Type",attributeI18nKey:"MESSAGE_TYPE",inputType:"search_select",filterOperators:m},{key:"content",name:"Message Content",attributeI18nKey:"MESSAGE_CONTAINS",inputType:"comma_separated_plain_text",filterOperators:d},{key:"email",name:"Email",attributeI18nKey:"EMAIL",inputType:"plain_text",filterOperators:d},{key:"inbox_id",name:"Inbox",attributeI18nKey:"INBOX",inputType:"multi_select",filterOperators:m},{key:"conversation_language",name:"Conversation Language",attributeI18nKey:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:m},{key:"phone_number",name:"Phone Number",attributeI18nKey:"PHONE_NUMBER",inputType:"plain_text",filterOperators:y}],actions:[{key:"assign_agent",name:"Assign to agent",attributeI18nKey:"ASSIGN_AGENT"},{key:"assign_team",name:"Assign a team",attributeI18nKey:"ASSIGN_TEAM"},{key:"add_label",name:"Add a label",attributeI18nKey:"ADD_LABEL"},{key:"remove_label",name:"Remove a label",attributeI18nKey:"REMOVE_LABEL"},{key:"send_email_to_team",name:"Send an email to team",attributeI18nKey:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"Send a message",attributeI18nKey:"SEND_MESSAGE"},{key:"send_private_note",name:"Send a private note",attributeI18nKey:"SEND_PRIVATE_NOTE"},{key:"send_email_transcript",name:"Send an email transcript",attributeI18nKey:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"Mute conversation",attributeI18nKey:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"Snooze conversation",attributeI18nKey:"MUTE_CONVERSATION"},{key:"resolve_conversation",name:"Resolve conversation",attributeI18nKey:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"Send Webhook Event",attributeI18nKey:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"Send Attachment",attributeI18nKey:"SEND_ATTACHMENT"}]},conversation_created:{conditions:[{key:"status",name:"Status",attributeI18nKey:"STATUS",inputType:"multi_select",filterOperators:m},{key:"browser_language",name:"Browser Language",attributeI18nKey:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:m},{key:"mail_subject",name:"Email Subject",attributeI18nKey:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:d},{key:"country_code",name:"Country",attributeI18nKey:"COUNTRY_NAME",inputType:"search_select",filterOperators:m},{key:"phone_number",name:"Phone Number",attributeI18nKey:"PHONE_NUMBER",inputType:"plain_text",filterOperators:y},{key:"referer",name:"Referrer Link",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",filterOperators:d},{key:"email",name:"Email",attributeI18nKey:"EMAIL",inputType:"plain_text",filterOperators:d},{key:"inbox_id",name:"Inbox",attributeI18nKey:"INBOX",inputType:"multi_select",filterOperators:m},{key:"conversation_language",name:"Conversation Language",attributeI18nKey:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:m},{key:"priority",name:"Priority",attributeI18nKey:"PRIORITY",inputType:"multi_select",filterOperators:m}],actions:[{key:"assign_agent",name:"Assign to agent",attributeI18nKey:"ASSIGN_AGENT"},{key:"assign_team",name:"Assign a team",attributeI18nKey:"ASSIGN_TEAM"},{key:"assign_agent",name:"Assign an agent",attributeI18nKey:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"Send an email to team",attributeI18nKey:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"Send a message",attributeI18nKey:"SEND_MESSAGE"},{key:"send_email_transcript",name:"Send an email transcript",attributeI18nKey:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"Mute conversation",attributeI18nKey:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"Snooze conversation",attributeI18nKey:"MUTE_CONVERSATION"},{key:"resolve_conversation",name:"Resolve conversation",attributeI18nKey:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"Send Webhook Event",attributeI18nKey:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"Send Attachment",attributeI18nKey:"SEND_ATTACHMENT"}]},conversation_updated:{conditions:[{key:"status",name:"Status",attributeI18nKey:"STATUS",inputType:"multi_select",filterOperators:m},{key:"browser_language",name:"Browser Language",attributeI18nKey:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:m},{key:"mail_subject",name:"Email Subject",attributeI18nKey:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:d},{key:"country_code",name:"Country",attributeI18nKey:"COUNTRY_NAME",inputType:"search_select",filterOperators:m},{key:"referer",name:"Referrer Link",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",filterOperators:d},{key:"phone_number",name:"Phone Number",attributeI18nKey:"PHONE_NUMBER",inputType:"plain_text",filterOperators:y},{key:"assignee_id",name:"Assignee",attributeI18nKey:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:_},{key:"team_id",name:"Team",attributeI18nKey:"TEAM_NAME",inputType:"search_select",filterOperators:_},{key:"email",name:"Email",attributeI18nKey:"EMAIL",inputType:"plain_text",filterOperators:d},{key:"inbox_id",name:"Inbox",attributeI18nKey:"INBOX",inputType:"multi_select",filterOperators:m},{key:"conversation_language",name:"Conversation Language",attributeI18nKey:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:m},{key:"priority",name:"Priority",attributeI18nKey:"PRIORITY",inputType:"multi_select",filterOperators:m}],actions:[{key:"assign_agent",name:"Assign to agent",attributeI18nKey:"ASSIGN_AGENT"},{key:"assign_team",name:"Assign a team",attributeI18nKey:"ASSIGN_TEAM"},{key:"assign_agent",name:"Assign an agent",attributeI18nKey:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"Send an email to team",attributeI18nKey:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"Send a message",attributeI18nKey:"SEND_MESSAGE"},{key:"send_email_transcript",name:"Send an email transcript",attributeI18nKey:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"Mute conversation",attributeI18nKey:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"Snooze conversation",attributeI18nKey:"MUTE_CONVERSATION"},{key:"resolve_conversation",name:"Resolve conversation",attributeI18nKey:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"Send Webhook Event",attributeI18nKey:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"Send Attachment",attributeI18nKey:"SEND_ATTACHMENT"}]},conversation_opened:{conditions:[{key:"browser_language",name:"Browser Language",attributeI18nKey:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:m},{key:"email",name:"Email",attributeI18nKey:"EMAIL",inputType:"plain_text",filterOperators:d},{key:"mail_subject",name:"Email Subject",attributeI18nKey:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:d},{key:"country_code",name:"Country",attributeI18nKey:"COUNTRY_NAME",inputType:"search_select",filterOperators:m},{key:"referer",name:"Referrer Link",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",filterOperators:d},{key:"assignee_id",name:"Assignee",attributeI18nKey:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:_},{key:"phone_number",name:"Phone Number",attributeI18nKey:"PHONE_NUMBER",inputType:"plain_text",filterOperators:y},{key:"team_id",name:"Team",attributeI18nKey:"TEAM_NAME",inputType:"search_select",filterOperators:_},{key:"inbox_id",name:"Inbox",attributeI18nKey:"INBOX",inputType:"multi_select",filterOperators:m},{key:"conversation_language",name:"Conversation Language",attributeI18nKey:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:m},{key:"priority",name:"Priority",attributeI18nKey:"PRIORITY",inputType:"multi_select",filterOperators:m}],actions:[{key:"assign_agent",name:"Assign to agent",attributeI18nKey:"ASSIGN_AGENT"},{key:"assign_team",name:"Assign a team",attributeI18nKey:"ASSIGN_TEAM"},{key:"assign_agent",name:"Assign an agent",attributeI18nKey:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"Send an email to team",attributeI18nKey:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"Send a message",attributeI18nKey:"SEND_MESSAGE"},{key:"send_email_transcript",name:"Send an email transcript",attributeI18nKey:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"Mute conversation",attributeI18nKey:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"Snooze conversation",attributeI18nKey:"MUTE_CONVERSATION"},{key:"send_webhook_event",name:"Send Webhook Event",attributeI18nKey:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"Send Attachment",attributeI18nKey:"SEND_ATTACHMENT"}]}},q=[{key:"conversation_created",value:"Conversation Created"},{key:"conversation_updated",value:"Conversation Updated"},{key:"message_created",value:"Message Created"},{key:"conversation_opened",value:"Conversation Opened"}],H=[{key:"assign_agent",label:"Assign to agent",inputType:"search_select"},{key:"assign_team",label:"Assign a team",inputType:"search_select"},{key:"add_label",label:"Add a label",inputType:"multi_select"},{key:"remove_label",label:"Remove a label",inputType:"multi_select"},{key:"send_email_to_team",label:"Send an email to team",inputType:"team_message"},{key:"send_email_transcript",label:"Send an email transcript",inputType:"email"},{key:"mute_conversation",label:"Mute conversation",inputType:null},{key:"snooze_conversation",label:"Snooze conversation",inputType:null},{key:"resolve_conversation",label:"Resolve conversation",inputType:null},{key:"send_webhook_event",label:"Send Webhook Event",inputType:"url"},{key:"send_attachment",label:"Send Attachment",inputType:"attachment"},{key:"send_message",label:"Send a message",inputType:"textarea"},{key:"send_private_note",label:"Send a private note",inputType:"textarea",attributeI18nKey:"SEND_PRIVATE_NOTE"},{key:"change_priority",label:"Change Priority",inputType:"search_select"},{key:"add_sla",label:"Add SLA",inputType:"search_select"}];function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){J(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function J(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Y={components:{FilterInputBox:r.a,AutomationActionInput:i.a},props:{onClose:{type:Function,default:function(){}}},setup:function(){var t=B();return{onEventChange:t.onEventChange,getConditionDropdownValues:t.getConditionDropdownValues,appendNewCondition:t.appendNewCondition,appendNewAction:t.appendNewAction,removeFilter:t.removeFilter,removeAction:t.removeAction,resetFilter:t.resetFilter,resetAction:t.resetAction,getActionDropdownValues:t.getActionDropdownValues,manifestCustomAttributes:t.manifestCustomAttributes}},data:function(){return{automationTypes:JSON.parse(JSON.stringify(V)),automationRuleEvent:q[0].key,automationRuleEvents:q,automationMutated:!1,show:!0,automation:{name:null,description:null,event_name:"conversation_created",conditions:[{attribute_key:"status",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],actions:[{action_name:"assign_agent",action_params:[]}]},showDeleteConfirmationModal:!1,allCustomAttributes:[],mode:"create",errors:{}}},computed:W(W({},Object(o.mapGetters)({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"})),{},{hasAutomationMutated:function(){return!(!this.automation.conditions[0].values&&!this.automation.actions[0].action_params.length)},automationActionTypes:function(){return this.isFeatureEnabled("sla")?H:H.filter((function(t){return"add_sla"!==t.key}))}}),mounted:function(){this.$store.dispatch("inboxes/get"),this.$store.dispatch("agents/get"),this.$store.dispatch("contacts/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get"),this.$store.dispatch("campaigns/get"),this.allCustomAttributes=this.$store.getters["attributes/getAttributes"],this.manifestCustomAttributes(this.automationTypes)},methods:{getAttributes:M,getInputType:x,getOperators:D,getCustomAttributeType:L,showActionInput:U,isFeatureEnabled:function(t){return this.isFeatureEnabledonAccount(this.accountId,t)},emitSaveAutomation:function(){if(this.errors=Object(G.b)(this.automation),0===Object.keys(this.errors).length){var t=C(this.automation);this.$emit("saveAutomation",t,this.mode)}}}},X=n(8),Q=Object(X.a)(Y,(function(){var t=this,e=t._self._c;return e("div",[e("woot-modal-header",{attrs:{"header-title":t.$t("AUTOMATION.ADD.TITLE")}}),t._v(" "),e("div",{staticClass:"flex flex-col modal-content"},[e("div",{staticClass:"w-full"},[e("woot-input",{class:{error:t.errors.name},attrs:{label:t.$t("AUTOMATION.ADD.FORM.NAME.LABEL"),type:"text",error:t.errors.name?t.$t("AUTOMATION.ADD.FORM.NAME.ERROR"):"",placeholder:t.$t("AUTOMATION.ADD.FORM.NAME.PLACEHOLDER")},model:{value:t.automation.name,callback:function(e){t.$set(t.automation,"name",e)},expression:"automation.name"}}),t._v(" "),e("woot-input",{class:{error:t.errors.description},attrs:{label:t.$t("AUTOMATION.ADD.FORM.DESC.LABEL"),type:"text",error:t.errors.description?t.$t("AUTOMATION.ADD.FORM.DESC.ERROR"):"",placeholder:t.$t("AUTOMATION.ADD.FORM.DESC.PLACEHOLDER")},model:{value:t.automation.description,callback:function(e){t.$set(t.automation,"description",e)},expression:"automation.description"}}),t._v(" "),e("div",{staticClass:"mb-6"},[e("label",{class:{error:t.errors.event_name}},[t._v("\n          "+t._s(t.$t("AUTOMATION.ADD.FORM.EVENT.LABEL"))+"\n          "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.automation.event_name,expression:"automation.event_name"}],staticClass:"m-0",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.automation,"event_name",e.target.multiple?n:n[0])},function(e){return t.onEventChange(t.automation)}]}},t._l(t.automationRuleEvents,(function(n){return e("option",{key:n.key,domProps:{value:n.key}},[t._v("\n              "+t._s(n.value)+"\n            ")])})),0),t._v(" "),t.errors.event_name?e("span",{staticClass:"message"},[t._v("\n            "+t._s(t.$t("AUTOMATION.ADD.FORM.EVENT.ERROR"))+"\n          ")]):t._e()]),t._v(" "),t.hasAutomationMutated?e("p",{staticClass:"text-xs text-right text-green-500 dark:text-green-500"},[t._v("\n          "+t._s(t.$t("AUTOMATION.FORM.RESET_MESSAGE"))+"\n        ")]):t._e()]),t._v(" "),e("section",[e("label",[t._v("\n          "+t._s(t.$t("AUTOMATION.ADD.FORM.CONDITIONS.LABEL"))+"\n        ")]),t._v(" "),e("div",{staticClass:"w-full p-4 mb-4 border border-solid rounded-lg bg-slate-25 dark:bg-slate-700 border-slate-50 dark:border-slate-700"},[t._l(t.automation.conditions,(function(n,a){return e("FilterInputBox",{key:a,attrs:{"filter-attributes":t.getAttributes(t.automationTypes,t.automation.event_name),"input-type":t.getInputType(t.allCustomAttributes,t.automationTypes,t.automation,t.automation.conditions[a].attribute_key),operators:t.getOperators(t.allCustomAttributes,t.automationTypes,t.automation,t.mode,t.automation.conditions[a].attribute_key),"dropdown-values":t.getConditionDropdownValues(t.automation.conditions[a].attribute_key),"show-query-operator":a!==t.automation.conditions.length-1,"custom-attribute-type":t.getCustomAttributeType(t.automationTypes,t.automation,t.automation.conditions[a].attribute_key),"error-message":t.errors[`condition_${a}`]?t.$t(`AUTOMATION.ERRORS.${t.errors[`condition_${a}`]}`):""},on:{resetFilter:function(e){return t.resetFilter(t.automation,t.automationTypes,a,t.automation.conditions[a])},removeFilter:function(e){return t.removeFilter(t.automation,a)}},model:{value:t.automation.conditions[a],callback:function(e){t.$set(t.automation.conditions,a,e)},expression:"automation.conditions[i]"}})})),t._v(" "),e("div",{staticClass:"mt-4"},[e("woot-button",{attrs:{icon:"add","color-scheme":"success",variant:"smooth",size:"small"},on:{click:function(e){return t.appendNewCondition(t.automation)}}},[t._v("\n              "+t._s(t.$t("AUTOMATION.ADD.CONDITION_BUTTON_LABEL"))+"\n            ")])],1)],2)]),t._v(" "),e("section",[e("label",[t._v("\n          "+t._s(t.$t("AUTOMATION.ADD.FORM.ACTIONS.LABEL"))+"\n        ")]),t._v(" "),e("div",{staticClass:"w-full p-4 mb-4 border border-solid rounded-lg bg-slate-25 dark:bg-slate-700 border-slate-50 dark:border-slate-700"},[t._l(t.automation.actions,(function(n,a){return e("AutomationActionInput",{key:a,attrs:{"action-types":t.automationActionTypes,"dropdown-values":t.getActionDropdownValues(t.automation.actions[a].action_name),"show-action-input":t.showActionInput(t.automationActionTypes,t.automation.actions[a].action_name),"error-message":t.errors[`action_${a}`]?t.$t(`AUTOMATION.ERRORS.${t.errors[`action_${a}`]}`):""},on:{resetAction:function(e){return t.resetAction(t.automation,a)},removeAction:function(e){return t.removeAction(t.automation,a)}},model:{value:t.automation.actions[a],callback:function(e){t.$set(t.automation.actions,a,e)},expression:"automation.actions[i]"}})})),t._v(" "),e("div",{staticClass:"mt-4"},[e("woot-button",{attrs:{icon:"add","color-scheme":"success",variant:"smooth",size:"small"},on:{click:function(e){return t.appendNewAction(t.automation)}}},[t._v("\n              "+t._s(t.$t("AUTOMATION.ADD.ACTION_BUTTON_LABEL"))+"\n            ")])],1)],2)]),t._v(" "),e("div",{staticClass:"w-full"},[e("div",{staticClass:"flex flex-row justify-end w-full gap-2 px-0 py-2"},[e("woot-button",{staticClass:"button clear",on:{click:function(e){return e.preventDefault(),t.onClose.apply(null,arguments)}}},[t._v("\n            "+t._s(t.$t("AUTOMATION.ADD.CANCEL_BUTTON_TEXT"))+"\n          ")]),t._v(" "),e("woot-button",{on:{click:t.emitSaveAutomation}},[t._v("\n            "+t._s(t.$t("AUTOMATION.ADD.SUBMIT"))+"\n          ")])],1)])],1)])],1)}),[],!1,null,null,null),Z=Q.exports;function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(n),!0).forEach((function(e){nt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function nt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var at={components:{FilterInputBox:r.a,AutomationActionInput:i.a},props:{onClose:{type:Function,default:function(){}},selectedResponse:{type:Object,default:function(){}}},setup:function(){var t=B();return{onEventChange:t.onEventChange,getConditionDropdownValues:t.getConditionDropdownValues,appendNewCondition:t.appendNewCondition,appendNewAction:t.appendNewAction,removeFilter:t.removeFilter,removeAction:t.removeAction,resetFilter:t.resetFilter,resetAction:t.resetAction,getActionDropdownValues:t.getActionDropdownValues,formatAutomation:t.formatAutomation,manifestCustomAttributes:t.manifestCustomAttributes}},data:function(){return{automationTypes:JSON.parse(JSON.stringify(V)),automationRuleEvent:q[0].key,automationRuleEvents:q,automationMutated:!1,show:!0,automation:null,showDeleteConfirmationModal:!1,allCustomAttributes:[],mode:"edit",errors:{}}},computed:et(et({},Object(o.mapGetters)({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"})),{},{hasAutomationMutated:function(){return!(!this.automation.conditions[0].values&&!this.automation.actions[0].action_params.length)},automationActionTypes:function(){return this.isFeatureEnabled("sla")?H:H.filter((function(t){return"add_sla"!==t.key}))}}),mounted:function(){this.manifestCustomAttributes(this.automationTypes),this.allCustomAttributes=this.$store.getters["attributes/getAttributes"],this.automation=this.formatAutomation(this.selectedResponse,this.allCustomAttributes,this.automationTypes,this.automationActionTypes)},methods:{getFileName:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.action_params[0];if(!n)return"";if("send_attachment"===t.action_name){var a=e.find((function(t){return t.blob_id===n}));if(a)return a.filename.toString()}return""},getAttributes:M,getInputType:x,getOperators:D,getCustomAttributeType:L,showActionInput:U,isFeatureEnabled:function(t){return this.isFeatureEnabledonAccount(this.accountId,t)},emitSaveAutomation:function(){if(this.errors=Object(G.b)(this.automation),0===Object.keys(this.errors).length){var t=C(this.automation);this.$emit("saveAutomation",t,this.mode)}}}},ot=at,rt=(n(1941),Object(X.a)(ot,(function(){var t=this,e=t._self._c;return e("div",[e("woot-modal-header",{attrs:{"header-title":t.$t("AUTOMATION.EDIT.TITLE")}}),t._v(" "),e("div",{staticClass:"flex flex-col modal-content"},[t.automation?e("div",{staticClass:"w-full"},[e("woot-input",{class:{error:t.errors.name},attrs:{label:t.$t("AUTOMATION.ADD.FORM.NAME.LABEL"),type:"text",error:t.errors.name?t.$t("AUTOMATION.ADD.FORM.NAME.ERROR"):"",placeholder:t.$t("AUTOMATION.ADD.FORM.NAME.PLACEHOLDER")},model:{value:t.automation.name,callback:function(e){t.$set(t.automation,"name",e)},expression:"automation.name"}}),t._v(" "),e("woot-input",{class:{error:t.errors.description},attrs:{label:t.$t("AUTOMATION.ADD.FORM.DESC.LABEL"),type:"text",error:t.errors.description?t.$t("AUTOMATION.ADD.FORM.DESC.ERROR"):"",placeholder:t.$t("AUTOMATION.ADD.FORM.DESC.PLACEHOLDER")},model:{value:t.automation.description,callback:function(e){t.$set(t.automation,"description",e)},expression:"automation.description"}}),t._v(" "),e("div",{staticClass:"event_wrapper"},[e("label",{class:{error:t.errors.event_name}},[t._v("\n          "+t._s(t.$t("AUTOMATION.ADD.FORM.EVENT.LABEL"))+"\n          "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.automation.event_name,expression:"automation.event_name"}],on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.automation,"event_name",e.target.multiple?n:n[0])},function(e){return t.onEventChange(t.automation)}]}},t._l(t.automationRuleEvents,(function(n){return e("option",{key:n.key,domProps:{value:n.key}},[t._v("\n              "+t._s(n.value)+"\n            ")])})),0),t._v(" "),t.errors.event_name?e("span",{staticClass:"message"},[t._v("\n            "+t._s(t.$t("AUTOMATION.ADD.FORM.EVENT.ERROR"))+"\n          ")]):t._e()])]),t._v(" "),e("section",[e("label",[t._v("\n          "+t._s(t.$t("AUTOMATION.ADD.FORM.CONDITIONS.LABEL"))+"\n        ")]),t._v(" "),e("div",{staticClass:"w-full p-4 mb-4 border border-solid rounded-lg bg-slate-25 dark:bg-slate-700 border-slate-50 dark:border-slate-700"},[t._l(t.automation.conditions,(function(n,a){return e("FilterInputBox",{key:a,attrs:{"filter-attributes":t.getAttributes(t.automationTypes,t.automation.event_name),"input-type":t.getInputType(t.allCustomAttributes,t.automationTypes,t.automation,t.automation.conditions[a].attribute_key),operators:t.getOperators(t.allCustomAttributes,t.automationTypes,t.automation,t.mode,t.automation.conditions[a].attribute_key),"dropdown-values":t.getConditionDropdownValues(t.automation.conditions[a].attribute_key),"custom-attribute-type":t.getCustomAttributeType(t.automationTypes,t.automation,t.automation.conditions[a].attribute_key),"show-query-operator":a!==t.automation.conditions.length-1,"error-message":t.errors[`condition_${a}`]?t.$t(`AUTOMATION.ERRORS.${t.errors[`condition_${a}`]}`):""},on:{resetFilter:function(e){return t.resetFilter(t.automation,t.automationTypes,a,t.automation.conditions[a])},removeFilter:function(e){return t.removeFilter(t.automation,a)}},model:{value:t.automation.conditions[a],callback:function(e){t.$set(t.automation.conditions,a,e)},expression:"automation.conditions[i]"}})})),t._v(" "),e("div",{staticClass:"mt-4"},[e("woot-button",{attrs:{icon:"add","color-scheme":"success",variant:"smooth",size:"small"},on:{click:function(e){return t.appendNewCondition(t.automation)}}},[t._v("\n              "+t._s(t.$t("AUTOMATION.ADD.CONDITION_BUTTON_LABEL"))+"\n            ")])],1)],2)]),t._v(" "),e("section",[e("label",[t._v("\n          "+t._s(t.$t("AUTOMATION.ADD.FORM.ACTIONS.LABEL"))+"\n        ")]),t._v(" "),e("div",{staticClass:"w-full p-4 mb-4 border border-solid rounded-lg bg-slate-25 dark:bg-slate-700 border-slate-50 dark:border-slate-700"},[t._l(t.automation.actions,(function(n,a){return e("AutomationActionInput",{key:a,attrs:{"action-types":t.automationActionTypes,"dropdown-values":t.getActionDropdownValues(n.action_name),"show-action-input":t.showActionInput(t.automationActionTypes,n.action_name),"error-message":t.errors[`action_${a}`]?t.$t(`AUTOMATION.ERRORS.${t.errors[`action_${a}`]}`):"","initial-file-name":t.getFileName(n,t.automation.files)},on:{resetAction:function(e){return t.resetAction(t.automation,a)},removeAction:function(e){return t.removeAction(t.automation,a)}},model:{value:t.automation.actions[a],callback:function(e){t.$set(t.automation.actions,a,e)},expression:"automation.actions[i]"}})})),t._v(" "),e("div",{staticClass:"mt-4"},[e("woot-button",{attrs:{icon:"add","color-scheme":"success",variant:"smooth",size:"small"},on:{click:function(e){return t.appendNewAction(t.automation)}}},[t._v("\n              "+t._s(t.$t("AUTOMATION.ADD.ACTION_BUTTON_LABEL"))+"\n            ")])],1)],2)]),t._v(" "),e("div",{staticClass:"w-full"},[e("div",{staticClass:"flex flex-row justify-end w-full gap-2 px-0 py-2"},[e("woot-button",{staticClass:"button",attrs:{variant:"clear"},on:{click:function(e){return e.preventDefault(),t.onClose.apply(null,arguments)}}},[t._v("\n            "+t._s(t.$t("AUTOMATION.EDIT.CANCEL_BUTTON_TEXT"))+"\n          ")]),t._v(" "),e("woot-button",{on:{click:t.emitSaveAutomation}},[t._v("\n            "+t._s(t.$t("AUTOMATION.EDIT.SUBMIT"))+"\n          ")])],1)])],1):t._e()])],1)}),[],!1,null,"0010951c",null)),it=rt.exports,st=n(1506),ut=n(1508),lt=n(862),ct={__name:"AutomationRuleRow",props:{automation:{type:Object,required:!0},loading:{type:Boolean,default:!1}},emits:["toggle","edit","delete","clone"],setup:function(t,e){var n=e.emit,a=t;return{__sfc:!0,props:a,emit:n,readableDate:function(t){return Object(lt.c)(new Date(t),"LLL d, yyyy")},readableDateWithTime:function(t){return Object(lt.c)(new Date(t),"LLL d, yyyy hh:mm a")},toggle:function(){var t=a.automation,e=t.id,o=t.name,r=t.active;n("toggle",{id:e,name:o,status:r})}}}},pt=Object(X.a)(ct,(function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("tr",[e("td",{staticClass:"py-4 ltr:pr-4 rtl:pl-4 min-w-[200px]"},[t._v(t._s(t.automation.name))]),t._v(" "),e("td",{staticClass:"py-4 ltr:pr-4 rtl:pl-4"},[t._v(t._s(t.automation.description))]),t._v(" "),e("td",{staticClass:"py-4 ltr:pr-4 rtl:pl-4"},[e("woot-switch",{attrs:{value:t.automation.active},on:{input:n.toggle}})],1),t._v(" "),e("td",{staticClass:"py-4 ltr:pr-4 rtl:pl-4 min-w-[12px]",attrs:{title:n.readableDateWithTime(t.automation.created_on)}},[t._v("\n    "+t._s(n.readableDate(t.automation.created_on))+"\n  ")]),t._v(" "),e("td",{staticClass:"py-4 min-w-xs"},[e("div",{staticClass:"flex gap-1 justify-end flex-shrink-0"},[e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:t.$t("AUTOMATION.FORM.EDIT"),expression:"$t('AUTOMATION.FORM.EDIT')",modifiers:{top:!0}}],attrs:{variant:"smooth",size:"tiny","color-scheme":"secondary","class-names":"grey-btn",icon:"edit","is-loading":t.loading},on:{click:function(e){return t.$emit("edit",t.automation)}}}),t._v(" "),e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:t.$t("AUTOMATION.CLONE.TOOLTIP"),expression:"$t('AUTOMATION.CLONE.TOOLTIP')",modifiers:{top:!0}}],attrs:{variant:"smooth",size:"tiny","is-loading":t.loading,"color-scheme":"primary","class-names":"grey-btn",icon:"copy"},on:{click:function(e){return t.$emit("clone",t.automation)}}}),t._v(" "),e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:t.$t("AUTOMATION.FORM.DELETE"),expression:"$t('AUTOMATION.FORM.DELETE')",modifiers:{top:!0}}],attrs:{variant:"smooth","is-loading":t.loading,"color-scheme":"alert",size:"tiny",icon:"dismiss-circle","class-names":"grey-btn"},on:{click:function(e){return t.$emit("delete",t.automation)}}})],1)])])}),[],!1,null,null,null).exports;function mt(t,e,n,a,o,r,i){try{var s=t[r](i),u=s.value}catch(l){return void n(l)}s.done?e(u):Promise.resolve(u).then(a,o)}function dt(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var r=t.apply(e,n);function i(t){mt(r,a,o,i,s,"next",t)}function s(t){mt(r,a,o,i,s,"throw",t)}i(void 0)}))}}var _t={__name:"Index",setup:function(t){var e=Object(u.c)(),n=Object(u.b)(),o=Object(l.a)().t,r=Object(s.ref)(null),i=Object(s.ref)({}),c=Object(s.ref)(!1),p=Object(s.ref)(!1),m=Object(s.ref)(!1),d=Object(s.ref)({}),_=Object(s.ref)(o("AUTOMATION.TOGGLE.ACTIVATION_TITLE")),b=Object(s.ref)(o("AUTOMATION.TOGGLE.ACTIVATION_DESCRIPTION")),y=Object(s.computed)((function(){return e["automations/getAutomations"].value})),f=Object(s.computed)((function(){return e["automations/getUIFlags"].value})),v=Object(s.computed)((function(){return e.getCurrentAccountId.value})),A=Object(s.computed)((function(){return"".concat(o("AUTOMATION.DELETE.CONFIRM.YES")," ").concat(d.value.name)})),O=Object(s.computed)((function(){return"".concat(o("AUTOMATION.DELETE.CONFIRM.NO")," ").concat(d.value.name)})),T=Object(s.computed)((function(){return" ".concat(d.value.name,"?")})),g=Object(s.computed)((function(){return e["accounts/isFeatureEnabledonAccount"].value(v.value,"sla")}));Object(s.onMounted)((function(){n.dispatch("inboxes/get"),n.dispatch("agents/get"),n.dispatch("contacts/get"),n.dispatch("teams/get"),n.dispatch("labels/get"),n.dispatch("campaigns/get"),n.dispatch("automations/get"),g.value&&n.dispatch("sla/get")}));var h=function(){c.value=!1},E=function(){p.value=!1},I=function(){m.value=!1},N=function(){var t=dt(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.dispatch("automations/delete",e);case 3:Object(a.a)(o("AUTOMATION.DELETE.API.SUCCESS_MESSAGE")),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Object(a.a)(o("AUTOMATION.DELETE.API.ERROR_MESSAGE"));case 9:return t.prev=9,i.value[d.value.id]=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})));return function(e){return t.apply(this,arguments)}}(),k=function(){var t=dt(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.id,t.prev=1,t.next=4,n.dispatch("automations/clone",r);case 4:Object(a.a)(o("AUTOMATION.CLONE.API.SUCCESS_MESSAGE")),n.dispatch("automations/get"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Object(a.a)(o("AUTOMATION.CLONE.API.ERROR_MESSAGE"));case 11:return t.prev=11,i.value[d.value.id]=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(e){return t.apply(this,arguments)}}(),S=function(){var t=dt(regeneratorRuntime.mark((function t(e,r){var i,s,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i="edit"===r?"automations/update":"automations/create",s=o("edit"===r?"AUTOMATION.EDIT.API.SUCCESS_MESSAGE":"AUTOMATION.ADD.API.SUCCESS_MESSAGE"),t.next=5,n.dispatch(i,e);case 5:Object(a.a)(s),h(),E(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),u=o("edit"===r?"AUTOMATION.EDIT.API.ERROR_MESSAGE":"AUTOMATION.ADD.API.ERROR_MESSAGE"),Object(a.a)(u);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}(),w=function(){var t=dt(regeneratorRuntime.mark((function t(e){var i,s,u,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.id,s=e.name,u=e.status,t.prev=1,u?(_.value=o("AUTOMATION.TOGGLE.DEACTIVATION_TITLE"),b.value=o("AUTOMATION.TOGGLE.DEACTIVATION_DESCRIPTION",{automationName:s})):(_.value=o("AUTOMATION.TOGGLE.ACTIVATION_TITLE"),b.value=o("AUTOMATION.TOGGLE.ACTIVATION_DESCRIPTION",{automationName:s})),t.next=5,r.value.showConfirmation();case 5:if(!t.sent){t.next=11;break}return t.next=9,n.dispatch("automations/update",{id:i,active:!u});case 9:l=o(u?"AUTOMATION.TOGGLE.DEACTIVATION_SUCCESFUL":"AUTOMATION.TOGGLE.ACTIVATION_SUCCESFUL"),Object(a.a)(l);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),Object(a.a)(o("AUTOMATION.EDIT.API.ERROR_MESSAGE"));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}();return{__sfc:!0,getters:e,store:n,t:o,confirmDialog:r,loading:i,showAddPopup:c,showEditPopup:p,showDeleteConfirmationPopup:m,selectedAutomation:d,toggleModalTitle:_,toggleModalDescription:b,records:y,uiFlags:f,accountId:v,deleteConfirmText:A,deleteRejectText:O,deleteMessage:T,isSLAEnabled:g,openAddPopup:function(){c.value=!0},hideAddPopup:h,openEditPopup:function(t){d.value=t,p.value=!0},hideEditPopup:E,openDeletePopup:function(t){m.value=!0,d.value=t},closeDeletePopup:I,deleteAutomation:N,confirmDeletion:function(){i.value[d.value.id]=!0,I(),N(d.value.id)},cloneAutomation:k,submitAutomation:S,toggleAutomation:w,AddAutomationRule:Z,EditAutomationRule:it,BaseSettingsHeader:st.a,SettingsLayout:ut.a,AutomationRuleRow:pt}}},bt=_t,yt=Object(X.a)(bt,(function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e(n.SettingsLayout,{attrs:{"is-loading":n.uiFlags.isFetching,"loading-message":t.$t("AUTOMATION.LOADING"),"no-records-found":!n.records.length,"no-records-message":t.$t("AUTOMATION.LIST.404")},scopedSlots:t._u([{key:"header",fn:function(){return[e(n.BaseSettingsHeader,{attrs:{title:t.$t("AUTOMATION.HEADER"),description:t.$t("AUTOMATION.DESCRIPTION"),"link-text":t.$t("AUTOMATION.LEARN_MORE"),"feature-name":"automation"},scopedSlots:t._u([{key:"actions",fn:function(){return[e("woot-button",{staticClass:"button nice rounded-md",attrs:{icon:"add-circle"},on:{click:n.openAddPopup}},[t._v("\n          "+t._s(t.$t("AUTOMATION.HEADER_BTN_TXT"))+"\n        ")])]},proxy:!0}])})]},proxy:!0},{key:"body",fn:function(){return[e("table",{staticClass:"min-w-full divide-y divide-slate-75 dark:divide-slate-700"},[e("thead",t._l(t.$t("AUTOMATION.LIST.TABLE_HEADER"),(function(n){return e("th",{key:n,staticClass:"py-4 pr-4 text-left font-semibold text-slate-700 dark:text-slate-300"},[t._v("\n          "+t._s(n)+"\n        ")])})),0),t._v(" "),e("tbody",{staticClass:"divide-y divide-slate-50 dark:divide-slate-800 text-slate-700 dark:text-slate-300"},t._l(n.records,(function(t){return e(n.AutomationRuleRow,{key:t.id,attrs:{automation:t,loading:n.loading[t.id]},on:{clone:n.cloneAutomation,toggle:n.toggleAutomation,edit:n.openEditPopup,delete:n.openDeletePopup}})})),1)])]},proxy:!0}])},[t._v(" "),t._v(" "),e("woot-modal",{attrs:{show:n.showAddPopup,size:"medium","on-close":n.hideAddPopup},on:{"update:show":function(t){n.showAddPopup=t}}},[n.showAddPopup?e(n.AddAutomationRule,{attrs:{"on-close":n.hideAddPopup},on:{saveAutomation:n.submitAutomation}}):t._e()],1),t._v(" "),e("woot-delete-modal",{attrs:{show:n.showDeleteConfirmationPopup,"on-close":n.closeDeletePopup,"on-confirm":n.confirmDeletion,title:t.$t("LABEL_MGMT.DELETE.CONFIRM.TITLE"),message:t.$t("AUTOMATION.DELETE.CONFIRM.MESSAGE"),"message-value":n.deleteMessage,"confirm-text":n.deleteConfirmText,"reject-text":n.deleteRejectText},on:{"update:show":function(t){n.showDeleteConfirmationPopup=t}}}),t._v(" "),e("woot-modal",{attrs:{show:n.showEditPopup,size:"medium","on-close":n.hideEditPopup},on:{"update:show":function(t){n.showEditPopup=t}}},[n.showEditPopup?e(n.EditAutomationRule,{attrs:{"on-close":n.hideEditPopup,"selected-response":n.selectedAutomation},on:{saveAutomation:n.submitAutomation}}):t._e()],1),t._v(" "),e("woot-confirm-modal",{ref:"confirmDialog",attrs:{title:n.toggleModalTitle,description:n.toggleModalDescription}})],1)}),[],!1,null,null,null);e.default=yt.exports}}]);
//# sourceMappingURL=57-d29c77a44240a5f5f532.chunk.js.map