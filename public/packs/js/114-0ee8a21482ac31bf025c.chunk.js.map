{"version":3,"sources":["webpack:///./app/javascript/dashboard/routes/dashboard/helpcenter/pages/articles/NewArticle.vue?83ed","webpack:///app/javascript/dashboard/routes/dashboard/helpcenter/pages/articles/NewArticle.vue","webpack:///./app/javascript/dashboard/routes/dashboard/helpcenter/pages/articles/NewArticle.vue?b583","webpack:///./app/javascript/dashboard/routes/dashboard/helpcenter/pages/articles/NewArticle.vue"],"names":["component","_vm","this","_c","_self","staticClass","class","showArticleSettings","attrs","$t","on","onClickGoBack","openArticleSettings","closeArticleSettings","createNewArticle","_v","newArticle","article","saveArticle","_e"],"mappings":"gKAAA,I,+2BCQA,OACA,YACA,sBACA,kBACA,qBAEA,aACA,KAPA,WAQA,OACA,gBACA,kBACA,yBACA,uBACA,aAGA,gBACA,sBACA,iCACA,yCAHA,IAKA,UALA,WAMA,uCAEA,WARA,WASA,6DAEA,mBAXA,WAYA,sCAEA,WAdA,WAeA,4DAGA,SACA,cADA,WAEA,sDAEA,iBAJA,YAIA,I,EAAA,c,EAAA,2JACA,sBACA,sBACA,yBACA,kCAJA,0CAMC,EAAD,mCACA,gCACA,yBACA,qBACA,0BAEA,2BAZA,OAMA,EANA,OAcA,gBACA,oBACA,QACA,cACA,gCACA,gBACA,sBAGA,6BACA,kBAxBA,kDA2BA,gBACA,iDACA,qDACA,4BA9BA,yD,kLAkCA,oBAtCA,WAuCA,6BAEA,qBAzCA,WA0CA,6BAEA,YA5CA,WA6CA,sEACA,kCCxFwO,I,OCOpOA,EAAY,YACd,GHRW,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,6BAA6B,CAACF,EAAG,MAAM,CAACE,YAAY,4CAA4CC,MAAM,CAAE,cAAeL,EAAIM,sBAAuB,CAACJ,EAAG,oBAAoB,CAACK,MAAM,CAAC,oBAAoBP,EAAIQ,GAAG,0CAA0C,cAAc,QAAQ,kBAAkBR,EAAIM,qBAAqBG,GAAG,CAAC,KAAOT,EAAIU,cAAc,KAAOV,EAAIW,oBAAoB,MAAQX,EAAIY,qBAAqB,eAAeZ,EAAIa,oBAAoBb,EAAIc,GAAG,KAAKZ,EAAG,gBAAgB,CAACK,MAAM,CAAC,QAAUP,EAAIe,YAAYN,GAAG,CAAC,YAAcT,EAAIa,qBAAqB,GAAGb,EAAIc,GAAG,KAAMd,EAAuB,oBAAEE,EAAG,kBAAkB,CAACK,MAAM,CAAC,QAAUP,EAAIgB,SAASP,GAAG,CAAC,YAAcT,EAAIiB,eAAejB,EAAIkB,MAAM,KAEvvB,IGSpB,EACA,KACA,KACA,MAIa,UAAAnB,E","file":"js/114-0ee8a21482ac31bf025c.chunk.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"flex flex-1 overflow-auto\"},[_c('div',{staticClass:\"flex-1 flex-shrink-0 px-6 overflow-y-auto\",class:{ 'flex-grow-1': _vm.showArticleSettings }},[_c('EditArticleHeader',{attrs:{\"back-button-label\":_vm.$t('HELP_CENTER.HEADER.TITLES.ALL_ARTICLES'),\"draft-state\":\"saved\",\"is-sidebar-open\":_vm.showArticleSettings},on:{\"back\":_vm.onClickGoBack,\"open\":_vm.openArticleSettings,\"close\":_vm.closeArticleSettings,\"save-article\":_vm.createNewArticle}}),_vm._v(\" \"),_c('ArticleEditor',{attrs:{\"article\":_vm.newArticle},on:{\"saveArticle\":_vm.createNewArticle}})],1),_vm._v(\" \"),(_vm.showArticleSettings)?_c('ArticleSettings',{attrs:{\"article\":_vm.article},on:{\"saveArticle\":_vm.saveArticle}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { mapGetters } from 'vuex';\nimport { useAlert } from 'dashboard/composables';\nimport EditArticleHeader from 'dashboard/routes/dashboard/helpcenter/components/Header/EditArticleHeader.vue';\nimport ArticleEditor from '../../components/ArticleEditor.vue';\nimport portalMixin from '../../mixins/portalMixin';\nimport ArticleSettings from './ArticleSettings.vue';\nimport { PORTALS_EVENTS } from '../../../../../helper/AnalyticsHelper/events';\nexport default {\n  components: {\n    EditArticleHeader,\n    ArticleEditor,\n    ArticleSettings,\n  },\n  mixins: [portalMixin],\n  data() {\n    return {\n      articleTitle: '',\n      articleContent: '',\n      showOpenSidebarButton: false,\n      showArticleSettings: true,\n      article: {},\n    };\n  },\n  computed: {\n    ...mapGetters({\n      currentUserID: 'getCurrentUserID',\n      categories: 'categories/allCategories',\n    }),\n    articleId() {\n      return this.$route.params.articleSlug;\n    },\n    newArticle() {\n      return { title: this.articleTitle, content: this.articleContent };\n    },\n    selectedPortalSlug() {\n      return this.$route.params.portalSlug;\n    },\n    categoryId() {\n      return this.categories.length ? this.categories[0].id : null;\n    },\n  },\n  methods: {\n    onClickGoBack() {\n      this.$router.push({ name: 'list_all_locale_articles' });\n    },\n    async createNewArticle({ ...values }) {\n      const { title, content } = values;\n      if (title) this.articleTitle = title;\n      if (content) this.articleContent = content;\n      if (this.articleTitle && this.articleContent) {\n        try {\n          const articleId = await this.$store.dispatch('articles/create', {\n            portalSlug: this.selectedPortalSlug,\n            content: this.articleContent,\n            title: this.articleTitle,\n            author_id: this.currentUserID,\n            // TODO: Change to un categorized later when API supports\n            category_id: this.categoryId,\n          });\n          this.$router.push({\n            name: 'edit_article',\n            params: {\n              articleSlug: articleId,\n              portalSlug: this.selectedPortalSlug,\n              locale: this.locale,\n              recentlyCreated: true,\n            },\n          });\n          this.$track(PORTALS_EVENTS.CREATE_ARTICLE, {\n            locale: this.locale,\n          });\n        } catch (error) {\n          this.alertMessage =\n            error?.message ||\n            this.$t('HELP_CENTER.CREATE_ARTICLE.API.ERROR_MESSAGE');\n          useAlert(this.alertMessage);\n        }\n      }\n    },\n    openArticleSettings() {\n      this.showArticleSettings = true;\n    },\n    closeArticleSettings() {\n      this.showArticleSettings = false;\n    },\n    saveArticle() {\n      this.alertMessage = this.$t('HELP_CENTER.CREATE_ARTICLE.ERROR_MESSAGE');\n      useAlert(this.alertMessage);\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"flex flex-1 overflow-auto\">\n    <div\n      class=\"flex-1 flex-shrink-0 px-6 overflow-y-auto\"\n      :class=\"{ 'flex-grow-1': showArticleSettings }\"\n    >\n      <EditArticleHeader\n        :back-button-label=\"$t('HELP_CENTER.HEADER.TITLES.ALL_ARTICLES')\"\n        draft-state=\"saved\"\n        :is-sidebar-open=\"showArticleSettings\"\n        @back=\"onClickGoBack\"\n        @open=\"openArticleSettings\"\n        @close=\"closeArticleSettings\"\n        @save-article=\"createNewArticle\"\n      />\n      <ArticleEditor :article=\"newArticle\" @saveArticle=\"createNewArticle\" />\n    </div>\n    <ArticleSettings\n      v-if=\"showArticleSettings\"\n      :article=\"article\"\n      @saveArticle=\"saveArticle\"\n    />\n  </div>\n</template>\n","import mod from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewArticle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewArticle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewArticle.vue?vue&type=template&id=6f2752db&\"\nimport script from \"./NewArticle.vue?vue&type=script&lang=js&\"\nexport * from \"./NewArticle.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}